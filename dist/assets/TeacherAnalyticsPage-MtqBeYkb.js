import{u as Pe,r as i,j as e,o as Le,k as ne,U as H,ah as le,A as Be,T as Q,s as M,ar as oe}from"./main-BTTCSkdE.js";import{P as c}from"./PremiumCard-CV5gJlVo.js";import{P as ce}from"./PremiumButton-TaG2j_oH.js";import{E as T}from"./EmptyState-j91SMhTI.js";import Ee from"./jspdf.es.min-BQMzH5Qd.js";import"./jspdf.plugin.autotable-DaH8ixQg.js";import{u as S,w as Fe}from"./xlsx-CY9XdSij.js";import{D as me}from"./download-BRB6ZsEm.js";import{T as Ke}from"./target-DeybGG3h.js";import{R as k,T as D}from"./CategoricalChart-BcFqY2iB.js";import{B as J,a as $}from"./BarChart-Kkf6YQET.js";import{C as E,X as F,Y as G}from"./CartesianChart-AFScPdA1.js";import{L as P}from"./Legend-4LKbXQEL.js";import{P as Re,a as Ie,C as Oe}from"./PieChart-GKwOAFkr.js";import{L as ue,a as Z}from"./LineChart-BNr98iOq.js";import"./typeof-QjJsDpFa.js";import"./index-D_P3mdcN.js";const xe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],ds=()=>{const{user:z}=Pe(),[he,V]=i.useState(!0),[f,ge]=i.useState([]),[p,pe]=i.useState([]),[v,be]=i.useState([]),[N,je]=i.useState([]),[ee,ve]=i.useState([]),[b,se]=i.useState(""),[L,fe]=i.useState(""),[g,te]=i.useState(""),[_,Ne]=i.useState(""),[K,Se]=i.useState(30),[w,_e]=i.useState(null),[y,we]=i.useState(null),[Y,ye]=i.useState(""),[W,Ae]=i.useState(""),[q,Ce]=i.useState("");i.useEffect(()=>{(async()=>{if(!z?.id)return;V(!0);const t=new Date,a=new Date;a.setDate(a.getDate()-K),_e(a),we(t);try{const{data:r}=await M.from("classes").select("id, name, created_by").eq("created_by",z.id).eq("is_active",!0);ge(r||[]);const d=(r||[]).map(m=>m.id);if(d.length===0){V(!1);return}const{data:u}=await M.from("class_members").select("class_id, user_id").in("class_id",d).eq("role","student");if(u&&u.length>0){const m=[...new Set(u.map(O=>O.user_id))],{data:De}=await M.from("profiles").select("id, full_name, email").in("id",m);u.forEach(O=>{O.user=De?.find(Ge=>Ge.id===O.user_id)})}pe(u||[]);const{data:n}=await M.from("activity_class_assignments").select("class_id, activity:activities(id, title, type, max_grade, created_at)").in("class_id",d),h=(n||[]).map(m=>({...m.activity,class_id:m.class_id})).filter(Boolean);be(h);const o=h.map(m=>m.id);if(o.length>0){const{data:m}=await M.from("submissions").select("id, activity_id, student_id, grade, status, submitted_at, graded_at").in("activity_id",o);je(m||[])}const j=[...new Set((u||[]).map(m=>m.user_id))];if(j.length>0){const{data:m}=await M.from("xp_log").select("user_id, xp, source, created_at").in("user_id",j);ve(m||[])}}finally{V(!1)}})()},[z?.id,K]);const A=i.useMemo(()=>{const s=new Set;return p.filter(t=>s.has(t.user_id)?!1:(s.add(t.user_id),!0))},[p]),x=i.useMemo(()=>!w||!y?N:N.filter(s=>{if(!s.submitted_at)return!1;const t=new Date(s.submitted_at);return t>=w&&t<=y}),[N,w,y]),R=i.useMemo(()=>!w||!y?v:v.filter(s=>{if(!s.created_at)return!0;const t=new Date(s.created_at);return t>=w&&t<=y}),[v,w,y]),l=i.useMemo(()=>{const s=new Set(p.map(o=>o.user_id)).size,t=R.length,a=x.length,r=x.filter(o=>o.status==="graded").length,d=r>0?x.filter(o=>o.grade!=null).reduce((o,j)=>o+(j.grade||0),0)/r:0,u=x.filter(o=>{const j=R.find(m=>m.id===o.activity_id);return!j?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)<=new Date(j.due_date)}).length,n=x.filter(o=>{const j=R.find(m=>m.id===o.activity_id);return!j?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)>new Date(j.due_date)}).length,h=t>0&&s>0?(a/(t*s)*100).toFixed(1):0;return{totalStudents:s,totalActivities:t,totalSubmissions:a,gradedSubmissions:r,avgGrade:d.toFixed(1),onTime:u,late:n,completionRate:h}},[p,R,x]),I=i.useMemo(()=>{const s={};return p.forEach(t=>{const a=N.filter(n=>n.student_id===t.user_id),r=a.filter(n=>n.grade!=null),d=r.length>0?r.reduce((n,h)=>n+(h.grade||0),0)/r.length:0,u=ee.filter(n=>n.user_id===t.user_id).reduce((n,h)=>n+(h.xp||0),0);s[t.user_id]={name:t.user?.full_name||"Aluno",avgGrade:d,totalSubmissions:a.length,xp:u}}),Object.values(s).sort((t,a)=>a.avgGrade-t.avgGrade).slice(0,10)},[p,N,ee]),ae=i.useMemo(()=>{const s=new Map;return p.forEach(t=>s.set(t.user_id,t)),s},[p]),C=i.useMemo(()=>{const s=new Map;return f.forEach(t=>s.set(t.id,t)),s},[f]),X=i.useMemo(()=>f.map(s=>{const t=p.filter(n=>n.class_id===s.id),a=v.filter(n=>n.class_id===s.id);t.map(n=>n.user_id);const r=N.filter(n=>{const h=v.find(o=>o.id===n.activity_id);return h&&h.class_id===s.id}),d=r.filter(n=>n.grade!=null),u=d.length>0?d.reduce((n,h)=>n+(h.grade||0),0)/d.length:0;return{name:s.name,students:t.length,activities:a.length,submissions:r.length,avgGrade:u}}),[f,p,v,N]),U=i.useMemo(()=>{const s=v.reduce((t,a)=>(t[a.type]=(t[a.type]||0)+1,t),{});return Object.entries(s).map(([t,a])=>({name:t==="assignment"?"Tarefa":t==="quiz"?"Quiz":"Projeto",value:a}))},[v]),re=i.useMemo(()=>{const s=x.reduce((t,a)=>{if(!a.submitted_at)return t;const r=new Date(a.submitted_at).toLocaleDateString("pt-BR");return t[r]=(t[r]||0)+1,t},{});return Object.entries(s).map(([t,a])=>({date:t,count:a})).sort((t,a)=>new Date(t.date.split("/").reverse().join("-"))-new Date(a.date.split("/").reverse().join("-"))).slice(-30)},[x]),de=i.useMemo(()=>{const s=Array(10).fill(0);return x.filter(t=>t.grade!=null).forEach(t=>{const a=t.grade||0,r=Math.min(Math.floor(a/10),9);s[r]++}),s.map((t,a)=>({range:`${a*10}-${(a+1)*10}`,count:t}))},[x]),B=i.useMemo(()=>{const s=x.filter(a=>a.grade!=null).map(a=>a.grade).sort((a,r)=>a-r);if(s.length===0)return{p10:0,p50:0,p90:0,p25:0,p75:0};const t=a=>{const r=Math.ceil(a/100*s.length)-1;return s[Math.max(0,r)]||0};return{p10:t(10),p25:t(25),p50:t(50),p75:t(75),p90:t(90)}},[x]),ie=i.useMemo(()=>{const s={};return x.forEach(t=>{if(!t.submitted_at)return;const a=new Date(t.submitted_at),r=a.getFullYear(),d=Me(a),u=`${r}-W${d}`;s[u]||(s[u]={count:0,grades:[]}),s[u].count++,t.grade!=null&&s[u].grades.push(t.grade)}),Object.entries(s).map(([t,a])=>({week:t,count:a.count,avgGrade:a.grades.length>0?(a.grades.reduce((r,d)=>r+d,0)/a.grades.length).toFixed(1):0})).sort((t,a)=>t.week.localeCompare(a.week))},[x]),Me=s=>{const t=new Date(s);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const a=new Date(t.getFullYear(),0,1);return Math.ceil(((t-a)/864e5+1)/7)};if(he)return e.jsx(Le,{message:"Carregando analytics..."});const Te=()=>{const s=new Ee;s.setFontSize(18),s.text("Analytics Avançado - Professor",14,20),s.setFontSize(12),s.text(`Período: Últimos ${K} dias`,14,30),s.text("Métricas Gerais:",14,45);const t=[["Métrica","Valor"],["Total de Alunos",l.totalStudents],["Total de Atividades",l.totalActivities],["Total de Submissões",l.totalSubmissions],["Média Geral",l.avgGrade],["Taxa de Conclusão",`${l.completionRate}%`],["On-time",l.onTime],["Atrasadas",l.late]];s.autoTable({startY:50,head:[t[0]],body:t.slice(1)});const a=s.lastAutoTable.finalY+15;s.text("Top 10 Alunos:",14,a);const r=I.slice(0,10).map(d=>[ae.get(d.studentId)?.full_name||"N/A",d.avgGrade,d.submissions,d.xp]);s.autoTable({startY:a+5,head:[["Nome","Média","Submissões","XP"]],body:r}),s.save("analytics_professor.pdf"),oe({title:"Sucesso",description:"Relatório exportado em PDF!"})},ke=()=>{const s=S.json_to_sheet([{Métrica:"Total de Alunos",Valor:l.totalStudents},{Métrica:"Total de Atividades",Valor:l.totalActivities},{Métrica:"Total de Submissões",Valor:l.totalSubmissions},{Métrica:"Média Geral",Valor:l.avgGrade},{Métrica:"Taxa de Conclusão",Valor:`${l.completionRate}%`},{Métrica:"On-time",Valor:l.onTime},{Métrica:"Atrasadas",Valor:l.late}]),t=S.json_to_sheet(I.slice(0,20).map(d=>({Nome:ae.get(d.studentId)?.full_name||"N/A",Média:d.avgGrade,Submissões:d.submissions,XP:d.xp}))),a=S.json_to_sheet(X.map(d=>({Turma:d.name,Alunos:d.students,Atividades:d.activities,Submissões:d.submissions,Média:d.avgGrade}))),r=S.book_new();S.book_append_sheet(r,s,"Métricas Gerais"),S.book_append_sheet(r,t,"Top Alunos"),S.book_append_sheet(r,a,"Comparação Turmas"),Fe(r,"analytics_professor.xlsx"),oe({title:"Sucesso",description:"Relatório exportado em Excel!"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 p-8 rounded-2xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6"})," Analytics Avançado"]}),e.jsx("p",{className:"text-white/90",children:"Métricas detalhadas e comparações"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ce,{onClick:Te,variant:"secondary",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"PDF"})]}),e.jsxs(ce,{onClick:ke,variant:"secondary",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Excel"})]})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Período:"}),[7,15,30,90,180,365].map(s=>e.jsx("button",{onClick:()=>Se(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${K===s?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:s===7?"7 dias":s===15?"15 dias":s===30?"30 dias":s===90?"3 meses":s===180?"6 meses":"1 ano"},s))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Taxa de Conclusão"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.completionRate,"%"]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"On-time / Late"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:l.onTime}),e.jsx("div",{className:"text-muted-foreground",children:"/"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:l.late})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Mediana (p50)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:B.p50})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Percentis"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["p10: ",e.jsx("strong",{children:B.p10})]}),e.jsxs("div",{children:["p25: ",e.jsx("strong",{children:B.p25})]}),e.jsxs("div",{children:["p75: ",e.jsx("strong",{children:B.p75})]}),e.jsxs("div",{children:["p90: ",e.jsx("strong",{children:B.p90})]})]})]})})]}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Comparação Manual: Aluno x Aluno"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Filtrar aluno A por nome...",value:Y,onChange:s=>ye(s.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground max-h-40",value:b,onChange:s=>se(s.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno A —"}),A.filter(s=>!Y||(s.user?.full_name||"").toLowerCase().includes(Y.toLowerCase())).map(s=>e.jsx("option",{value:s.user_id,children:s.user?.full_name||"Aluno"},s.user_id))]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Filtrar aluno B por nome...",value:W,onChange:s=>Ae(s.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:L,onChange:s=>fe(s.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno B —"}),A.filter(s=>!W||(s.user?.full_name||"").toLowerCase().includes(W.toLowerCase())).map(s=>e.jsx("option",{value:s.user_id,children:s.user?.full_name||"Aluno"},s.user_id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Aluno A",b&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:A.find(s=>s.user_id===b)?.user?.full_name||"N/A"})]}),b?renderStudentMetrics(b):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um aluno"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Aluno B",L&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:A.find(s=>s.user_id===L)?.user?.full_name||"N/A"})]}),L?renderStudentMetrics(L):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um aluno"})]})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Comparação Manual: Turma x Turma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:g,onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma A"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:_,onChange:s=>Ne(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma B"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Turma A",g&&C.get(g)?.name&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:C.get(g).name})]}),g?renderClassMetrics(g):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Turma B",_&&C.get(_)?.name&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:C.get(_).name})]}),_?renderClassMetrics(_):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Comparação Manual: Aluno x Turma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Filtrar aluno por nome...",value:q,onChange:s=>Ce(s.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:b,onChange:s=>se(s.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno —"}),A.filter(s=>!q||(s.user?.full_name||"").toLowerCase().includes(q.toLowerCase())).map(s=>e.jsx("option",{value:s.user_id,children:s.user?.full_name||"Aluno"},s.user_id))]})]}),e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:g,onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"",children:"— Selecione Turma —"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Aluno",b&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:A.find(s=>s.user_id===b)?.user?.full_name||"N/A"})]}),b?renderStudentMetrics(b):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um aluno"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border",children:["Turma",g&&C.get(g)?.name&&e.jsx("div",{className:"text-sm font-normal text-muted-foreground mt-1",children:C.get(g).name})]}),g?renderClassMetrics(g):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-2xl font-bold",children:l.totalStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Alunos"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(le,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-2xl font-bold",children:l.totalActivities}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Atividades"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Ke,{className:"w-8 h-8 mx-auto mb-2 text-amber-600"}),e.jsx("div",{className:"text-2xl font-bold",children:l.totalSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Submissões"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Be,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold",children:l.gradedSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avaliadas"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-rose-600"}),e.jsx("div",{className:"text-2xl font-bold",children:l.avgGrade}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nota Média"})]})})]}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Top 10 Alunos - Desempenho"}),I.length===0?e.jsx(T,{icon:H,title:"Sem dados",description:"Aguardando submissões avaliadas."}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(J,{data:I,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"avgGrade",fill:"#3b82f6",name:"Nota Média"})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Turmas"}),X.length===0?e.jsx(T,{icon:H,title:"Sem turmas"}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(J,{data:X,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name"}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"avgGrade",fill:"#10b981",name:"Nota Média"}),e.jsx($,{dataKey:"submissions",fill:"#f59e0b",name:"Submissões"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Atividades por Tipo"}),U.length===0?e.jsx(T,{icon:le,title:"Sem atividades"}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(Re,{children:[e.jsx(Ie,{data:U,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:U.map((s,t)=>e.jsx(Oe,{fill:xe[t%xe.length]},`cell-${t}`))}),e.jsx(D,{}),e.jsx(P,{})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Submissões (últimos 30 dias)"}),re.length===0?e.jsx(T,{icon:Q,title:"Sem dados"}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(ue,{data:re,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx(Z,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",name:"Submissões",strokeWidth:2})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Distribuição de Notas"}),de.every(s=>s.count===0)?e.jsx(T,{icon:ne,title:"Sem notas",description:"Aguardando avaliações."}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(J,{data:de,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"range"}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"count",fill:"#8b5cf6",name:"Quantidade"})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Tendências Semanais"}),ie.length===0?e.jsx(T,{icon:Q,title:"Sem dados"}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(ue,{data:ie,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"week",angle:-45,textAnchor:"end",height:80}),e.jsx(G,{yAxisId:"left"}),e.jsx(G,{yAxisId:"right",orientation:"right"}),e.jsx(D,{}),e.jsx(P,{}),e.jsx(Z,{yAxisId:"left",type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Submissões",strokeWidth:2}),e.jsx(Z,{yAxisId:"right",type:"monotone",dataKey:"avgGrade",stroke:"#10b981",name:"Nota Média",strokeWidth:2})]})})]})})]})]})};export{ds as default};
