import{g as k,r as a,s as h,z as o,j as e,m as C,p as f,N as g,O as p}from"./main-Bq8SWujy.js";import{P as E}from"./PremiumButton-BPiMyuHl.js";import{P as A}from"./PremiumCard-DFrgcJpK.js";import{L as m}from"./lock-Bx4jIPiI.js";import{C as I}from"./circle-check-big-DAyOF5QJ.js";const B=()=>{const i=k(),[t,v]=a.useState(""),[r,j]=a.useState(""),[l,N]=a.useState(!1),[c,b]=a.useState(!1),[u,x]=a.useState(!1),[w,y]=a.useState(!1);a.useEffect(()=>{h.auth.getSession().then(({data:{session:s}})=>{y(!!s),s||(o.error("Link inválido ou expirado"),i("/login"))})},[i]);const S=()=>t.length<6?(o.error("A senha deve ter pelo menos 6 caracteres"),!1):t!==r?(o.error("As senhas não coincidem"),!1):!0,P=async s=>{if(s.preventDefault(),!!S())try{x(!0);const{error:n}=await h.auth.updateUser({password:t});if(n)throw n;o.success("Senha redefinida com sucesso!"),setTimeout(()=>i("/login"),2e3)}catch(n){console.error("Erro:",n),o.error("Erro ao redefinir senha")}finally{x(!1)}},d=t.length===0?{level:0,text:"",color:""}:t.length<6?{level:1,text:"Fraca",color:"bg-red-500"}:t.length<10?{level:2,text:"Média",color:"bg-yellow-500"}:{level:3,text:"Forte",color:"bg-green-500"};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-background p-4",children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:e.jsxs(A,{variant:"elevated",className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(m,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Nova Senha"}),e.jsx("p",{className:"text-muted-foreground",children:"Digite sua nova senha"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{type:l?"text":"password",value:t,onChange:s=>v(s.target.value),leftIcon:m,placeholder:"Digite sua nova senha",required:!0}),e.jsx("button",{type:"button",onClick:()=>N(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?e.jsx(g,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]}),t&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex gap-1 mb-1",children:[1,2,3].map(s=>e.jsx("div",{className:`h-1 flex-1 rounded-full ${s<=d.level?d.color:"bg-gray-200 dark:bg-gray-700"}`},s))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Força da senha: ",e.jsx("span",{className:"font-medium",children:d.text})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirmar Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{type:c?"text":"password",value:r,onChange:s=>j(s.target.value),leftIcon:m,placeholder:"Confirme sua nova senha",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?e.jsx(g,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]}),r&&t!==r&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"As senhas não coincidem"}),r&&t===r&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(I,{className:"w-3 h-3 text-green-600"}),e.jsx("p",{className:"text-xs text-green-600",children:"Senhas coincidem"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{type:"submit",variant:"gradient",className:"w-full",disabled:u||!w,children:u?"Redefinindo...":"Redefinir Senha"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Após redefinir, você será redirecionado para o login"})]})]})]})})})};export{B as default};
