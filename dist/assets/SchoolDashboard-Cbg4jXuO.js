import{u as B,g as E,r as o,z as I,j as e,o as U,m as s,U as h,B as g,a4 as T,T as S,aY as G,Z as L,k as A}from"./main-C_d-NeC0.js";import{s as d}from"./schoolService-pTUm8GfZ.js";import{P as l}from"./PremiumCard-BmbTLnXK.js";import{P as p}from"./PremiumButton-BXe4rVF6.js";import{E as P}from"./EmptyState-CnYYu1LP.js";import{B as F}from"./badge-DbvBbrWQ.js";import{B as M}from"./building-2-CB5iAQ5n.js";import{G as O}from"./graduation-cap-BpCfpzCz.js";import{T as V}from"./trending-down-CyJG0OJz.js";import{T as Z}from"./target-DJiyD3Kr.js";import{T as _}from"./triangle-alert-OXKAA0WJ.js";import{U as k}from"./user-plus-kEUDH9O5.js";import{D as H}from"./dollar-sign-BPYSVNwM.js";const oe=()=>{const{user:c}=B(),n=E(),[D,u]=o.useState(!0),[i,v]=o.useState({totalTeachers:0,totalStudents:0,totalClasses:0,totalActivities:0,activeTeachers:0,averageClassSize:0,engagementRate:0,growthRate:0}),[f,j]=o.useState([]),[b,N]=o.useState([]),[y,w]=o.useState([]);o.useEffect(()=>{c&&R()},[c]);const R=async()=>{try{u(!0);const t=(await d.getUserSchool(c.id))?.id||null;if(!t){v(x=>({...x,totalTeachers:0,totalStudents:0,totalClasses:0,totalActivities:0})),j([]),N([]),w([]);return}const r=await d.getDashboardStats(t),m=await d.getTeachers(t),C=await d.getClasses(t),$=(C||[]).sort((x,z)=>(z.studentCount||0)-(x.studentCount||0)).slice(0,5);v({totalTeachers:m?.length||0,totalStudents:r?.totalStudents||0,totalClasses:r?.totalClasses||C?.length||0,totalActivities:r?.submissionsLast30Days||0,activeTeachers:m?.length||0,averageClassSize:r?.totalClasses>0?Math.round((r.totalStudents||0)/r.totalClasses):0,engagementRate:87,growthRate:12}),j(m?.slice(0,5)||[]),N($),w([{id:1,type:"warning",message:"3 professores sem turmas ativas",action:"/school/teachers"},{id:2,type:"info",message:"5 novos alunos aguardando aprovação",action:"/school/students"}])}catch(a){console.error("Erro ao carregar dashboard:",a),I.error("Erro ao carregar dados")}finally{u(!1)}};return D?e.jsx(U,{message:"Carregando painel administrativo..."}):e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-700 via-gray-800 to-slate-900 p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs(s.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 mb-4",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Painel Administrativo"})]}),e.jsxs("h1",{className:"text-4xl font-bold mb-2",children:["Olá, ",c?.user_metadata?.name?.split(" ")[0]||"Administrador","! 🏫"]}),e.jsx("p",{className:"text-white/90 text-lg",children:"Gerencie toda a operação educacional da sua escola"})]}),e.jsx(s.div,{animate:{y:[0,-10,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0},className:"absolute top-20 right-32 w-20 h-20 bg-white/10 backdrop-blur-sm rounded-2xl"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Professores",value:i.totalTeachers,icon:h,gradient:"from-blue-600 to-indigo-700",change:"+3 este mês",positive:!0},{title:"Alunos",value:i.totalStudents,icon:O,gradient:"from-green-600 to-teal-700",change:"+15 este mês",positive:!0},{title:"Turmas",value:i.totalClasses,icon:g,gradient:"from-purple-600 to-indigo-700",change:"+2 este mês",positive:!0},{title:"Atividades",value:i.totalActivities,icon:T,gradient:"from-orange-600 to-red-700",change:"+12 esta semana",positive:!0}].map((a,t)=>e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},children:e.jsxs(l,{variant:"elevated",className:"relative overflow-hidden group hover:scale-105 transition-transform",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.gradient} text-white`,children:e.jsx(a.icon,{className:"w-6 h-6"})}),a.change&&e.jsxs("div",{className:`flex items-center gap-1 text-xs ${a.positive?"text-green-600":"text-red-600"}`,children:[a.positive?e.jsx(S,{className:"w-3 h-3"}):e.jsx(V,{className:"w-3 h-3"}),e.jsx("span",{children:a.change})]})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:a.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.title})]})]})},a.title))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{title:"Média/Turma",value:i.averageClassSize,icon:Z,color:"text-blue-600"},{title:"Taxa de Engajamento",value:`${i.engagementRate}%`,icon:G,color:"text-green-600"},{title:"Crescimento",value:`+${i.growthRate}%`,icon:S,color:"text-purple-600"},{title:"Profs Ativos",value:i.activeTeachers,icon:L,color:"text-orange-600"}].map((a,t)=>e.jsx(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+t*.1},children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:`w-8 h-8 ${a.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.value}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.title})]})]})})},a.title))}),y.length>0&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(l,{variant:"elevated",className:"p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-orange-600"}),"Alertas e Notificações"]}),e.jsx("div",{className:"space-y-2",children:y.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>n(a.action),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.type==="warning"?"bg-orange-600":"bg-blue-600"}`}),e.jsx("span",{className:"text-sm",children:a.message})]}),e.jsx(p,{size:"sm",variant:"ghost",className:"whitespace-nowrap inline-flex items-center gap-2 rounded-lg",children:"Ver"})]},a.id))})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:e.jsxs(l,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Professores Recentes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Últimos cadastros"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-700 text-white",children:e.jsx(h,{className:"w-5 h-5"})})]}),f.length===0?e.jsx(P,{icon:h,title:"Nenhum professor cadastrado",description:"Adicione professores para começar"}):e.jsx("div",{className:"space-y-3",children:f.map((a,t)=>e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.1},onClick:()=>n(`/school/teachers/${a.id}`),className:"group flex items-center gap-3 p-3 border-2 border-border rounded-xl hover:border-primary/50 hover:bg-gradient-to-r hover:from-muted/50 hover:to-transparent transition-all cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center text-white font-bold",children:a.name?.charAt(0)||"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.email})]}),e.jsx(F,{variant:"outline",className:"text-xs",children:new Date(a.created_at).toLocaleDateString("pt-BR")})]},a.id))}),e.jsx(p,{variant:"outline",className:"w-full mt-4 whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 text-foreground border-border rounded-lg",leftIcon:k,onClick:()=>n("/school/teachers"),children:"Gerenciar Professores"})]})}),e.jsx(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},children:e.jsxs(l,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Turmas Principais"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Por número de alunos"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-600 to-indigo-700 text-white",children:e.jsx(g,{className:"w-5 h-5"})})]}),b.length===0?e.jsx(P,{icon:g,title:"Nenhuma turma criada",description:"Professores podem criar turmas"}):e.jsx("div",{className:"space-y-3",children:b.map((a,t)=>e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"flex items-center gap-3 p-3 border-2 border-border rounded-xl hover:border-primary/50 transition-all",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${a.color||"from-purple-600 to-indigo-700"} flex items-center justify-center text-white font-bold`,children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.subject})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:a.studentCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"alunos"})]})]},a.id))}),e.jsx(p,{variant:"outline",className:"w-full mt-4 whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 text-foreground border-border rounded-lg",leftIcon:A,onClick:()=>n("/school/classes"),children:"Ver Todas as Turmas"})]})})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:[{icon:k,label:"Novo Professor",path:"/school/teachers/new",gradient:"from-blue-600 to-indigo-700"},{icon:A,label:"Analytics",path:"/school/analytics-advanced",gradient:"from-orange-600 to-red-700"},{icon:T,label:"Relatórios",path:"/school/reports",gradient:"from-green-600 to-teal-700"},{icon:H,label:"Financeiro",path:"/school/billing",gradient:"from-amber-600 to-orange-700"}].map((a,t)=>e.jsx(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.9+t*.1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(a.path),className:"cursor-pointer",children:e.jsxs(l,{variant:"elevated",className:"p-6 text-center hover:shadow-xl transition-all",children:[e.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-xl bg-gradient-to-br ${a.gradient} flex items-center justify-center text-white`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsx("h3",{className:"font-bold text-lg",children:a.label})]})},a.label))})})]})};export{oe as default};
