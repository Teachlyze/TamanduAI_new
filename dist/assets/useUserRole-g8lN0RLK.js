import{u as n,r as s,s as c}from"./main-BTTCSkdE.js";function d(){const{user:e}=n(),[u,r]=s.useState("teacher"),[i,a]=s.useState(!1);return s.useEffect(()=>{let t=!0;return(async()=>{if(e?.id){a(!0);try{if(e.user_metadata?.role){t&&(r(e.user_metadata.role==="student"?"student":"teacher"),a(!1));return}const{data:o,error:l}=await c.from("profiles").select("role").eq("id",e.id).maybeSingle();if(!t)return;!l&&o?.role?r(o.role==="student"?"student":"teacher"):r("teacher")}catch{t&&r("teacher")}finally{t&&a(!1)}}})(),()=>{t=!1}},[e?.id,e?.user_metadata?.role]),{role:u,isTeacher:u==="teacher",loading:i}}export{d as u};
