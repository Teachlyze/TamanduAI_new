import{r as s,v as g,g as p,j as e,m as x,D as h,n as j,s as v,z as u}from"./main-NgjJy_CG.js";import{P as N}from"./PremiumCard-BGO_It48.js";import{P as f}from"./PremiumButton-DDGOGflQ.js";import{C as b}from"./circle-check-big-dDW7KbJv.js";const S=()=>{const[y,c]=s.useState(!0),[r,t]=s.useState("verifying"),[l,i]=s.useState(""),[m]=g(),n=p(),o=m.get("token"),d=m.get("type");return s.useEffect(()=>{(async()=>{if(!o||d!=="email"){t("error"),i("Link de confirmação inválido ou expirado."),c(!1);return}try{const{error:a}=await v.auth.verifyOtp({token_hash:o,type:"email"});if(a)throw a;t("success"),i("E-mail confirmado com sucesso!"),u.success("E-mail verificado!"),setTimeout(()=>{n("/login")},3e3)}catch(a){console.error("Erro ao confirmar email:",a),t("error"),i(a.message||"Ocorreu um erro ao confirmar seu e-mail."),u.error("Erro na verificação")}finally{c(!1)}})()},[o,d,n]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4",children:e.jsx(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"w-full max-w-md",children:e.jsxs(N,{variant:"elevated",className:"p-8",children:[r==="verifying"&&e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-16 h-16 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Verificando Email"}),e.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto confirmamos seu email..."})]}),r==="success"&&e.jsxs(x.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring"},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-green-600",children:"Email Confirmado!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Redirecionando para login..."})]}),r==="error"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-10 h-10 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-red-600",children:"Erro na Confirmação"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:l}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>window.location.reload(),className:"flex-1 whitespace-nowrap inline-flex items-center gap-2 min-w-fit px-4 py-2",children:"Tentar Novamente"}),e.jsx(f,{onClick:()=>n("/login"),className:"flex-1 whitespace-nowrap inline-flex items-center gap-2 min-w-fit px-4 py-2",children:"Ir para Login"})]})]})]})})})};export{S as default};
