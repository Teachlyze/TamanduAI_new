import{r as h,j as e,Q as k,v as W,g as P}from"./main-BTTCSkdE.js";import{P as S,B as f}from"./PageHeader-D09hOf5Z.js";import{c as g,a as R,b as T,g as E,s as B,u as L,B as l,P as G,T as m,C as M}from"./Box-DE-Z0IfE.js";import{s as $,u as N}from"./useThemeProps-CtoDOlHd.js";import"./assertThisInitialized-b-KHx1rs.js";import"./extends-CF3RwP-h.js";import"./inheritsLoose-CMRHYPv0.js";import"./index-D_P3mdcN.js";const z=T(),I=$("div",{name:"MuiContainer",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:a}=s;return[r.root,r[`maxWidth${g(String(a.maxWidth))}`],a.fixed&&r.fixed,a.disableGutters&&r.disableGutters]}}),O=s=>N({props:s,name:"MuiContainer",defaultTheme:z}),A=(s,r)=>{const a=n=>E(r,n),{classes:d,fixed:u,disableGutters:x,maxWidth:t}=s,o={root:["root",t&&`maxWidth${g(String(t))}`,u&&"fixed",x&&"disableGutters"]};return R(o,a,d)};function D(s={}){const{createStyledComponent:r=I,useThemeProps:a=O,componentName:d="MuiContainer"}=s,u=r(({theme:t,ownerState:o})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!o.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}}),({theme:t,ownerState:o})=>o.fixed&&Object.keys(t.breakpoints.values).reduce((n,p)=>{const i=p,c=t.breakpoints.values[i];return c!==0&&(n[t.breakpoints.up(i)]={maxWidth:`${c}${t.breakpoints.unit}`}),n},{}),({theme:t,ownerState:o})=>({...o.maxWidth==="xs"&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},...o.maxWidth&&o.maxWidth!=="xs"&&{[t.breakpoints.up(o.maxWidth)]:{maxWidth:`${t.breakpoints.values[o.maxWidth]}${t.breakpoints.unit}`}}}));return h.forwardRef(function(o,n){const p=a(o),{className:i,component:c="div",disableGutters:v=!1,fixed:j=!1,maxWidth:C="lg",classes:F,...y}=p,b={...p,component:c,disableGutters:v,fixed:j,maxWidth:C},w=A(b,d);return e.jsx(u,{as:c,ownerState:b,className:k(w.root,i),ref:n,...y})})}const U=D({createStyledComponent:B("div",{name:"MuiContainer",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:a}=s;return[r.root,r[`maxWidth${g(String(a.maxWidth))}`],a.fixed&&r.fixed,a.disableGutters&&r.disableGutters]}}),useThemeProps:s=>L({props:s,name:"MuiContainer"})}),Z=()=>{const[s,r]=h.useState("verifying"),[a,d]=h.useState(""),[u]=W(),x=P(),t=u.get("token"),o=u.get("email");h.useEffect(()=>{(async()=>{if(!t||!o){r("error"),d("Link de confirmação inválido ou expirado.");return}try{const i=await fetch("/api/auth/confirm-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,email:o})}),c=await i.json();if(!i.ok)throw new Error(c.message||"Falha ao confirmar o e-mail");r("success")}catch(i){console.error("Error confirming email:",i),r("error"),d(i.message||"Ocorreu um erro ao confirmar seu e-mail.")}})()},[t,o]);const n=()=>{switch(s){case"verifying":return e.jsxs(l,{sx:{textAlign:"center",py:4},children:[e.jsx(M,{size:60,thickness:4,sx:{mb:3}}),e.jsx(m,{variant:"h6",gutterBottom:!0,children:"Verificando seu e-mail..."}),e.jsx(m,{color:"textSecondary",children:"Por favor, aguarde enquanto confirmamos seu endereço de e-mail."})]});case"success":return e.jsxs(l,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:"success.light",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#fff"})})}),e.jsx(m,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"E-mail confirmado com sucesso!"}),e.jsx(m,{variant:"body1",color:"textSecondary",paragraph:!0,children:"Seu endereço de e-mail foi confirmado com sucesso."}),e.jsx(f,{variant:"contained",color:"primary",onClick:()=>x("/login"),sx:{mt:3,px:4,py:1.5},children:"Ir para o Login"})]});case"error":return e.jsxs(l,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:"error.light",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",fill:"#fff"})})}),e.jsx(m,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Falha na confirmação"}),e.jsx(m,{color:"error",paragraph:!0,children:a}),e.jsxs(l,{sx:{mt:3,display:"flex",gap:2,justifyContent:"center"},children:[e.jsx(f,{variant:"outlined",color:"primary",onClick:()=>window.location.reload(),children:"Tentar Novamente"}),e.jsx(f,{variant:"contained",color:"primary",onClick:()=>x("/"),children:"Página Inicial"})]})]});default:return null}};return e.jsxs(l,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"background.default"},children:[e.jsx(S,{}),e.jsx(U,{component:"main",maxWidth:"sm",sx:{mt:8,mb:4},children:e.jsx(G,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:n()})})]})};export{Z as default};
