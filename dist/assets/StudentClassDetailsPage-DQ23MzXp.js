import{al as k,g as C,r as a,j as e,o as P,B as d,M as f,b as q,s as c}from"./main-BTTCSkdE.js";import{P as j}from"./PremiumCard-CV5gJlVo.js";import{P as A}from"./PremiumButton-TaG2j_oH.js";import{E as n}from"./EmptyState-j91SMhTI.js";import{C as B}from"./ChatbotWidget-UvchCZuU.js";import"./bot-DphvdJDH.js";import"./send-vuN82Ny2.js";const K=()=>{const{classId:t}=k(),v=C(),[b,o]=a.useState(!0),[i,N]=a.useState(null),[l,y]=a.useState([]),[m,S]=a.useState([]),[u,x]=a.useState("");return a.useEffect(()=>{(async()=>{o(!0),x("");try{const{data:r,error:p}=await c.from("classes").select("*").eq("id",t).maybeSingle();if(p)throw p;N(r);const{data:w,error:h}=await c.from("activity_class_assignments").select("activity:activities(id, title, description, type, due_date, is_published)").eq("class_id",t).order("assigned_at",{ascending:!1});if(h)throw h;y((w||[]).map(E=>E.activity).filter(Boolean));const{data:_,error:g}=await c.from("discussions").select("id, title, description, created_at, activity_id").eq("class_id",t).order("created_at",{ascending:!1});if(g)throw g;S(_||[])}catch(r){console.error("Erro ao carregar turma:",r),x("Não foi possível carregar a turma.")}finally{o(!1)}})()},[t]),b?e.jsx(P,{message:"Carregando turma..."}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-8 rounded-2xl text-white",children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.name}),e.jsx("p",{className:"text-white/90",children:i.subject||"Sem disciplina"})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:u}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(j,{variant:"elevated",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5"})," Atividades"]})}),l.length===0?e.jsx(n,{icon:d,title:"Nenhuma atividade",description:"O professor ainda não publicou atividades."}):e.jsx("div",{className:"space-y-3",children:l.map(s=>e.jsx("div",{className:"p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"Sem descrição"})]}),e.jsx(A,{variant:"gradient",size:"sm",onClick:()=>v(`/students/activities/${s.id}`),children:"Abrir"})]})},s.id))})]})})}),e.jsx("div",{className:"space-y-6",children:e.jsx(j,{variant:"elevated",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 mb-4",children:[e.jsx(f,{className:"w-5 h-5"})," Discussões"]}),m.length===0?e.jsx(n,{icon:f,title:"Sem discussões",description:"Nenhuma discussão criada ainda."}):e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs(q,{to:`/students/classes/${t}/discussions/${s.id}`,className:"block p-3 rounded-lg border border-border hover:bg-muted/50",children:[e.jsx("div",{className:"font-medium",children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]},s.id))})]})})})]}),e.jsx(B,{context:{classId:t}})]}):e.jsx(n,{title:"Turma não encontrada",description:"Verifique o link e tente novamente.",icon:d})};export{K as default};
