import{r as g,a6 as J,u as V,j as d,L as H}from"./main-Bujpyeg-.js";import{s as te,d as re}from"./apiSupabase-DRMOhguV.js";import{a as ae,_ as R}from"./assertThisInitialized-b-KHx1rs.js";import{_ as ne}from"./inheritsLoose-CMRHYPv0.js";var se=Object.defineProperty,ie=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,D=(e,r,a)=>r in e?se(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,E=(e,r)=>{for(var a in r||(r={}))W.call(r,a)&&D(e,a,r[a]);if(k)for(var a of k(r))z.call(r,a)&&D(e,a,r[a]);return e},K=(e,r)=>ie(e,oe(r)),ce=(e,r)=>{var a={};for(var n in e)W.call(e,n)&&r.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&k)for(var n of k(e))r.indexOf(n)<0&&z.call(e,n)&&(a[n]=e[n]);return a},m=(e,r,a)=>(D(e,typeof r!="symbol"?r+"":r,a),a),S=(e,r,a)=>new Promise((n,t)=>{var s=l=>{try{o(a.next(l))}catch(c){t(c)}},i=l=>{try{o(a.throw(l))}catch(c){t(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,i);o((a=a.apply(e,r)).next())}),le="hCaptcha-script",P="hCaptchaOnLoad",q="script-error",O="@hCaptcha/loader";function de(e){return Object.entries(e).filter(([,r])=>r||r===!1).map(([r,a])=>`${encodeURIComponent(r)}=${encodeURIComponent(String(a))}`).join("&")}function G(e){let r=e&&e.ownerDocument||document,a=r.defaultView||r.parentWindow||window;return{document:r,window:a}}function X(e){return e||document.head}function he(e){var r;e.setTag("source",O),e.setTag("url",document.URL),e.setContext("os",{UA:navigator.userAgent}),e.setContext("browser",E({},ue())),e.setContext("device",K(E({},pe()),{screen_width_pixels:screen.width,screen_height_pixels:screen.height,language:navigator.language,orientation:((r=screen.orientation)==null?void 0:r.type)||"Unknown",processor_count:navigator.hardwareConcurrency,platform:navigator.platform}))}function ue(){var e,r,a,n,t,s;let i=navigator.userAgent,o,l;return i.indexOf("Firefox")!==-1?(o="Firefox",l=(e=i.match(/Firefox\/([\d.]+)/))==null?void 0:e[1]):i.indexOf("Edg")!==-1?(o="Microsoft Edge",l=(r=i.match(/Edg\/([\d.]+)/))==null?void 0:r[1]):i.indexOf("Chrome")!==-1&&i.indexOf("Safari")!==-1?(o="Chrome",l=(a=i.match(/Chrome\/([\d.]+)/))==null?void 0:a[1]):i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1?(o="Safari",l=(n=i.match(/Version\/([\d.]+)/))==null?void 0:n[1]):i.indexOf("Opera")!==-1||i.indexOf("OPR")!==-1?(o="Opera",l=(t=i.match(/(Opera|OPR)\/([\d.]+)/))==null?void 0:t[2]):i.indexOf("MSIE")!==-1||i.indexOf("Trident")!==-1?(o="Internet Explorer",l=(s=i.match(/(MSIE |rv:)([\d.]+)/))==null?void 0:s[2]):(o="Unknown",l="Unknown"),{name:o,version:l}}function pe(){let e=navigator.userAgent,r;e.indexOf("Win")!==-1?r="Windows":e.indexOf("Mac")!==-1?r="Mac":e.indexOf("Linux")!==-1?r="Linux":e.indexOf("Android")!==-1?r="Android":e.indexOf("like Mac")!==-1||e.indexOf("iPhone")!==-1||e.indexOf("iPad")!==-1?r="iOS":r="Unknown";let a;return/Mobile|iPhone|iPod|Android/i.test(e)?a="Mobile":/Tablet|iPad/i.test(e)?a="Tablet":a="Desktop",{model:r,family:r,device:a}}var fe=class Q{constructor(r){m(this,"_parent"),m(this,"breadcrumbs",[]),m(this,"context",{}),m(this,"extra",{}),m(this,"tags",{}),m(this,"request"),m(this,"user"),this._parent=r}get parent(){return this._parent}child(){return new Q(this)}setRequest(r){return this.request=r,this}removeRequest(){return this.request=void 0,this}addBreadcrumb(r){return typeof r.timestamp>"u"&&(r.timestamp=new Date().toISOString()),this.breadcrumbs.push(r),this}setExtra(r,a){return this.extra[r]=a,this}removeExtra(r){return delete this.extra[r],this}setContext(r,a){return typeof a.type>"u"&&(a.type=r),this.context[r]=a,this}removeContext(r){return delete this.context[r],this}setTags(r){return this.tags=E(E({},this.tags),r),this}setTag(r,a){return this.tags[r]=a,this}removeTag(r){return delete this.tags[r],this}setUser(r){return this.user=r,this}removeUser(){return this.user=void 0,this}toBody(){let r=[],a=this;for(;a;)r.push(a),a=a.parent;return r.reverse().reduce((n,t)=>{var s;return n.breadcrumbs=[...(s=n.breadcrumbs)!=null?s:[],...t.breadcrumbs],n.extra=E(E({},n.extra),t.extra),n.contexts=E(E({},n.contexts),t.context),n.tags=E(E({},n.tags),t.tags),t.user&&(n.user=t.user),t.request&&(n.request=t.request),n},{breadcrumbs:[],extra:{},contexts:{},tags:{},request:void 0,user:void 0})}clear(){this.breadcrumbs=[],this.context={},this.tags={},this.user=void 0}},me=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ve=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,xe=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ge=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,N="?",M="An unknown error occurred",ye="0.0.4";function be(e){for(let r=0;r<e.length;r++)e[r]=Math.floor(Math.random()*256);return e}function x(e){return(e+256).toString(16).substring(1)}function we(){let e=be(new Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,x(e[0])+x(e[1])+x(e[2])+x(e[3])+"-"+x(e[4])+x(e[5])+"-"+x(e[6])+x(e[7])+"-"+x(e[8])+x(e[9])+"-"+x(e[10])+x(e[11])+x(e[12])+x(e[13])+x(e[14])+x(e[15])}var Ee=[[me,"chrome"],[xe,"winjs"],[ve,"gecko"]];function Ce(e){var r,a,n,t;if(!e.stack)return null;let s=[],i=(n=(a=(r=e.stack).split)==null?void 0:a.call(r,`
`))!=null?n:[];for(let o=0;o<i.length;++o){let l=null,c=null,h=null;for(let[f,y]of Ee)if(c=f.exec(i[o]),c){h=y;break}if(!(!c||!h)){if(h==="chrome")l={filename:(t=c[2])!=null&&t.startsWith("address at ")?c[2].substring(11):c[2],function:c[1]||N,lineno:c[3]?+c[3]:null,colno:c[4]?+c[4]:null};else if(h==="winjs")l={filename:c[2],function:c[1]||N,lineno:+c[3],colno:c[4]?+c[4]:null};else if(h==="gecko")o===0&&!c[5]&&e.columnNumber!==void 0&&s.length>0&&(s[0].column=e.columnNumber+1),l={filename:c[3],function:c[1]||N,lineno:c[4]?+c[4]:null,colno:c[5]?+c[5]:null};else continue;!l.function&&l.lineno&&(l.function=N),s.push(l)}}return s.length?s.reverse():null}function Re(e){let r=Ce(e);return{type:e.name,value:e.message,stacktrace:{frames:r??[]}}}function je(e){let r=ge.exec(e),a=r?r.slice(1):[];if(a.length!==6)throw new Error("Invalid DSN");let n=a[5].split("/"),t=n.slice(0,-1).join("/");return a[0]+"://"+a[3]+(a[4]?":"+a[4]:"")+(t?"/"+t:"")+"/api/"+n.pop()+"/envelope/?sentry_version=7&sentry_key="+a[1]+(a[2]?"&sentry_secret="+a[2]:"")}function _e(e,r,a){var n,t;let s=E({event_id:we().replaceAll("-",""),platform:"javascript",sdk:{name:"@hcaptcha/sentry",version:ye},environment:r,release:a,timestamp:Date.now()/1e3},e.scope.toBody());if(e.type==="exception"){s.message=(t=(n=e.error)==null?void 0:n.message)!=null?t:"Unknown error",s.fingerprint=[s.message];let i=[],o=e.error;for(let l=0;l<5&&o&&(i.push(Re(o)),!(!o.cause||!(o.cause instanceof Error)));l++)o=o.cause;s.exception={values:i.reverse()}}return e.type==="message"&&(s.message=e.message,s.level=e.level),s}function Oe(e){if(e instanceof Error)return e;if(typeof e=="string")return new Error(e);if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let a=e,{message:n}=a,t=ce(a,["message"]),s=new Error(typeof n=="string"?n:M);return Object.assign(s,t)}let r=new Error(M);return Object.assign(r,{cause:e})}function Se(e,r,a){return S(this,null,function*(){var n,t;try{if(typeof fetch<"u"&&typeof AbortSignal<"u"){let s;if(a){let l=new AbortController;s=l.signal,setTimeout(()=>l.abort(),a)}let i=yield fetch(e,K(E({},r),{signal:s})),o=yield i.text();return{status:i.status,body:o}}return yield new Promise((s,i)=>{var o,l;let c=new XMLHttpRequest;if(c.open((o=r?.method)!=null?o:"GET",e),c.onload=()=>s({status:c.status,body:c.responseText}),c.onerror=()=>i(new Error("XHR Network Error")),r?.headers)for(let[h,f]of Object.entries(r.headers))c.setRequestHeader(h,f);if(a){let h=setTimeout(()=>{c.abort(),i(new Error("Request timed out"))},a);c.onloadend=()=>{clearTimeout(h)}}c.send((l=r?.body)==null?void 0:l.toString())})}catch(s){return{status:0,body:(t=(n=s?.toString)==null?void 0:n.call(s))!=null?t:"Unknown error"}}})}var w,U=(w=class{constructor(e){m(this,"apiURL"),m(this,"dsn"),m(this,"environment"),m(this,"release"),m(this,"sampleRate"),m(this,"debug"),m(this,"_scope"),m(this,"shouldBuffer",!1),m(this,"bufferlimit",20),m(this,"buffer",[]);var r,a,n,t,s;this.environment=e.environment,this.release=e.release,this.sampleRate=(r=e.sampleRate)!=null?r:1,this.debug=(a=e.debug)!=null?a:!1,this._scope=(n=e.scope)!=null?n:new fe,this.apiURL=je(e.dsn),this.dsn=e.dsn,this.shouldBuffer=(t=e.buffer)!=null?t:!1,this.bufferlimit=(s=e.bufferLimit)!=null?s:20}static init(e){w._instance||(w._instance=new w(e))}static get instance(){if(!w._instance)throw new Error("Sentry has not been initialized");return w._instance}log(...e){this.debug&&console.log(...e)}get scope(){return this._scope}static get scope(){return w.instance.scope}withScope(e){let r=this._scope.child();e(r)}static withScope(e){w.instance.withScope(e)}captureException(e,r){this.captureEvent({type:"exception",level:"error",error:Oe(e),scope:r??this._scope})}static captureException(e,r){w.instance.captureException(e,r)}captureMessage(e,r="info",a){this.captureEvent({type:"message",level:r,message:e,scope:a??this._scope})}static captureMessage(e,r="info",a){w.instance.captureMessage(e,r,a)}captureEvent(e){if(Math.random()>=this.sampleRate){this.log("Dropped event due to sample rate");return}if(this.shouldBuffer){if(this.buffer.length>=this.bufferlimit)return;this.buffer.push(e)}else this.sendEvent(e)}sendEvent(e,r=5e3){return S(this,null,function*(){try{this.log("Sending sentry event",e);let a=_e(e,this.environment,this.release),n={event_id:a.event_id,dsn:this.dsn},t={type:"event"},s=JSON.stringify(n)+`
`+JSON.stringify(t)+`
`+JSON.stringify(a),i=yield Se(this.apiURL,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:s},r);this.log("Sentry response",i.status),i.status!==200&&(console.log(i.body),console.error("Failed to send event to Sentry",i))}catch(a){console.error("Failed to send event",a)}})}flush(e=5e3){return S(this,null,function*(){try{this.log("Flushing sentry events",this.buffer.length);let r=this.buffer.splice(0,this.buffer.length).map(a=>this.sendEvent(a,e));yield Promise.all(r),this.log("Flushed all events")}catch(r){console.error("Failed to flush events",r)}})}static flush(e=5e3){return w.instance.flush(e)}static reset(){w._instance=void 0}},m(w,"_instance"),w),Ae="https://d233059272824702afc8c43834c4912d@sentry.hcaptcha.com/6",Ie="2.1.0",Ne="production";function Le(e=!0){if(!e)return $();U.init({dsn:Ae,release:Ie,environment:Ne});let r=U.scope;return he(r),$(r)}function $(e=null){return{addBreadcrumb:r=>{e&&e.addBreadcrumb(r)},captureRequest:r=>{e&&e.setRequest(r)},captureException:r=>{e&&U.captureException(r,e)}}}function Pe({scriptLocation:e,query:r,loadAsync:a=!0,crossOrigin:n="anonymous",apihost:t="https://js.hcaptcha.com",cleanup:s=!1,secureApi:i=!1,scriptSource:o=""}={},l){let c=X(e),h=G(c);return new Promise((f,y)=>{let p=h.document.createElement("script");p.id=le,o?p.src=`${o}?onload=${P}`:i?p.src=`${t}/1/secure-api.js?onload=${P}`:p.src=`${t}/1/api.js?onload=${P}`,p.crossOrigin=n,p.async=a;let C=(j,A)=>{try{!i&&s&&c.removeChild(p),A(j)}catch(u){y(u)}};p.onload=j=>C(j,f),p.onerror=j=>{l&&l(p.src),C(j,y)},p.src+=r!==""?`&${r}`:"",c.appendChild(p)})}var L=[];function ke(e={cleanup:!1},r){try{r.addBreadcrumb({category:O,message:"hCaptcha loader params",data:e});let a=X(e.scriptLocation),n=G(a),t=L.find(({scope:i})=>i===n.window);if(t)return r.addBreadcrumb({category:O,message:"hCaptcha already loaded"}),t.promise;let s=new Promise((i,o)=>S(this,null,function*(){try{n.window[P]=()=>{r.addBreadcrumb({category:O,message:"hCaptcha script called onload function"}),i(n.window.hcaptcha)};let l=de({custom:e.custom,render:e.render,sentry:e.sentry,assethost:e.assethost,imghost:e.imghost,reportapi:e.reportapi,endpoint:e.endpoint,host:e.host,recaptchacompat:e.recaptchacompat,hl:e.hl});yield Pe(E({query:l},e),c=>{r.captureRequest({url:c,method:"GET"})}),r.addBreadcrumb({category:O,message:"hCaptcha loaded",data:t})}catch{r.addBreadcrumb({category:O,message:"hCaptcha failed to load"});let c=L.findIndex(h=>h.scope===n.window);c!==-1&&L.splice(c,1),o(new Error(q))}}));return L.push({promise:s,scope:n.window}),s}catch(a){return r.captureException(a),Promise.reject(new Error(q))}}function Y(e,r,a=0){return S(this,null,function*(){let n=a<2?"Retry loading hCaptcha Api":"Exceeded maximum retries";try{return yield ke(e,r)}catch(t){return r.addBreadcrumb({category:O,message:n}),a>=2?(r.captureException(t),Promise.reject(t)):(a+=1,Y(e,r,a))}})}function Te(){return S(this,arguments,function*(e={}){let r=Le(e.sentry);return yield Y(e,r)})}function B(e){var r=e&&e.ownerDocument||document,a=r.defaultView||r.parentWindow||window;return{document:r,window:a}}function F(e){return e||document.head}var De=["userJourneys"],Ue=function(e){ne(r,e);function r(n){var t;return t=e.call(this,n)||this,t._hcaptcha=void 0,t.renderCaptcha=t.renderCaptcha.bind(R(t)),t.resetCaptcha=t.resetCaptcha.bind(R(t)),t.removeCaptcha=t.removeCaptcha.bind(R(t)),t.isReady=t.isReady.bind(R(t)),t._onReady=null,t.loadCaptcha=t.loadCaptcha.bind(R(t)),t.handleOnLoad=t.handleOnLoad.bind(R(t)),t.handleSubmit=t.handleSubmit.bind(R(t)),t.handleExpire=t.handleExpire.bind(R(t)),t.handleError=t.handleError.bind(R(t)),t.handleOpen=t.handleOpen.bind(R(t)),t.handleClose=t.handleClose.bind(R(t)),t.handleChallengeExpired=t.handleChallengeExpired.bind(R(t)),t.ref=g.createRef(),t.apiScriptRequested=!1,t.sentryHub=null,t.captchaId="",t.state={isApiReady:!1,isRemoved:!1,elementId:n.id},t}var a=r.prototype;return a.componentDidMount=function(){var t=this,s=F(this.props.scriptLocation),i=B(s);this._hcaptcha=i.window.hcaptcha||void 0;var o=typeof this._hcaptcha<"u";if(o){this.setState({isApiReady:!0},function(){t.renderCaptcha()});return}this.loadCaptcha()},a.componentWillUnmount=function(){var t=this._hcaptcha,s=this.captchaId;this.isReady()&&(t.reset(s),t.remove(s))},a.shouldComponentUpdate=function(t,s){return!(this.state.isApiReady!==s.isApiReady||this.state.isRemoved!==s.isRemoved)},a.componentDidUpdate=function(t){var s=this,i=["sitekey","size","theme","tabindex","languageOverride","endpoint"],o=i.every(function(l){return t[l]===s.props[l]});o||this.removeCaptcha(function(){s.renderCaptcha()})},a.loadCaptcha=function(){if(!this.apiScriptRequested){var t=this.props,s=t.apihost,i=t.assethost,o=t.endpoint,l=t.host,c=t.imghost,h=t.languageOverride,f=t.reCaptchaCompat,y=t.reportapi,p=t.sentry,C=t.custom,j=t.loadAsync,A=t.scriptLocation,u=t.scriptSource,v=t.secureApi,b=t.cleanup,_=b===void 0?!0:b,T=t.userJourneys,I={render:"explicit",apihost:s,assethost:i,endpoint:o,hl:h,host:l,imghost:c,recaptchacompat:f===!1?"off":null,reportapi:y,sentry:p,custom:C,loadAsync:j,scriptLocation:A,scriptSource:u,secureApi:v,cleanup:_,userJourneys:T};Te(I).then(this.handleOnLoad,this.handleError).catch(this.handleError),this.apiScriptRequested=!0}},a.renderCaptcha=function(t){var s=this,i=this.props.onReady,o=this.state.isApiReady,l=this.captchaId;if(!(!o||l)){var c=this.props,h=c.userJourneys,f=ae(c,De),y=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},f,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0,uj:h!==void 0?h:!1}),p=this._hcaptcha,C=p.render(this.ref.current,y);this.captchaId=C,this.setState({isRemoved:!1},function(){t&&t(),i&&i(),s._onReady&&s._onReady(C)})}},a.resetCaptcha=function(){var t=this._hcaptcha,s=this.captchaId;this.isReady()&&t.reset(s)},a.removeCaptcha=function(t){var s=this,i=this._hcaptcha,o=this.captchaId;this.isReady()&&this.setState({isRemoved:!0},function(){s.captchaId="",i.remove(o),t&&t()})},a.handleOnLoad=function(){var t=this;this.setState({isApiReady:!0},function(){var s=F(t.props.scriptLocation),i=B(s);t._hcaptcha=i.window.hcaptcha,t.renderCaptcha(function(){var o=t.props.onLoad;o&&o()})})},a.handleSubmit=function(t){var s=this.props.onVerify,i=this.state.isRemoved,o=this._hcaptcha,l=this.captchaId;if(!(typeof o>"u"||i)){var c=o.getResponse(l),h=o.getRespKey(l);s&&s(c,h)}},a.handleExpire=function(){var t=this.props.onExpire,s=this._hcaptcha,i=this.captchaId;this.isReady()&&(s.reset(i),t&&t())},a.handleError=function(t){var s=this.props.onError,i=this._hcaptcha,o=this.captchaId;this.isReady()&&i.reset(o),s&&s(t)},a.isReady=function(){var t=this.state,s=t.isApiReady,i=t.isRemoved;return s&&!i},a.handleOpen=function(){!this.isReady()||!this.props.onOpen||this.props.onOpen()},a.handleClose=function(){!this.isReady()||!this.props.onClose||this.props.onClose()},a.handleChallengeExpired=function(){!this.isReady()||!this.props.onChalExpired||this.props.onChalExpired()},a.execute=function(t){var s=this;t===void 0&&(t=null),t=typeof t=="object"?t:null;try{var i=this._hcaptcha,o=this.captchaId;if(!this.isReady()){var l,c=new Promise(function(h,f){s._onReady=function(y){try{var p=s._hcaptcha;t&&t.async?p.execute(y,t).then(h).catch(f):h(p.execute(y,t))}catch(C){f(C)}}});return(l=t)!=null&&l.async?c:null}return i.execute(o,t)}catch(h){return t&&t.async?Promise.reject(h):null}},a.close=function(){var t=this._hcaptcha,s=this.captchaId;if(this.isReady())return t.close(s)},a.setData=function(t){var s=this._hcaptcha,i=this.captchaId;this.isReady()&&(t&&typeof t!="object"&&(t=null),s.setData(i,t))},a.getResponse=function(){var t=this._hcaptcha;return t.getResponse(this.captchaId)},a.getRespKey=function(){var t=this._hcaptcha;return t.getRespKey(this.captchaId)},a.render=function(){var t=this.state.elementId;return g.createElement("div",{ref:this.ref,id:t})},r}(g.Component);function qe({activity:e}){const r="2bcaa14c-3eb0-45b8-b324-3062e4caee4c",[a,n]=g.useState(""),t=g.useRef(null),{classId:s}=J(),{user:i}=V(),[o,l]=g.useState({}),[c,h]=g.useState(!1),[f,y]=g.useState(""),[p,C]=g.useState("");g.useEffect(()=>{if(e&&e.schema.properties){const u={};Object.keys(e.schema.properties).forEach(v=>{u[v]=""}),l(u)}},[e]),g.useEffect(()=>{a&&console.log("[ActivityForm] hCaptcha token set:",a)},[a]);const j=u=>{const{name:v,value:b}=u.target;l(_=>({..._,[v]:b}))},A=async u=>{if(u.preventDefault(),y(""),C(""),!a){C("Por favor, resolva o captcha para enviar.");return}h(!0);try{await te({activity_id:e.id,answers:o,hcaptchaToken:a}),alert("Atividade enviada com sucesso!"),n(""),t.current&&t.current.resetCaptcha()}catch(v){y("Erro ao enviar a atividade. Tente novamente."),console.error("Erro ao enviar atividade:",v)}finally{h(!1)}};return c?d.jsx(H,{}):f?d.jsx("p",{className:"text-red-500 text-center",children:f}):e?d.jsxs("div",{className:"container mx-auto p-4",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:e.title}),d.jsx("p",{className:"text-gray-600 mb-6",children:e.description||"Sem descrição"}),d.jsxs("form",{onSubmit:A,className:"max-w-2xl mx-auto",children:[Object.entries(e.schema.properties).map(([u,v])=>d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-lg font-medium mb-2",children:v.title}),v.description&&d.jsx("p",{className:"text-gray-600 mb-3",children:v.description}),v.type==="string"?d.jsx("input",{type:"text",name:u,value:o[u]||"",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Digite sua resposta",required:e.schema.required?.includes(u)}):v.type==="paragraph"?d.jsx("textarea",{name:u,value:o[u]||"",onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 h-32",placeholder:"Digite sua resposta",required:e.schema.required?.includes(u)}):v.type==="radio"?d.jsx("div",{className:"space-y-2",children:v.enumNames?.map((b,_)=>d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:u,value:b,checked:o[u]===b,onChange:j,className:"w-4 h-4 text-blue-600",required:e.schema.required?.includes(u)}),d.jsx("span",{children:b})]},_))}):v.type==="checkboxes"?d.jsx("div",{className:"space-y-2",children:v.enumNames?.map((b,_)=>d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",name:u,value:b,checked:o[u]?.includes(b),onChange:T=>{const I=o[u]||[];l(Z=>({...Z,[u]:T.target.checked?[...I,b]:I.filter(ee=>ee!==b)}))},className:"w-4 h-4 text-blue-600"}),d.jsx("span",{children:b})]},_))}):null]},u)),d.jsx("div",{className:"mb-4 flex justify-center",children:d.jsx(Ue,{sitekey:r,onVerify:u=>n(u),onExpire:()=>n(""),ref:t})}),p&&d.jsx("p",{className:"text-red-500 text-center mb-2",children:p}),d.jsx("button",{type:"submit",disabled:c||!a,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Enviando...":"Enviar Atividade"})]})]}):d.jsx("p",{className:"text-center",children:"Atividade não encontrada."})}function Je(){const{activityId:e}=J(),{user:r,loading:a,hasRole:n}=V(),[t,s]=g.useState(null),[i,o]=g.useState(!0),[l,c]=g.useState("");return g.useEffect(()=>{if(a)return;if(!r){c("Você precisa estar autenticado para ver esta atividade."),o(!1);return}if(!e)return;(async()=>{o(!0),c("");try{const f=await re(e);s(f)}catch(f){c("Erro ao carregar atividade. Tente novamente."),console.error("Erro ao carregar atividade:",f)}finally{o(!1)}})()},[e,r,a]),i||a?d.jsx(H,{}):l?d.jsx("p",{className:"text-red-500 text-center",children:l}):t?n("teacher")?d.jsx("div",{className:"container mx-auto p-4",children:d.jsx(qe,{activity:t})}):d.jsx("div",{className:"container mx-auto p-4",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.title}),t.description&&d.jsx("div",{className:"prose max-w-none mb-6",dangerouslySetInnerHTML:{__html:t.description}}),d.jsxs("div",{className:"text-center py-8",children:[d.jsx("p",{className:"text-gray-500",children:"Visualização da atividade para alunos será implementada aqui."}),d.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Em breve você poderá responder esta atividade."})]})]})})}):d.jsx("p",{className:"text-center",children:"Atividade não encontrada."})}export{Je as default};
