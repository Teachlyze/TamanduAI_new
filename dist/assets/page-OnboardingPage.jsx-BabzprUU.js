import{r as n,j as e}from"./react-vendor-C2HUFn5N.js";import{C as x,j as t,I as o,B as f,s as g}from"./lazy-CreateActivityPage.jsx-DYBofU2F.js";import{u as j}from"./vendor-react-router-B4Bn0PSh.js";const _=()=>{const u=j(),[a,r]=n.useState({full_name:"",role:"",age:"",cpf:"",terms_accepted:!1,privacy_accepted:!1}),[i,d]=n.useState(!1),[m,l]=n.useState(""),h=async s=>{if(s.preventDefault(),l(""),!a.full_name||!a.role||!a.terms_accepted||!a.privacy_accepted){l("Preencha nome, papel e aceite os termos e a privacidade.");return}d(!0);try{const c={full_name:a.full_name,role:a.role,terms_accepted:!!a.terms_accepted,privacy_accepted:!!a.privacy_accepted};a.age&&(c.age=Number(a.age)),a.cpf&&(c.cpf=a.cpf);const{error:p}=await g.functions.invoke("user-onboarding",{method:"POST",body:c});if(p)throw p;u("/dashboard",{replace:!0})}catch(c){l(c?.message||"Falha ao concluir onboarding")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs(x,{className:"w-full max-w-xl p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Completar cadastro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Informe seus dados para continuar usando a plataforma."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[m&&e.jsx("div",{className:"p-3 rounded bg-red-50 text-red-700 text-sm",children:m}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"full_name",children:"Nome completo"}),e.jsx(o,{id:"full_name",value:a.full_name,onChange:s=>r({...a,full_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"role",children:"Papel"}),e.jsxs("select",{id:"role",className:"w-full border rounded h-10 px-3",value:a.role,onChange:s=>r({...a,role:s.target.value}),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Selecione"}),e.jsx("option",{value:"teacher",children:"Professor"}),e.jsx("option",{value:"student",children:"Aluno"}),e.jsx("option",{value:"school",children:"Escola"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"age",children:"Idade (opcional)"}),e.jsx(o,{id:"age",type:"number",min:"1",max:"120",value:a.age,onChange:s=>r({...a,age:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"cpf",children:"CPF (opcional)"}),e.jsx(o,{id:"cpf",value:a.cpf,onChange:s=>r({...a,cpf:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:a.terms_accepted,onChange:s=>r({...a,terms_accepted:s.target.checked})}),"Aceito os ",e.jsx("a",{className:"text-primary underline",href:"/terms",target:"_blank",rel:"noreferrer",children:"Termos de Uso"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:a.privacy_accepted,onChange:s=>r({...a,privacy_accepted:s.target.checked})}),"Aceito a ",e.jsx("a",{className:"text-primary underline",href:"/privacy",target:"_blank",rel:"noreferrer",children:"Pol√≠tica de Privacidade"})]})]}),e.jsx("div",{children:e.jsx(f,{type:"submit",disabled:i,className:"w-full",children:i?"Salvando...":"Concluir"})})]})]})})};export{_ as default};
