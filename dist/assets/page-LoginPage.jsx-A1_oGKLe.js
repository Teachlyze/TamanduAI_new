import{r as s,j as e,B as W,v as M,at as re,y as G,ad as le,aQ as ie,ap as ne,aE as oe,W as ce,t as de,ax as D,aG as Q}from"./react-vendor-C2HUFn5N.js";import{l as ue,u as me,j as he,I as J,B as xe}from"./lazy-CreateActivityPage.jsx-DYBofU2F.js";import{H as fe}from"./vendor-hcaptcha-C_YTH-Ky.js";import{u as pe}from"./i18n-vendor-WP9bSEud.js";import{m as h,A as P}from"./motion-vendor-Crtv24Dn.js";import{u as be,L as V}from"./vendor-react-router-B4Bn0PSh.js";const X=s.forwardRef(({onVerify:i,onError:w,onExpire:o,size:S="normal",className:v=""},N)=>{const x=s.useRef(null),[F,p]=s.useState(!1),[f,b]=s.useState(null),c="your-hcaptcha-site-key",g=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";s.useEffect(()=>{N&&(N.current={execute:()=>(console.log("[HCaptcha] Executing captcha"),x.current?.execute()),reset:()=>{console.log("[HCaptcha] Resetting captcha"),x.current?.resetCaptcha(),p(!1),b(null)},getResponse:()=>{const r=x.current?.getResponse();return console.log("[HCaptcha] Current response:",r),r}})},[N]);const A=s.useCallback((r,d)=>{console.log("[HCaptcha] Token received:",r?"***"+r.slice(-4):"undefined"),console.log("[HCaptcha] eKey received:",d),p(!0),b(null),i&&i(r)},[i]),n=s.useCallback(r=>{const d=r?.message||"Unknown hCaptcha error";console.error("[HCaptcha] Error:",d,r),p(!1),b(d),w&&w(r)},[w]),y=s.useCallback(()=>{console.log("[HCaptcha] Token expired"),p(!1),b("A verificação de segurança expirou. Por favor, tente novamente."),o&&o()},[o]);return s.useEffect(()=>{{const r=c.substring(0,8)+"..."+c.substring(c.length-4);console.log(`[HCaptcha] Using site key: ${r} (${g?"development":"production"})`)}},[c,g]),e.jsxs("div",{className:`hcaptcha-container ${v}`,children:[e.jsx(fe,{ref:x,sitekey:c,onVerify:A,onError:n,onExpire:y,size:S,theme:"light",tabIndex:0}),f&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:f}),g&&e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Modo desenvolvimento: hCaptcha ativo"})]})});X.displayName="HCaptchaWidget";const ge=()=>{const{t:i}=pe(),w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",[o,S]=s.useState(""),[v,N]=s.useState(""),[x,F]=s.useState(!1),[p,f]=s.useState(""),[b,c]=s.useState(""),[g,A]=s.useState(!1),[n,y]=s.useState({}),[r,d]=s.useState({}),[C,H]=s.useState(0),[u,_]=s.useState(!1),[I,z]=s.useState(0),[L,B]=s.useState(!0),k=s.useRef(null),{signIn:Y,user:R,loading:U}=ue(),{toast:E}=me(),O=be(),Z=s.useCallback(a=>{f(a),c("")},[]),ee=s.useCallback(a=>{console.error("hCaptcha Error:",a),f(""),c("Verificação de segurança falhou. Tente novamente.")},[]),se=s.useCallback(()=>{f(""),k.current?.execute()},[]);if(s.useEffect(()=>{const l=setTimeout(()=>{L&&B(!1)},500);return R?B(!1):(async()=>{if(R){O("/dashboard");return}U||B(!1)})(),()=>clearTimeout(l)},[U,R,O,L]),L)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Verificando autenticação..."})]})});const T=(a,l)=>{const t={...n};switch(a){case"email":l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)?l.length>254?t.email="O e-mail é muito longo":delete t.email:t.email="Por favor, insira um e-mail válido":t.email="O e-mail é obrigatório";break;case"password":l?l.length<6?t.password="A senha deve ter pelo menos 6 caracteres":l.length>128?t.password="A senha é muito longa":delete t.password:t.password="A senha é obrigatória";break}return y(t),Object.keys(t).length===0},te=()=>{const a=T("email",o),l=T("password",v);return a&&l},q=a=>{const{name:l,value:t}=a.target;d(m=>({...m,[l]:!0})),T(l,t)},K=()=>{const a=C+1;if(H(a),a>=3){_(!0),z(300);const l=setInterval(()=>{z(t=>t<=1?(_(!1),H(0),clearInterval(l),0):t-1)},1e3)}},$=a=>{const l=Math.floor(a/60),t=a%60;return`${l}:${t.toString().padStart(2,"0")}`},ae=async a=>{if(a.preventDefault(),u){E({title:"Conta temporariamente bloqueada",description:`Aguarde ${$(I)} antes de tentar novamente.`,variant:"destructive"});return}if(x)return;if(d({email:!0,password:!0}),!te()){E({title:"Erro de validação",description:"Corrija os erros no formulário antes de continuar.",variant:"destructive"});return}if(!w&&!p){c("Complete a verificação de segurança"),k.current?.execute();return}try{const t=await Y(o,v,p);if(t?.user)H(0),E({title:"Login realizado com sucesso!",description:"Redirecionando para o painel..."}),O("/dashboard");else{K(),k.current?.reset(),f("");const m=t?.error?.message||"Erro ao fazer login. Tente novamente.";E({title:"Erro no login",description:m,variant:"destructive"}),m.includes("senha")||m.includes("Senha")?(y(j=>({...j,password:"Senha incorreta"})),d(j=>({...j,password:!0}))):(m.includes("e-mail")||m.includes("email"))&&(y(j=>({...j,email:"E-mail não encontrado"})),d(j=>({...j,email:!0})))}}catch(t){console.error("Login error:",t),K(),k.current?.reset(),f("");const m=t.message||"Erro ao fazer login. Tente novamente.";E({title:t.message?.includes("Tempo limite")?"Tempo limite excedido":"Erro no login",description:m,variant:"destructive"})}finally{F(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex flex-col lg:flex-row bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 relative",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-blue-500 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-40 right-20 w-32 h-32 bg-purple-500 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-indigo-500 rounded-full blur-xl"})]}),e.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8},className:"w-full max-w-md space-y-8 relative z-10",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(V,{to:"/",className:"inline-flex items-center space-x-3 group",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:e.jsx(W,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"TamanduAI"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-2",children:i("auth.welcomeBack","Bem-vindo de volta")}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:i("auth.signInToContinue","Entre na sua conta para continuar")})]})]}),e.jsx(P,{children:u&&e.jsx(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Conta temporariamente bloqueada"}),e.jsxs("p",{className:"text-sm",children:["Muitas tentativas. Tente em ",$(I)]})]})]})})}),C>0&&C<5&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-amber-700 text-sm",children:["Tentativa ",C," de 5. ",5-C," restantes."]})}),e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(he,{htmlFor:"email",className:"text-slate-700 dark:text-slate-200 font-medium",children:i("auth.emailLabel","Email")}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx(J,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:o,onChange:a=>{S(a.target.value),r.email&&T("email",a.target.value)},onBlur:q,disabled:u,className:`pl-10 h-12 border-2 rounded-xl transition-all duration-200 bg-white ${n.email&&r.email?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":o&&!n.email&&r.email?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":r.email?"border-slate-300 focus:border-blue-500 focus:ring-blue-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-blue-500 focus:ring-blue-500/20"}`,required:!0}),o&&!n.email&&r.email&&e.jsx(h.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-3",children:e.jsx(G,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx(P,{children:n.email&&r.email&&e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:n.email})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(J,{id:"password",name:"password",type:g?"text":"password",placeholder:"••••••••",value:v,onChange:a=>{N(a.target.value),r.password&&T("password",a.target.value)},onBlur:q,disabled:u,className:`pl-10 pr-12 h-12 border-2 rounded-xl transition-all duration-200 bg-white ${n.password&&r.password?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":v&&!n.password&&r.password?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":r.password?"border-slate-300 focus:border-blue-500 focus:ring-blue-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-blue-500 focus:ring-blue-500/20"}`,required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",disabled:u,children:g?e.jsx(ie,{className:"w-5 h-5"}):e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{ref:k,onVerify:Z,onError:ee,onExpire:se,size:"invisible"}),e.jsx(P,{children:b&&e.jsxs(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:b})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500",disabled:u}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:i("auth.rememberMe","Lembrar de mim")})]}),e.jsx(V,{to:"#",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:i("auth.forgotPassword","Esqueceu a senha?")})]}),e.jsx(xe,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",disabled:x||Object.keys(n).length>0||u,children:x?e.jsx(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[u?`${i("auth.blocked","Bloqueado")} (${$(I)})`:i("auth.signIn","Entrar"),!u&&e.jsx(oe,{className:"ml-2 w-4 h-4"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:[i("auth.dontHaveAccount","Não tem conta?")," ",e.jsx(V,{to:"/register",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:i("auth.signUp","Cadastre-se")})]})}),e.jsx("div",{className:"flex items-center justify-center space-x-2 text-xs text-slate-500",children:navigator.onLine?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{children:"Conectado"})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-3 h-3"}),e.jsx("span",{children:"Sem conexão"})]})})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 items-center justify-center p-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-60 h-60 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-32 h-32 bg-white/10 rounded-full blur-2xl"})]}),e.jsxs(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"text-center text-white space-y-8 relative z-10",children:[e.jsx("div",{className:"relative",children:e.jsx(h.div,{animate:{y:[0,-10,0],rotate:[0,5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"w-80 h-80 mx-auto mb-8 relative",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 rounded-3xl backdrop-blur-sm border border-white/20 flex items-center justify-center",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(D,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(W,{className:"w-8 h-8 text-white"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-white/30 rounded-2xl flex items-center justify-center",children:e.jsx(Q,{className:"w-10 h-10 text-white"})})}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-white/60 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-white/60 rounded-full"})]})]})})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Transforme sua jornada educacional"}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed",children:"Acesse ferramentas inteligentes para gestão de turmas e muito mais"})]}),e.jsxs("div",{className:"flex justify-center space-x-8 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsx("p",{children:"Seguro"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(Q,{className:"w-6 h-6"})}),e.jsx("p",{children:"Inteligente"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsx("p",{children:"Educacional"})]})]})]})]})]})},ke=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{X as H,ke as L};
