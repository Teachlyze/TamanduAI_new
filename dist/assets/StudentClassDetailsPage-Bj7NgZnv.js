import{ak as k,g as E,r as a,j as e,B as c,M as j,b as P,s as d}from"./main-NgjJy_CG.js";import{P as f}from"./PremiumCard-BGO_It48.js";import{P as q}from"./PremiumButton-DDGOGflQ.js";import{E as l}from"./EmptyState-Cb7n_MKP.js";import{C as A}from"./ChatbotWidget-qVonXUzu.js";import"./bot-C1f7hJe0.js";import"./send-DtvIXJ49.js";const I=()=>{const{classId:t}=k(),g=E(),[C,n]=a.useState(!0),[i,b]=a.useState(null),[o,N]=a.useState([]),[m,y]=a.useState([]),[x,u]=a.useState("");return a.useEffect(()=>{(async()=>{n(!0),u("");try{const{data:r,error:p}=await d.from("classes").select("*").eq("id",t).maybeSingle();if(p)throw p;b(r);const{data:S,error:h}=await d.from("activity_class_assignments").select("activity:activities(id, title, description, type, due_date, is_published)").eq("class_id",t).order("assigned_at",{ascending:!1});if(h)throw h;N((S||[]).map(_=>_.activity).filter(Boolean));const{data:w,error:v}=await d.from("discussions").select("id, title, description, created_at, activity_id").eq("class_id",t).order("created_at",{ascending:!1});if(v)throw v;y(w||[])}catch(r){console.error("Erro ao carregar turma:",r),u("Não foi possível carregar a turma.")}finally{n(!1)}})()},[t]),i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-8 rounded-2xl text-white",children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.name}),e.jsx("p",{className:"text-slate-100",children:i.subject||"Sem disciplina"})]}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:x}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(f,{variant:"elevated",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"})," Atividades"]})}),o.length===0?e.jsx(l,{icon:c,title:"Nenhuma atividade",description:"O professor ainda não publicou atividades."}):e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsx("div",{className:"p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.description||"Sem descrição"})]}),e.jsx(q,{variant:"gradient",size:"sm",onClick:()=>g(`/students/activities/${s.id}`),children:"Abrir"})]})},s.id))})]})})}),e.jsx("div",{className:"space-y-6",children:e.jsx(f,{variant:"elevated",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 mb-4",children:[e.jsx(j,{className:"w-5 h-5"})," Discussões"]}),m.length===0?e.jsx(l,{icon:j,title:"Sem discussões",description:"Nenhuma discussão criada ainda."}):e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs(P,{to:`/students/classes/${t}/discussions/${s.id}`,className:"block p-3 rounded-lg border border-border hover:bg-muted/50",children:[e.jsx("div",{className:"font-medium",children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 line-clamp-2",children:s.description})]},s.id))})]})})})]}),e.jsx(A,{context:{classId:t}})]}):e.jsx(l,{title:"Turma não encontrada",description:"Verifique o link e tente novamente.",icon:c})};export{I as default};
