import{u as Ee,r as d,j as e,o as Ke,U as F,k as ie,ah as le,A as Le,T as ne,s as y,ar as de}from"./main-Bq8SWujy.js";import{P as h}from"./PremiumCard-DFrgcJpK.js";import{P as ce}from"./PremiumButton-BPiMyuHl.js";import{E as S}from"./EmptyState-De2Uzp7q.js";import $e from"./jspdf.es.min-C4AsrOz3.js";import"./jspdf.plugin.autotable-DaH8ixQg.js";import{u as H,w as Be}from"./xlsx-ryysLjNt.js";import{D as oe}from"./download-CVS4xcpH.js";import{G as me}from"./graduation-cap-Cw9OWH2I.js";import{T as Fe}from"./target-CTyEIQOb.js";import{R as k,T as G}from"./CategoricalChart-Bk8lXI1V.js";import{B as q,a as w}from"./BarChart-C5wT97kD.js";import{C as R,X as I,Y as P}from"./CartesianChart-6MqY9mZ1.js";import{L as E}from"./Legend-5XAyelAB.js";import{P as Re,a as Ie,C as ze}from"./PieChart-DrTwfOEW.js";import{L as Oe,a as xe}from"./LineChart-Csy3caxV.js";import"./typeof-QjJsDpFa.js";import"./index-D_P3mdcN.js";const ue=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],ds=()=>{const{user:U}=Ee(),[he,z]=d.useState(!0),[K,ge]=d.useState(null),[p,je]=d.useState([]),[N,pe]=d.useState([]),[v,fe]=d.useState([]),[g,ve]=d.useState([]),[f,be]=d.useState([]),[Q,Ne]=d.useState([]),[C,_e]=d.useState(""),[A,ye]=d.useState(""),[L,Se]=d.useState(""),[$,we]=d.useState(""),[O,Ce]=d.useState(30),[T,Ae]=d.useState(null),[M,Te]=d.useState(null);d.useEffect(()=>{(async()=>{if(!U?.id)return;z(!0);const t=new Date,a=new Date;a.setDate(a.getDate()-O),Ae(a),Te(t);try{const{data:l}=await y.from("schools").select("id, name").eq("owner_id",U.id).maybeSingle();if(!l){z(!1);return}ge(l);const{data:c}=await y.from("school_classes").select("class_id, classes(id, name, created_by, is_active)").eq("school_id",l.id),n=(c||[]).map(m=>m.classes).filter(m=>m&&m.is_active);je(n);const i=(n||[]).map(m=>m.id),u=[...new Set((n||[]).map(m=>m.created_by))];if(u.length>0){const{data:m}=await y.from("profiles").select("id, full_name").in("id",u);pe(m||[])}if(i.length===0){z(!1);return}const{data:_}=await y.from("class_members").select("class_id, user_id, user:profiles(id, full_name)").in("class_id",i).eq("role","student");fe(_||[]);const{data:r}=await y.from("activity_class_assignments").select("class_id, activity:activities(id, title, type, max_grade, created_by, created_at)").in("class_id",i),o=(r||[]).map(m=>({...m.activity,class_id:m.class_id})).filter(Boolean);ve(o);const b=o.map(m=>m.id);if(b.length>0){const{data:m}=await y.from("submissions").select("id, activity_id, student_id, grade, status, submitted_at").in("activity_id",b);be(m||[])}const D=[...new Set((_||[]).map(m=>m.user_id))];if(D.length>0){const{data:m}=await y.from("xp_log").select("user_id, xp, created_at").in("user_id",D);Ne(m||[])}}finally{z(!1)}})()},[U?.id,O]);const j=d.useMemo(()=>!T||!M?f:f.filter(s=>{if(!s.submitted_at)return!1;const t=new Date(s.submitted_at);return t>=T&&t<=M}),[f,T,M]),V=d.useMemo(()=>!T||!M?g:g.filter(s=>{if(!s.created_at)return!0;const t=new Date(s.created_at);return t>=T&&t<=M}),[g,T,M]),x=d.useMemo(()=>{const s=N.length,t=p.length,a=new Set(v.map(o=>o.user_id)).size,l=V.length,c=j.length,n=j.filter(o=>o.status==="graded").length,i=n>0?j.filter(o=>o.grade!=null).reduce((o,b)=>o+(b.grade||0),0)/n:0,u=j.filter(o=>{const b=V.find(D=>D.id===o.activity_id);return!b?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)<=new Date(b.due_date)}).length,_=j.filter(o=>{const b=V.find(D=>D.id===o.activity_id);return!b?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)>new Date(b.due_date)}).length,r=l>0&&a>0?(c/(l*a)*100).toFixed(1):0;return{totalTeachers:s,totalClasses:t,totalStudents:a,totalActivities:l,totalSubmissions:c,gradedSubmissions:n,avgGrade:i.toFixed(1),onTime:u,late:_,completionRate:r}},[N,p,v,V,j]),W=d.useMemo(()=>{const s=new Map;return p.forEach(t=>s.set(t.id,t)),s},[p]),Y=d.useMemo(()=>{const s=new Map;return N.forEach(t=>s.set(t.id,t)),s},[N]),Me=s=>{if(!s)return null;const t=v.filter(i=>i.class_id===s).map(i=>i.user_id),a=g.filter(i=>i.class_id===s).map(i=>i.id),l=f.filter(i=>a.includes(i.activity_id)),c=l.filter(i=>i.grade!=null),n=c.length>0?c.reduce((i,u)=>i+(u.grade||0),0)/c.length:0;return{students:new Set(t).size,activities:a.length,submissions:l.length,avgGrade:Number(n.toFixed(1))}},De=s=>{if(!s)return null;const t=p.filter(r=>r.created_by===s),a=t.map(r=>r.id),l=v.filter(r=>a.includes(r.class_id)),c=g.filter(r=>a.includes(r.class_id)),n=c.map(r=>r.id),i=f.filter(r=>n.includes(r.activity_id)),u=i.filter(r=>r.grade!=null),_=u.length>0?u.reduce((r,o)=>r+(o.grade||0),0)/u.length:0;return{classes:t.length,students:new Set(l.map(r=>r.user_id)).size,activities:c.length,submissions:i.length,avgGrade:Number(_.toFixed(1))}},J=s=>{const t=Me(s);return t?e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Alunos:"})," ",t.students]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Atividades:"})," ",t.activities]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Submissões:"})," ",t.submissions]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nota média:"})," ",t.avgGrade]})]}):null},Z=s=>{const t=De(s);return t?e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Turmas:"})," ",t.classes]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alunos:"})," ",t.students]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Atividades:"})," ",t.activities]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Submissões:"})," ",t.submissions]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nota média:"})," ",t.avgGrade]})]}):null},ee=d.useMemo(()=>N.map(s=>{const t=p.filter(r=>r.created_by===s.id),a=t.map(r=>r.id),l=v.filter(r=>a.includes(r.class_id)),c=g.filter(r=>r.created_by===s.id),n=c.map(r=>r.id),u=f.filter(r=>n.includes(r.activity_id)).filter(r=>r.grade!=null),_=u.length>0?u.reduce((r,o)=>r+(o.grade||0),0)/u.length:0;return{name:s.full_name||"Professor",classes:t.length,students:new Set(l.map(r=>r.user_id)).size,activities:c.length,avgGrade:_}}),[N,p,v,g,f]),se=d.useMemo(()=>p.slice(0,10).map(s=>{const t=v.filter(n=>n.class_id===s.id);g.filter(n=>n.class_id===s.id);const a=f.filter(n=>{const i=g.find(u=>u.id===n.activity_id);return i&&i.class_id===s.id}),l=a.filter(n=>n.grade!=null),c=l.length>0?l.reduce((n,i)=>n+(i.grade||0),0)/l.length:0;return{name:s.name,students:t.length,submissions:a.length,avgGrade:c}}),[p,v,g,f]),te=d.useMemo(()=>{const s={};return v.forEach(t=>{const l=f.filter(i=>i.student_id===t.user_id).filter(i=>i.grade!=null),c=l.length>0?l.reduce((i,u)=>i+(u.grade||0),0)/l.length:0,n=Q.filter(i=>i.user_id===t.user_id).reduce((i,u)=>i+(u.xp||0),0);s[t.user_id]={name:t.user?.full_name||"Aluno",avgGrade:c,xp:n}}),Object.values(s).sort((t,a)=>a.avgGrade-t.avgGrade).slice(0,10)},[v,f,Q]),X=d.useMemo(()=>{const s=g.reduce((t,a)=>(t[a.type]=(t[a.type]||0)+1,t),{});return Object.entries(s).map(([t,a])=>({name:t==="assignment"?"Tarefa":t==="quiz"?"Quiz":"Projeto",value:a}))},[g]),ae=d.useMemo(()=>{const s=Array(10).fill(0);return j.filter(t=>t.grade!=null).forEach(t=>{const a=t.grade||0,l=Math.min(Math.floor(a/10),9);s[l]++}),s.map((t,a)=>({range:`${a*10}-${(a+1)*10}`,count:t}))},[j]),B=d.useMemo(()=>{const s=j.filter(a=>a.grade!=null).map(a=>a.grade).sort((a,l)=>a-l);if(s.length===0)return{p10:0,p50:0,p90:0,p25:0,p75:0};const t=a=>{const l=Math.ceil(a/100*s.length)-1;return s[Math.max(0,l)]||0};return{p10:t(10),p25:t(25),p50:t(50),p75:t(75),p90:t(90)}},[j]),re=d.useMemo(()=>{const s={};return j.forEach(t=>{if(!t.submitted_at)return;const a=new Date(t.submitted_at),l=a.getFullYear(),c=ke(a),n=`${l}-W${c}`;s[n]||(s[n]={count:0,grades:[]}),s[n].count++,t.grade!=null&&s[n].grades.push(t.grade)}),Object.entries(s).map(([t,a])=>({week:t,count:a.count,avgGrade:a.grades.length>0?(a.grades.reduce((l,c)=>l+c,0)/a.grades.length).toFixed(1):0})).sort((t,a)=>t.week.localeCompare(a.week))},[j]),ke=s=>{const t=new Date(s);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const a=new Date(t.getFullYear(),0,1);return Math.ceil(((t-a)/864e5+1)/7)};if(he)return e.jsx(Ke,{message:"Carregando analytics da escola..."});if(!K)return e.jsx(S,{icon:F,title:"Escola não encontrada",description:"Nenhuma escola vinculada."});const Ge=()=>{const s=new $e;s.setFontSize(18),s.text(`Analytics - ${K.name}`,14,20),s.setFontSize(12),s.text(`Período: Últimos ${O} dias`,14,30),s.text("Métricas Gerais:",14,45);const t=[["Métrica","Valor"],["Total de Professores",x.totalTeachers],["Total de Turmas",x.totalClasses],["Total de Alunos",x.totalStudents],["Média Geral",x.avgGrade],["Taxa de Conclusão",`${x.completionRate}%`]];s.autoTable({startY:50,head:[t[0]],body:t.slice(1)}),s.save(`analytics_${K.name.replace(/\s/g,"_")}.pdf`),de({title:"Sucesso",description:"Relatório exportado em PDF!"})},Pe=()=>{const s=H.json_to_sheet([{Métrica:"Total de Professores",Valor:x.totalTeachers},{Métrica:"Total de Turmas",Valor:x.totalClasses},{Métrica:"Total de Alunos",Valor:x.totalStudents},{Métrica:"Média Geral",Valor:x.avgGrade},{Métrica:"Taxa de Conclusão",Valor:`${x.completionRate}%`}]),t=H.book_new();H.book_append_sheet(t,s,"Métricas"),Be(t,`analytics_${K.name.replace(/\s/g,"_")}.xlsx`),de({title:"Sucesso",description:"Relatório exportado em Excel!"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-600 to-gray-700 p-8 rounded-2xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ie,{className:"w-6 h-6"})," Analytics da Escola"]}),e.jsxs("p",{className:"text-white/90",children:[K.name," - Métricas e Comparações"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ce,{onClick:Ge,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"PDF"]}),e.jsxs(ce,{onClick:Pe,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Excel"]})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Período:"}),[7,15,30,90,180,365].map(s=>e.jsx("button",{onClick:()=>Ce(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${O===s?"bg-gradient-to-r from-slate-600 to-gray-700 text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:s===7?"7 dias":s===15?"15 dias":s===30?"30 dias":s===90?"3 meses":s===180?"6 meses":"1 ano"},s))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Taxa de Conclusão"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[x.completionRate,"%"]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"On-time / Late"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:x.onTime}),e.jsx("div",{className:"text-muted-foreground",children:"/"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:x.late})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Mediana (p50)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:B.p50})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Percentis"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["p10: ",e.jsx("strong",{children:B.p10})]}),e.jsxs("div",{children:["p25: ",e.jsx("strong",{children:B.p25})]}),e.jsxs("div",{children:["p75: ",e.jsx("strong",{children:B.p75})]}),e.jsxs("div",{children:["p90: ",e.jsx("strong",{children:B.p90})]})]})]})})]}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação Manual: Turma x Turma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border",value:C,onChange:s=>_e(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma A"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border",value:A,onChange:s=>ye(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma B"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Turma A ",C&&W.get(C)?.name?`- ${W.get(C).name}`:""]}),C?J(C):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Turma B ",A&&W.get(A)?.name?`- ${W.get(A).name}`:""]}),A?J(A):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação Manual: Professor x Professor"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{list:"teachers-list",placeholder:"Buscar professor A por nome",className:"px-3 py-2 rounded-lg border border-border",onChange:s=>{const t=s.target.value.toLowerCase(),a=N.find(l=>(l.full_name||"").toLowerCase()===t);Se(a?a.id:"")}}),e.jsx("input",{list:"teachers-list",placeholder:"Buscar professor B por nome",className:"px-3 py-2 rounded-lg border border-border",onChange:s=>{const t=s.target.value.toLowerCase(),a=N.find(l=>(l.full_name||"").toLowerCase()===t);we(a?a.id:"")}}),e.jsx("datalist",{id:"teachers-list",children:N.map(s=>e.jsx("option",{value:(s.full_name||"").toLowerCase()},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Professor A ",L&&Y.get(L)?.full_name?`- ${Y.get(L).full_name}`:""]}),L?Z(L):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um professor"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Professor B ",$&&Y.get($)?.full_name?`- ${Y.get($).full_name}`:""]}),$?Z($):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um professor"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-7 gap-4",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(me,{className:"w-8 h-8 mx-auto mb-2 text-indigo-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.totalTeachers}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Professores"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.totalClasses}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Turmas"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-cyan-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.totalStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Alunos"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(le,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.totalActivities}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Atividades"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2 text-amber-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.totalSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Submissões"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Le,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.gradedSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avaliadas"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ne,{className:"w-8 h-8 mx-auto mb-2 text-rose-600"}),e.jsx("div",{className:"text-2xl font-bold",children:x.avgGrade}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nota Média"})]})})]}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Professores"}),ee.length===0?e.jsx(S,{icon:me,title:"Sem dados"}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(q,{data:ee,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(G,{}),e.jsx(E,{}),e.jsx(w,{dataKey:"students",fill:"#3b82f6",name:"Alunos"}),e.jsx(w,{dataKey:"activities",fill:"#10b981",name:"Atividades"}),e.jsx(w,{dataKey:"avgGrade",fill:"#f59e0b",name:"Nota Média"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Turmas (Top 10)"}),se.length===0?e.jsx(S,{icon:F,title:"Sem turmas"}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(q,{data:se,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(G,{}),e.jsx(E,{}),e.jsx(w,{dataKey:"avgGrade",fill:"#8b5cf6",name:"Nota Média"}),e.jsx(w,{dataKey:"submissions",fill:"#ec4899",name:"Submissões"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Top 10 Alunos"}),te.length===0?e.jsx(S,{icon:F,title:"Sem dados"}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(q,{data:te,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(G,{}),e.jsx(E,{}),e.jsx(w,{dataKey:"avgGrade",fill:"#3b82f6",name:"Nota Média"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Atividades por Tipo"}),X.length===0?e.jsx(S,{icon:le,title:"Sem atividades"}):e.jsx(k,{width:"100%",height:300,children:e.jsxs(Re,{children:[e.jsx(Ie,{data:X,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:X.map((s,t)=>e.jsx(ze,{fill:ue[t%ue.length]},`cell-${t}`))}),e.jsx(G,{}),e.jsx(E,{})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Distribuição de Notas"}),ae.every(s=>s.count===0)?e.jsx(S,{icon:ie,title:"Sem notas",description:"Aguardando avaliações."}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(q,{data:ae,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"range"}),e.jsx(P,{}),e.jsx(G,{}),e.jsx(E,{}),e.jsx(w,{dataKey:"count",fill:"#8b5cf6",name:"Quantidade"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Tendências Semanais"}),re.length===0?e.jsx(S,{icon:ne,title:"Sem dados"}):e.jsx(k,{width:"100%",height:250,children:e.jsxs(Oe,{data:re,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(I,{dataKey:"week",angle:-45,textAnchor:"end",height:80}),e.jsx(P,{yAxisId:"left"}),e.jsx(P,{yAxisId:"right",orientation:"right"}),e.jsx(G,{}),e.jsx(E,{}),e.jsx(xe,{yAxisId:"left",type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Submissões",strokeWidth:2}),e.jsx(xe,{yAxisId:"right",type:"monotone",dataKey:"avgGrade",stroke:"#10b981",name:"Nota Média",strokeWidth:2})]})})]})})]})]})};export{ds as default};
