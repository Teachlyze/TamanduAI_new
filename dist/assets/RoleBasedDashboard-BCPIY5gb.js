import{r as c,V as se,ax as H,F as j,aH as Y,j as e,aF as V,be as G,K as R,Y as J,a0 as re,H as ie,B as K,as as ne,v as q,aV as de,u as le}from"./react-vendor-C2HUFn5N.js";import{a as I,C as x,e as m,b as y,d as N,B as _,s as S,L as f,P as oe}from"./lazy-CreateActivityPage.jsx-DYBofU2F.js";import{A as O,a as W}from"./page-ClassroomsPage.jsx-CWEwUV_W.js";import{b as Q}from"./page-ActivitiesListPage.jsx-Cv5lq7oV.js";import{m as n}from"./motion-vendor-Crtv24Dn.js";import{u as X}from"./vendor-react-router-B4Bn0PSh.js";import{B as ce}from"./page-ActivityManagementPage.jsx-C56hp2jB.js";const xe=()=>{const{user:o}=I(),i=X(),[r,D]=c.useState({totalStudents:0,activeClasses:0,totalActivities:0,completionRate:0,pendingSubmissions:0,upcomingDeadlines:0}),[p,w]=c.useState([]),[v,k]=c.useState(!0),{data:g,loading:h}=Q(o?.id,"teacher");c.useEffect(()=>{(async()=>{if(!(!o?.id||!g))try{k(!0);const t=g.reduce((d,P)=>d+(P.students_count||0),0),l=g.length,A=g.reduce((d,P)=>d+(P.activities_count||0),0),{data:u,error:L}=await S.from("class_activities").select(`
            id,
            title,
            type,
            created_at,
            due_date,
            class_id,
            classes!inner(name)
          `).in("class_id",g.map(d=>d.id)).order("created_at",{ascending:!1}).limit(5);L&&f.error("Error fetching recent activities:",L);const{count:M,error:C}=await S.from("submissions").select("*",{count:"exact",head:!0}).in("activity_id",u?.map(d=>d.id)||[]).eq("status","submitted").is("grade",null);C&&f.error("Error fetching pending submissions:",C);const $=A>0?Math.round(A/(l*8)*100):0;D({totalStudents:t,activeClasses:l,totalActivities:A,completionRate:$,pendingSubmissions:M||0,upcomingDeadlines:u?.filter(d=>d.due_date&&new Date(d.due_date)>new Date).length||0});const U=u?.map(d=>({id:d.id,type:d.type||"assignment",title:d.title,description:`Turma: ${d.classes?.name}`,time:new Date(d.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),icon:j,color:"blue",classId:d.class_id}))||[];w(U)}catch(t){f.error("Error loading teacher dashboard data:",t)}finally{k(!1)}})()},[o?.id,g]);const b=[{icon:se,label:"Total de Alunos",value:r.totalStudents.toString(),change:"+12%",changeType:"positive",gradient:"from-blue-500 to-cyan-500"},{icon:H,label:"Turmas Ativas",value:r.activeClasses.toString(),change:"+2",changeType:"positive",gradient:"from-green-500 to-emerald-500"},{icon:j,label:"Atividades Criadas",value:r.totalActivities.toString(),change:"+5",changeType:"positive",gradient:"from-purple-500 to-pink-500"},{icon:Y,label:"Taxa de Conclusão",value:`${r.completionRate}%`,change:"+3%",changeType:"positive",gradient:"from-orange-500 to-red-500"}],T=[{icon:H,label:"Nova Turma",description:"Criar uma nova turma",gradient:"from-blue-500 to-cyan-500",action:()=>i("/dashboard/classes/new")},{icon:j,label:"Nova Atividade",description:"Criar atividade interativa",gradient:"from-green-500 to-emerald-500",action:()=>i("/dashboard/activities/create")},{icon:V,label:"Chatbot IA",description:"Configurar assistente",gradient:"from-purple-500 to-pink-500",action:()=>i("/dashboard/chatbot")},{icon:J,label:"Relatórios",description:"Ver analytics detalhados",gradient:"from-orange-500 to-red-500",action:()=>i("/dashboard/reports")},{icon:R,label:"Agenda",description:"Ver agenda educacional",gradient:"from-indigo-500 to-blue-500",action:()=>i("/dashboard/calendar")},{icon:re,label:"Configurações",description:"Gerenciar configurações",gradient:"from-gray-500 to-gray-600",action:()=>i("/dashboard/settings")}],E=[{title:"Prova de Matemática",class:"9A",date:"2023-10-15",daysLeft:3,priority:"high"},{title:"Trabalho de História",class:"8B",date:"2023-10-18",daysLeft:6,priority:"medium"},{title:"Apresentação de Ciências",class:"7C",date:"2023-10-20",daysLeft:8,priority:"low"}];return v||h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando dados do professor..."})]})}):e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold mb-3",children:["Bem-vindo, Professor(a) ",o?.name||o?.user_metadata?.full_name||"Docente","! 👨‍🏫"]}),e.jsx("p",{className:"text-blue-100 text-lg max-w-2xl",children:"Gerencie suas turmas, crie atividades e acompanhe o progresso dos seus alunos. Continue transformando a educação com IA!"})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(V,{className:"w-16 h-16 text-white"})})})]})}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-white/10 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-white/5 to-transparent rounded-full blur-2xl"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((s,t)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:t*.1},className:"group",children:e.jsx(x,{className:"hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-r ${s.gradient} rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(s.icon,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${s.changeType==="positive"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:s.change})]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:s.value}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:s.label})]})})},s.label))}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-2xl font-bold",children:"Atividades Recentes"}),e.jsxs(_,{variant:"ghost",className:"text-blue-600 hover:text-blue-700",onClick:()=>i("/dashboard/activities"),children:["Ver todas",e.jsx(G,{className:"w-4 h-4 ml-1"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:p.length>0?p.map((s,t)=>e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.1},className:"flex items-start space-x-4 p-4 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer group",onClick:()=>i(`/dashboard/activities/${s.id}`),children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color==="blue"?"from-blue-500 to-cyan-500":s.color==="green"?"from-green-500 to-emerald-500":s.color==="purple"?"from-purple-500 to-pink-500":"from-orange-500 to-red-500"} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(s.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:s.description}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s.time})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhuma atividade recente encontrada"}),e.jsx(_,{variant:"outline",className:"mt-4",onClick:()=>i("/dashboard/activities/create"),children:"Criar Primeira Atividade"})]})})})]})}),e.jsx(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-2xl font-bold",children:"Próximos Prazos"}),e.jsx(R,{className:"w-6 h-6 text-gray-400"})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:E.map((s,t)=>e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.1},className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:s.title}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Turma ",s.class]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-bold px-3 py-1 rounded-full ${s.daysLeft<=3?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":s.daysLeft<=7?"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"}`,children:[s.daysLeft," dias"]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.date})]})]},t))})})]})})]}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsx(N,{className:"text-2xl font-bold",children:"Ações Rápidas"})}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map((s,t)=>e.jsxs(n.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.1},className:"group p-6 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all transform hover:-translate-y-1",onClick:s.action,children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${s.gradient} rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(s.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.description})]},s.label))})})]})}),r.pendingSubmissions>0&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsx(x,{className:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"Submissões Pendentes"}),e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:["Você tem ",r.pendingSubmissions," atividade(s) para corrigir"]})]})]}),e.jsx(_,{variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-100 dark:border-orange-700 dark:text-orange-300 dark:hover:bg-orange-900/30",onClick:()=>i("/dashboard/activities"),children:"Ver Submissões"})]})})})})]})},me=()=>{const{user:o}=I(),i=X(),[r,D]=c.useState({enrolledClasses:0,activeActivities:0,completedActivities:0,overallProgress:0,currentGrade:0,pendingAssignments:0,upcomingDeadlines:0}),[p,w]=c.useState([]),[v,k]=c.useState([]),[g,h]=c.useState(!0),{data:b,loading:T}=Q(o?.id,"student");c.useEffect(()=>{(async()=>{if(!(!o?.id||!b))try{h(!0);const{data:l,error:A}=await S.from("class_activities").select(`
            id,
            title,
            type,
            due_date,
            max_score,
            created_at,
            class_id,
            classes!inner(name)
          `).in("class_id",b.map(a=>a.id)).eq("is_published",!0).order("created_at",{ascending:!1});A&&f.error("Error fetching student activities:",A);const{data:u,error:L}=await S.from("submissions").select(`
            id,
            grade,
            status,
            submitted_at,
            activity_id,
            class_activities!inner(title, class_id, classes!inner(name))
          `).eq("student_id",o.id).in("activity_id",l?.map(a=>a.id)||[]);L&&f.error("Error fetching student submissions:",L);const M=b.length,C=l?.length||0,$=u?.filter(a=>a.status==="graded").length||0,U=C>0?Math.round($/C*100):0,d=u?.filter(a=>a.grade!==null).length>0?Math.round(u.filter(a=>a.grade!==null).reduce((a,ae)=>a+(ae.grade||0),0)/u.filter(a=>a.grade!==null).length):0,P=u?.map(a=>a.activity_id)||[],Z=l?.filter(a=>!P.includes(a.id)).length||0,B=new Date,z=new Date;z.setDate(B.getDate()+7);const F=l?.filter(a=>a.due_date&&new Date(a.due_date)>=B&&new Date(a.due_date)<=z).slice(0,3)||[];D({enrolledClasses:M,activeActivities:C,completedActivities:$,overallProgress:U,currentGrade:d,pendingAssignments:Z,upcomingDeadlines:F.length});const ee=u?.slice(0,5).map(a=>({id:a.id,type:a.status==="graded"?"graded":"submitted",title:a.class_activities?.title||"Atividade",description:`Turma: ${a.class_activities?.classes?.name}`,time:a.submitted_at?new Date(a.submitted_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Data não disponível",icon:a.status==="graded"?de:j,color:a.status==="graded"?a.grade>=7?"green":"orange":"blue",grade:a.grade,status:a.status}))||[];w(ee);const te=F.map(a=>({id:a.id,title:a.title,class:a.classes?.name,date:new Date(a.due_date).toLocaleDateString("pt-BR"),daysLeft:Math.ceil((new Date(a.due_date)-B)/(1e3*60*60*24)),priority:Math.ceil((new Date(a.due_date)-B)/(1e3*60*60*24))<=2?"high":"medium"}));k(te)}catch(l){f.error("Error loading student dashboard data:",l)}finally{h(!1)}})()},[o?.id,b]);const E=[{icon:K,label:"Turmas Inscritas",value:r.enrolledClasses.toString(),change:"+1",changeType:"positive",gradient:"from-blue-500 to-cyan-500"},{icon:j,label:"Atividades Ativas",value:r.activeActivities.toString(),change:"+3",changeType:"positive",gradient:"from-green-500 to-emerald-500"},{icon:ne,label:"Atividades Concluídas",value:r.completedActivities.toString(),change:"+2",changeType:"positive",gradient:"from-purple-500 to-pink-500"},{icon:Y,label:"Progresso Geral",value:`${r.overallProgress}%`,change:"+5%",changeType:"positive",gradient:"from-orange-500 to-red-500"}],s=[{icon:K,label:"Ver Atividades",description:"Acessar atividades das turmas",gradient:"from-blue-500 to-cyan-500",action:()=>i("/dashboard/activities")},{icon:V,label:"Chatbot IA",description:"Tirar dúvidas com IA",gradient:"from-green-500 to-emerald-500",action:()=>i("/dashboard/chatbot")},{icon:R,label:"Agenda",description:"Ver prazos e eventos",gradient:"from-purple-500 to-pink-500",action:()=>i("/dashboard/calendar")},{icon:J,label:"Meu Desempenho",description:"Ver notas e estatísticas",gradient:"from-orange-500 to-red-500",action:()=>i("/dashboard/performance")}];return g||T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando dados do aluno..."})]})}):e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-blue-600 to-purple-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold mb-3",children:["Bem-vindo, ",o?.user_metadata?.full_name||"Aluno","! 🎓"]}),e.jsx("p",{className:"text-green-100 text-lg max-w-2xl",children:"Continue sua jornada de aprendizado! Aqui você pode acessar suas atividades, acompanhar seu progresso e interagir com seus professores."}),r.currentGrade>0&&e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-sm text-green-100",children:"Média Atual"}),e.jsx("div",{className:"text-2xl font-bold",children:r.currentGrade.toFixed(1)})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-sm text-green-100",children:"Progresso"}),e.jsxs("div",{className:"text-2xl font-bold",children:[r.overallProgress,"%"]})]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(V,{className:"w-16 h-16 text-white"})})})]})}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-white/10 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-white/5 to-transparent rounded-full blur-2xl"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map((t,l)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:l*.1},className:"group",children:e.jsx(x,{className:"hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-r ${t.gradient} rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(t.icon,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${t.changeType==="positive"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:t.change})]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t.value}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:t.label})]})})},t.label))}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-2xl font-bold",children:"Minhas Submissões"}),e.jsxs(_,{variant:"ghost",className:"text-blue-600 hover:text-blue-700",onClick:()=>i("/dashboard/activities"),children:["Ver todas",e.jsx(G,{className:"w-4 h-4 ml-1"})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:p.length>0?p.map((t,l)=>e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},className:"flex items-start space-x-4 p-4 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer group",onClick:()=>i(`/dashboard/activities/${t.id}`),children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${t.color==="blue"?"from-blue-500 to-cyan-500":t.color==="green"?"from-green-500 to-emerald-500":t.color==="purple"?"from-purple-500 to-pink-500":"from-orange-500 to-red-500"} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:t.time}),t.grade!==null&&e.jsxs(ce,{variant:t.grade>=7?"default":"destructive",children:["Nota: ",t.grade.toFixed(1)]})]})]})]},t.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhuma submissão encontrada"}),e.jsx(_,{variant:"outline",className:"mt-4",onClick:()=>i("/dashboard/activities"),children:"Ver Atividades Disponíveis"})]})})})]})}),e.jsx(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-2xl font-bold",children:"Próximos Prazos"}),e.jsx(R,{className:"w-6 h-6 text-gray-400"})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:v.length>0?v.map((t,l)=>e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all cursor-pointer group",onClick:()=>i(`/dashboard/activities/${t.id}`),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.title}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Turma: ",t.class]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-bold px-3 py-1 rounded-full ${t.daysLeft<=2?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":t.daysLeft<=5?"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"}`,children:[t.daysLeft," dias"]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:t.date})]})]},t.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum prazo próximo"}),e.jsx("p",{className:"text-sm mt-2",children:"Todas as suas atividades estão em dia! 🎉"})]})})})]})})]}),r.pendingAssignments>0&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:e.jsx(x,{className:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"Atividades Pendentes"}),e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:["Você tem ",r.pendingAssignments," atividade(s) para entregar"]})]})]}),e.jsx(_,{variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-100 dark:border-orange-700 dark:text-orange-300 dark:hover:bg-orange-900/30",onClick:()=>i("/dashboard/activities"),children:"Ver Atividades"})]})})})}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsx(N,{className:"text-2xl font-bold",children:"Progresso Geral"})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Atividades Concluídas"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.completedActivities," de ",r.activeActivities]})]}),e.jsx(oe,{value:r.overallProgress,className:"h-3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.enrolledClasses}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Turmas Inscritas"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.pendingAssignments}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendentes"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.currentGrade.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Média Atual"})]})]})]})})]})}),e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:e.jsxs(x,{children:[e.jsx(y,{children:e.jsx(N,{className:"text-2xl font-bold",children:"Ações Rápidas"})}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((t,l)=>e.jsxs(n.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},className:"group p-6 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all transform hover:-translate-y-1",onClick:t.action,children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${t.gradient} rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(t.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:t.label}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.description})]},t.label))})})]})})]})},je=()=>{const{user:o}=I(),[i,r]=c.useState(null),[D,p]=c.useState(!0),[w,v]=c.useState(null);return c.useEffect(()=>{const k=async()=>{if(!o?.id){p(!1);return}try{p(!0),v(null);const[{data:h,error:b},{data:T,error:E}]=await Promise.all([S.from("profiles").select("role").eq("id",o.id).single(),S.from("classes").select("id").eq("teacher_id",o.id).limit(1)]);h&&!b?r(h.role||"student"):T?.length>0&&!E?r("teacher"):r("student"),f.info("User role determined:",h?.role||"student")}catch(h){f.error("Error in fetchUserRole:",h),v("Erro ao carregar as informações do usuário"),r("student")}finally{p(!1)}},g=setTimeout(()=>{k()},300);return()=>clearTimeout(g)},[o?.id]),D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(le,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando dados do usuário..."})]})}):w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(O,{className:"max-w-md",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(W,{children:w})]})}):e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:i==="teacher"?e.jsx(xe,{}):i==="student"?e.jsx(me,{}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(O,{className:"max-w-md",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(W,{children:"Role não reconhecido. Entre em contato com o administrador."})]})})})};export{je as default};
