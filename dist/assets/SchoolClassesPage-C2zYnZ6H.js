import{g as T,u as L,r as l,z as A,j as e,o as E,m as o,B as m,U as g,ag as v,T as P,ah as j,K as U,$ as z,d as B}from"./main-NgjJy_CG.js";import{P as u}from"./PremiumCard-BGO_It48.js";import{E as f}from"./EmptyState-Cb7n_MKP.js";import{B as b}from"./badge-DS8upoqS.js";import{s as N}from"./schoolService-0kUg_1__.js";import{U as $}from"./user-check-C-AAn5f8.js";import{A as F}from"./arrow-right-Cb_gU53R.js";import"./PremiumButton-DDGOGflQ.js";const q=()=>{const y=T(),{user:d}=L(),[w,x]=l.useState(!0),[s,C]=l.useState([]),[p,c]=l.useState([]),[i,S]=l.useState("");l.useEffect(()=>{d&&k()},[d]),l.useEffect(()=>{if(i){const a=s.filter(t=>t.name?.toLowerCase().includes(i.toLowerCase())||t.subject?.toLowerCase().includes(i.toLowerCase())||t.teacherName?.toLowerCase().includes(i.toLowerCase()));c(a)}else c(s)},[i,s]);const k=async()=>{try{x(!0);const a=await N.getUserSchool(d.id);if(!a?.id)throw new Error("Nenhuma escola associada ao usuÃ¡rio");const h=(await N.getClasses(a.id)||[]).map(r=>({id:r.id,name:r.name,subject:r.subject,color:r.color,schedule:void 0,created_at:r.linkedAt,created_by:void 0,teacherName:r.teacherName,studentCount:r.studentCount||0,activitiesCount:0}));C(h),c(h)}catch(a){console.error("Erro ao carregar turmas:",a),A.error("Erro ao carregar turmas")}finally{x(!1)}};if(w)return e.jsx(E,{message:"Carregando turmas..."});const n={total:s.length,totalStudents:s.reduce((a,t)=>a+(t.studentCount||0),0),totalActivities:s.reduce((a,t)=>a+(t.activitiesCount||0),0),avgStudentsPerClass:s.length>0?Math.round(s.reduce((a,t)=>a+(t.studentCount||0),0)/s.length):0};return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-600 via-indigo-700 to-purple-800 p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs(o.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 mb-4",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"GestÃ£o de Turmas"})]}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Todas as Turmas ðŸ“š"}),e.jsx("p",{className:"text-white/90 text-lg",children:"VisÃ£o geral de todas as turmas da instituiÃ§Ã£o"})]}),e.jsx(o.div,{animate:{y:[0,-15,0],rotate:[0,-5,0]},transition:{duration:4,repeat:1/0},className:"absolute top-10 right-20 text-6xl opacity-20",children:"ðŸ“š"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{title:"Total de Turmas",value:n.total,icon:m,gradient:"from-purple-600 to-indigo-700"},{title:"Total de Alunos",value:n.totalStudents,icon:g,gradient:"from-green-600 to-emerald-700"},{title:"Total de Atividades",value:n.totalActivities,icon:v,gradient:"from-orange-600 to-red-700"},{title:"MÃ©dia/Turma",value:n.avgStudentsPerClass,icon:P,gradient:"from-blue-600 to-cyan-700"}].map((a,t)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},children:e.jsxs(u,{variant:"elevated",className:"relative overflow-hidden group hover:scale-105 transition-transform",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative p-6",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.gradient} text-white mb-2`,children:e.jsx(a.icon,{className:"w-6 h-6"})}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:a.value}),e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.title})]})]})},a.title))}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(u,{variant:"elevated",className:"p-4",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-700 dark:text-slate-300"}),e.jsx(U,{placeholder:"Buscar turmas por nome, disciplina ou professor...",value:i,onChange:a=>S(a.target.value),className:"pl-10 bg-white dark:bg-slate-900 text-foreground border-border rounded-lg"})]})})}),p.length===0?s.length===0?e.jsx(f,{icon:m,title:"Nenhuma turma criada",description:"Os professores podem criar turmas"}):e.jsx(f,{icon:j,title:"Nenhuma turma encontrada",description:"Tente ajustar sua busca"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(z,{children:p.map((a,t)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:t*.05},layout:!0,children:e.jsxs(u,{variant:"elevated",className:"group relative overflow-hidden hover:scale-105 transition-all cursor-pointer",onClick:()=>y(`/school/classes/${a.id}/members`),children:[e.jsxs("div",{className:`h-24 bg-gradient-to-r ${a.color||"from-purple-600 to-indigo-700"} relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"20px 20px"}})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsx("h3",{className:"text-xl font-bold text-white truncate",children:a.name})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{className:"bg-primary/10 text-primary",children:a.subject}),a.schedule&&e.jsxs(b,{variant:"outline",className:"bg-white dark:bg-slate-900 text-foreground border-border text-xs",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),a.schedule]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:a.teacherName||"Professor"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:a.studentCount})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium",children:a.activitiesCount})]})]}),e.jsx(F,{className:"w-5 h-5 text-slate-700 dark:text-slate-300 group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})},a.id))})})]})};export{q as default};
