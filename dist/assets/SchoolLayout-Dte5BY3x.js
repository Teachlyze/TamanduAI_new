import{f as _,u as T,g as B,r as h,s as l,$ as A,B as E,T as u,a0 as H,X as f,j as e,m as a,W as g,l as L,bG as $,a5 as q,bH as G}from"./main-Bujpyeg-.js";import{B as P}from"./badge-BFkPUQ-P.js";import{U as R}from"./user-check-DPZoVRWj.js";import{M as U}from"./mail-Cln78fkU.js";import{G as M}from"./graduation-cap-Ch-mLRIV.js";import{B as p}from"./bell-Cp3o7t82.js";import{B as O}from"./brain-vNXhM8pG.js";import{G as z}from"./gift-CcExqSXr.js";import{B as F}from"./building-2-yH9l0zTs.js";import{C as D}from"./chevron-left-v67NpT9C.js";import{S as V}from"./shield-r6W-ERGm.js";import{U as W}from"./user-CNukLUU_.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],J=_("briefcase",X),K=({collapsed:s,setCollapsed:m})=>{const{user:r,signOut:b}=T(),n=B(),[i,v]=h.useState({teachers:0,students:0,classes:0}),[c,j]=h.useState(0);h.useEffect(()=>{r&&(w(),N())},[r]);const w=async()=>{try{const{count:t}=await l.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher").eq("school_id",r.school_id),{count:x}=await l.from("classes").select("*",{count:"exact",head:!0}).eq("school_id",r.school_id);let d=0;if(x>0){const{data:o}=await l.from("classes").select("id").eq("school_id",r.school_id);if(o&&o.length>0){const I=o.map(S=>S.id),{count:C}=await l.from("class_members").select("*",{count:"exact",head:!0}).in("class_id",I).eq("role","student");d=C||0}}v({teachers:t||0,students:d,classes:x||0})}catch(t){console.error("Erro ao carregar stats:",t)}},N=async()=>{try{const{count:t}=await l.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",r.id).eq("read",!1);j(t||0)}catch(t){console.error("Erro ao carregar notificações:",t)}},y=[{label:"Dashboard",icon:A,path:"/school",tourId:"nav-school-dashboard",gradient:"from-slate-600 to-gray-700"},{label:"Professores",icon:R,path:"/school/teachers",tourId:"nav-school-teachers",gradient:"from-blue-600 to-indigo-700",badge:i.teachers},{label:"Convidar Professor",icon:U,path:"/school/invite-teacher",tourId:"nav-school-invite",gradient:"from-purple-600 to-pink-600"},{label:"Turmas",icon:E,path:"/school/classes",tourId:"nav-school-classes",gradient:"from-purple-600 to-indigo-700",badge:i.classes},{label:"Alunos",icon:M,path:"/school/students",tourId:"nav-school-students",gradient:"from-green-600 to-teal-700",badge:i.students},{label:"Ranking",icon:u,path:"/school/ranking",tourId:"nav-school-ranking",gradient:"from-yellow-600 to-amber-700"},{label:"Relatórios",icon:H,path:"/school/reports",tourId:"nav-school-reports",gradient:"from-cyan-600 to-blue-700"},{label:"Notificações",icon:p,path:"/school/notifications",tourId:"nav-school-notifications",gradient:"from-orange-600 to-red-700",badge:c>0?c:null},{label:"Comunicações",icon:J,path:"/school/comms",tourId:"nav-school-comms",gradient:"from-purple-600 to-pink-700"},{label:"Analytics Avançado",icon:u,path:"/school/analytics-advanced",tourId:"nav-school-analytics-advanced",gradient:"from-rose-600 to-red-700"},{label:"Analytics ML",icon:O,path:"/school/analytics-ml",tourId:"nav-school-analytics-ml",gradient:"from-purple-600 to-indigo-700",badge:"IA"},{label:"Recompensas",icon:z,path:"/school/rewards",tourId:"nav-school-rewards",gradient:"from-yellow-600 to-orange-600"},{label:"Configurações",icon:f,path:"/school/settings",tourId:"nav-school-settings",gradient:"from-gray-600 to-slate-700"}],k=async()=>{await b(),n("/login")};return e.jsx(a.aside,{initial:{x:-300},animate:{x:0,width:s?80:280},transition:{type:"spring",damping:20},className:"fixed left-0 top-0 h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-950 dark:from-slate-950 dark:via-gray-950 dark:to-black border-r border-slate-700/50 backdrop-blur-xl z-40 overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx(g,{mode:"wait",children:!s&&e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"TamanduAI"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Administração Escolar"})]})]})}),e.jsx(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>m(!s),className:"p-2 rounded-lg hover:bg-muted transition-colors",children:s?e.jsx(L,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"})})]}),!s&&e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-2xl bg-gradient-to-br from-amber-600/20 via-orange-600/20 to-red-600/20 border border-amber-500/30 text-white relative overflow-hidden backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"24px 24px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:r?.user_metadata?.school_name||"Escola"}),e.jsx("p",{className:"text-xs text-white/80 truncate",children:"Administrador"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.teachers}),e.jsx("div",{className:"text-xs text-white/80",children:"Profs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.classes}),e.jsx("div",{className:"text-xs text-white/80",children:"Turmas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.students}),e.jsx("div",{className:"text-xs text-white/80",children:"Alunos"})]})]})]})]}),e.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-muted",children:y.map((t,x)=>{const d=t.icon;return e.jsx($,{to:t.path,"data-tour-id":t.tourId||void 0,className:({isActive:o})=>`group flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-200 ${o?"bg-gradient-to-r "+t.gradient+" text-white shadow-lg scale-105":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,children:({isActive:o})=>e.jsxs(e.Fragment,{children:[e.jsx(a.div,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},className:`p-2 rounded-lg ${o?"bg-white/20":"bg-muted"}`,children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx(g,{mode:"wait",children:!s&&e.jsxs(a.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.label}),t.badge&&e.jsx(P,{className:`${o?"bg-white/20 text-white":"bg-primary/10 text-primary"} text-xs`,children:t.badge})]})})]})},t.path)})}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-border/50",children:[e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/dashboard/notifications"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-muted text-muted-foreground hover:text-foreground transition-all relative ${s?"justify-center":""}`,children:[e.jsxs("div",{className:"p-2 rounded-lg bg-muted relative",children:[e.jsx(p,{className:"w-5 h-5"}),c>0&&e.jsx(a.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:c})]}),!s&&e.jsx("span",{className:"font-medium text-sm",children:"Notificações"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/school/settings"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-muted text-muted-foreground hover:text-foreground transition-all ${s?"justify-center":""}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(f,{className:"w-5 h-5"})}),!s&&e.jsx("span",{className:"font-medium text-sm",children:"Configurações"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/profile/edit"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-muted text-muted-foreground hover:text-foreground transition-all ${s?"justify-center":""}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(W,{className:"w-5 h-5"})}),!s&&e.jsx("span",{className:"font-medium text-sm",children:"Editar Perfil"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-muted-foreground hover:text-red-600 transition-all ${s?"justify-center":""}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(q,{className:"w-5 h-5"})}),!s&&e.jsx("span",{className:"font-medium text-sm",children:"Sair"})]})]})]})})},ce=()=>{const[s,m]=h.useState(!1);return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950",children:[e.jsx(K,{collapsed:s,setCollapsed:m}),e.jsx(a.main,{animate:{marginLeft:s?0:280},transition:{type:"spring",damping:20},className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"min-h-full p-6",children:e.jsx(G,{})})})]})};export{ce as default};
