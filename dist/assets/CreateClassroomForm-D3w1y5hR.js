import{g as R,u as $,r as C,bb as q,j as e,m as h,i as p,bv as G,x as g,F as b,H as v,B as Q,I as f,y as N,bw as n,bx as o,by as t,bz as c,K as u,bA as d,aO as D,aP as A,aQ as k,aR as F,aS as r,aM as J,d as U,bB as B,U as K,J as O,a2 as X,D as W,au as w,s as Y}from"./main-BrBEgNdp.js";import{a as Z,o as ee,S as ae,s as m,n as se}from"./separator-TZfXY-TR.js";import{t as I}from"./use-toast-ukaem19H.js";import{B as re}from"./badge-visb3evj.js";import{A as ie,a as le}from"./alert-CTy8tgiu.js";import{A as ne}from"./arrow-left-C3YmVj01.js";import{T as oe}from"./triangle-alert-D6h6Khi-.js";import{S as te}from"./school-CzQGRN7k.js";import{P as ce}from"./plus-BUy7xDK2.js";import{G as de}from"./graduation-cap-B9YRwt8m.js";const me=ee({name:m().min(3,"Nome da turma deve ter pelo menos 3 caracteres"),subject:m().min(2,"Matéria é obrigatória"),description:m().optional(),schedule:m().min(1,"Horário é obrigatório"),room:m().optional(),capacity:se().min(1,"Capacidade deve ser pelo menos 1").max(100,"Capacidade máxima é 100"),color:m().min(1,"Selecione uma cor"),grade:m().min(1,"Série é obrigatória"),semester:m().min(1,"Semestre é obrigatório"),startDate:m().min(1,"Data de início é obrigatória"),endDate:m().min(1,"Data de término é obrigatória")}),we=()=>{const y=R(),{user:j}=$(),[i,T]=C.useState(!1),[x,E]=C.useState([]),[V,M]=C.useState(null),z=[{name:"Azul",value:"blue",class:"bg-blue-500"},{name:"Verde",value:"green",class:"bg-green-500"},{name:"Roxo",value:"purple",class:"bg-purple-500"},{name:"Rosa",value:"pink",class:"bg-pink-500"},{name:"Laranja",value:"orange",class:"bg-orange-500"},{name:"Vermelho",value:"red",class:"bg-red-500"},{name:"Amarelo",value:"yellow",class:"bg-yellow-500"},{name:"Índigo",value:"indigo",class:"bg-indigo-500"}],H=[{id:1,name:"Ana Silva",email:"ana@email.com"},{id:2,name:"João Santos",email:"joao@email.com"},{id:3,name:"Maria Oliveira",email:"maria@email.com"},{id:4,name:"Pedro Costa",email:"pedro@email.com"},{id:5,name:"Carla Souza",email:"carla@email.com"}],l=q({resolver:Z(me),defaultValues:{name:"",subject:"",description:"",schedule:"",room:"",capacity:30,color:"blue",grade:"",semester:"",startDate:"",endDate:""}}),L=async a=>{if(!j){I({variant:"destructive",title:"Erro de autenticação",description:"Você precisa estar logado para criar uma turma."});return}T(!0),M(null);try{w.info("Iniciando criação de turma",{teacherId:j.id,className:a.name,subject:a.subject});const{data:s,error:S}=await Y.from("classes").insert([{name:a.name,subject:a.subject,description:a.description,schedule:a.schedule,room:a.room,capacity:a.capacity,color:a.color,grade:a.grade,semester:a.semester,start_date:a.startDate,end_date:a.endDate,status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(S)throw w.error("Erro ao criar turma no banco",{error:S.message,teacherId:j.id}),S;w.info("Turma criada com sucesso",{classId:s.id,className:s.name}),I({title:"✅ Turma criada com sucesso!",description:`A turma "${a.name}" foi criada e está pronta para receber alunos.`}),y("/dashboard/classes")}catch(s){w.error("Erro ao criar turma",{error:s.message,teacherId:j.id}),M(s.message),I({variant:"destructive",title:"❌ Erro ao criar turma",description:s.message||"Não foi possível criar a turma. Verifique sua conexão e tente novamente."})}finally{T(!1)}},P=a=>{x.find(s=>s.id===a.id)||E([...x,a])},_=a=>{E(x.filter(s=>s.id!==a))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:e.jsxs("div",{className:"w-full space-y-8 p-6",children:[e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>y("/dashboard/classes"),className:"text-white hover:bg-white/20 h-10 w-10",disabled:i,children:e.jsx(ne,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Nova Turma"}),e.jsx("p",{className:"text-purple-100 text-lg",children:"Crie uma nova turma e comece a ensinar"})]})]})}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 h-32 bg-white/5 rounded-full blur-2xl"})]}),V&&e.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs(ie,{variant:"destructive",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx(le,{children:V})]})}),e.jsx(G,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(L),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(g,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-white"})}),"Informações Básicas"]}),e.jsx(f,{children:"Defina as informações principais da turma"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx(n,{control:l.control,name:"name",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Nome da Turma"}),e.jsx(c,{children:e.jsx(u,{placeholder:"Ex: Matemática 9A",...a,disabled:i})}),e.jsx(d,{})]})}),e.jsx(n,{control:l.control,name:"subject",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Matéria"}),e.jsxs(D,{onValueChange:a.onChange,defaultValue:a.value,disabled:i,children:[e.jsx(c,{children:e.jsx(A,{children:e.jsx(k,{placeholder:"Selecione a matéria"})})}),e.jsxs(F,{children:[e.jsx(r,{value:"matematica",children:"Matemática"}),e.jsx(r,{value:"portugues",children:"Português"}),e.jsx(r,{value:"ciencias",children:"Ciências"}),e.jsx(r,{value:"historia",children:"História"}),e.jsx(r,{value:"geografia",children:"Geografia"}),e.jsx(r,{value:"fisica",children:"Física"}),e.jsx(r,{value:"quimica",children:"Química"}),e.jsx(r,{value:"biologia",children:"Biologia"}),e.jsx(r,{value:"ingles",children:"Inglês"}),e.jsx(r,{value:"educacao_fisica",children:"Educação Física"}),e.jsx(r,{value:"artes",children:"Artes"})]})]}),e.jsx(d,{})]})}),e.jsx(n,{control:l.control,name:"description",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Descrição (Opcional)"}),e.jsx(c,{children:e.jsx(J,{placeholder:"Descreva os objetivos e conteúdo da turma...",className:"min-h-[100px]",...a,disabled:i})}),e.jsx(d,{})]})})]})]})}),e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(g,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-4 h-4 text-white"})}),"Horários e Datas"]}),e.jsx(f,{children:"Configure quando a turma acontecerá"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx(n,{control:l.control,name:"schedule",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Horário"}),e.jsx(c,{children:e.jsx(u,{placeholder:"Ex: Segunda e Quarta, 14:00 - 15:30",...a,disabled:i})}),e.jsx(B,{children:"Descreva os dias da semana e horários das aulas"}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:l.control,name:"startDate",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Data de Início"}),e.jsx(c,{children:e.jsx(u,{type:"date",...a,disabled:i})}),e.jsx(d,{})]})}),e.jsx(n,{control:l.control,name:"endDate",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Data de Término"}),e.jsx(c,{children:e.jsx(u,{type:"date",...a,disabled:i})}),e.jsx(d,{})]})})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(g,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"w-4 h-4 text-white"})}),"Configurações da Turma"]}),e.jsx(f,{children:"Defina série, capacidade e outras configurações"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:l.control,name:"grade",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Série"}),e.jsxs(D,{onValueChange:a.onChange,defaultValue:a.value,disabled:i,children:[e.jsx(c,{children:e.jsx(A,{children:e.jsx(k,{placeholder:"Série"})})}),e.jsxs(F,{children:[e.jsx(r,{value:"6ano",children:"6º Ano"}),e.jsx(r,{value:"7ano",children:"7º Ano"}),e.jsx(r,{value:"8ano",children:"8º Ano"}),e.jsx(r,{value:"9ano",children:"9º Ano"}),e.jsx(r,{value:"1medio",children:"1º Médio"}),e.jsx(r,{value:"2medio",children:"2º Médio"}),e.jsx(r,{value:"3medio",children:"3º Médio"})]})]}),e.jsx(d,{})]})}),e.jsx(n,{control:l.control,name:"semester",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Semestre"}),e.jsxs(D,{onValueChange:a.onChange,defaultValue:a.value,disabled:i,children:[e.jsx(c,{children:e.jsx(A,{children:e.jsx(k,{placeholder:"Semestre"})})}),e.jsxs(F,{children:[e.jsx(r,{value:"1",children:"1º Semestre"}),e.jsx(r,{value:"2",children:"2º Semestre"})]})]}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:l.control,name:"capacity",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Capacidade"}),e.jsx(c,{children:e.jsx(u,{type:"number",min:"1",max:"100",...a,onChange:s=>a.onChange(parseInt(s.target.value)),disabled:i})}),e.jsx(B,{children:"Número máximo de alunos"}),e.jsx(d,{})]})}),e.jsx(n,{control:l.control,name:"room",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Sala (Opcional)"}),e.jsx(c,{children:e.jsx(u,{placeholder:"Ex: Sala 101",...a,disabled:i})}),e.jsx(d,{})]})})]}),e.jsx(n,{control:l.control,name:"color",render:({field:a})=>e.jsxs(o,{children:[e.jsx(t,{children:"Cor da Turma"}),e.jsx(c,{children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:z.map(s=>e.jsx("button",{type:"button",onClick:()=>a.onChange(s.value),disabled:i,className:`
                                      relative h-12 rounded-lg border-2 transition-all duration-200
                                      ${s.class}
                                      ${a.value===s.value?"border-white shadow-lg scale-105":"border-transparent hover:scale-105"}
                                      ${i?"opacity-50 cursor-not-allowed":""}
                                    `,title:s.name,children:a.value===s.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})},s.value))})}),e.jsx(d,{})]})})]})]})}),e.jsx(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(g,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(K,{className:"w-4 h-4 text-white"})}),"Alunos (Opcional)"]}),e.jsx(f,{children:"Adicione alunos à turma agora ou faça isso depois"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{children:["Alunos Selecionados (",x.length,")"]}),x.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(a=>e.jsxs(re,{variant:"secondary",className:"flex items-center gap-1",children:[a.name,e.jsx("button",{type:"button",onClick:()=>_(a.id),disabled:i,className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 disabled:opacity-50",children:e.jsx(X,{className:"w-3 h-3"})})]},a.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum aluno selecionado"})]}),e.jsx(ae,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Alunos Disponíveis"}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:H.filter(a=>!x.find(s=>s.id===a.id)).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.email})]}),e.jsxs(p,{type:"button",size:"sm",variant:"outline",onClick:()=>P(a),disabled:i,children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"Adicionar"]})]},a.id))})]})]})]})})]})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-end gap-4 pt-6 bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 shadow-lg",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>y("/dashboard/classes"),disabled:i,className:"bg-white/70 backdrop-blur-sm hover:bg-white/80",children:"Cancelar"}),e.jsx(p,{type:"submit",disabled:i,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white min-w-[140px] shadow-lg hover:shadow-xl transition-all duration-300",children:i?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Criar Turma"]})})]})]})})]})})};export{we as default};
