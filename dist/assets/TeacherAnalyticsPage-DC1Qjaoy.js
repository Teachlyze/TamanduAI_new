import{u as Ge,r as l,j as e,k as ie,U as H,ag as ne,A as Pe,T as Q,s as C,aq as oe}from"./main-NgjJy_CG.js";import{P as c}from"./PremiumCard-BGO_It48.js";import{P as ce}from"./PremiumButton-DDGOGflQ.js";import{E as M}from"./EmptyState-Cb7n_MKP.js";import Be from"./jspdf.es.min-Cg75XMhJ.js";import"./jspdf.plugin.autotable-DaH8ixQg.js";import{u as w,w as Le}from"./xlsx-BudockZv.js";import{D as me}from"./download-BtFddqD_.js";import{T as Ee}from"./target-DP0td9-H.js";import{R as T,T as D}from"./CategoricalChart-CdGB3_qT.js";import{B as J,a as $}from"./BarChart-Dt144RhT.js";import{C as E,X as F,Y as G}from"./CartesianChart-DTVEiWNB.js";import{L as P}from"./Legend-Bzn9_M0A.js";import{P as Fe,a as Ke,C as Re}from"./PieChart-CZsaPU4p.js";import{L as ue,a as Z}from"./LineChart-eca73oX5.js";import"./typeof-QjJsDpFa.js";import"./index-D_P3mdcN.js";const xe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],rt=()=>{const{user:z}=Ge(),[Ie,V]=l.useState(!0),[f,he]=l.useState([]),[b,ge]=l.useState([]),[v,be]=l.useState([]),[N,pe]=l.useState([]),[ee,je]=l.useState([]),[p,te]=l.useState(""),[B,ve]=l.useState(""),[g,se]=l.useState(""),[S,fe]=l.useState(""),[K,Ne]=l.useState(30),[_,we]=l.useState(null),[y,Se]=l.useState(null),[Y,_e]=l.useState(""),[q,ye]=l.useState(""),[W,Ae]=l.useState("");l.useEffect(()=>{(async()=>{if(!z?.id)return;V(!0);const s=new Date,a=new Date;a.setDate(a.getDate()-K),we(a),Se(s);try{const{data:r}=await C.from("classes").select("id, name, created_by").eq("created_by",z.id).eq("is_active",!0);he(r||[]);const d=(r||[]).map(m=>m.id);if(d.length===0){V(!1);return}const{data:u}=await C.from("class_members").select("class_id, user_id").in("class_id",d).eq("role","student");if(u&&u.length>0){const m=[...new Set(u.map(O=>O.user_id))],{data:Te}=await C.from("profiles").select("id, full_name, email").in("id",m);u.forEach(O=>{O.user=Te?.find(De=>De.id===O.user_id)})}ge(u||[]);const{data:i}=await C.from("activity_class_assignments").select("class_id, activity:activities(id, title, type, max_grade, created_at)").in("class_id",d),h=(i||[]).map(m=>({...m.activity,class_id:m.class_id})).filter(Boolean);be(h);const o=h.map(m=>m.id);if(o.length>0){const{data:m}=await C.from("submissions").select("id, activity_id, student_id, grade, status, submitted_at, graded_at").in("activity_id",o);pe(m||[])}const j=[...new Set((u||[]).map(m=>m.user_id))];if(j.length>0){const{data:m}=await C.from("xp_log").select("user_id, xp, source, created_at").in("user_id",j);je(m||[])}}finally{V(!1)}})()},[z?.id,K]);const A=l.useMemo(()=>{const t=new Set;return b.filter(s=>t.has(s.user_id)?!1:(t.add(s.user_id),!0))},[b]),x=l.useMemo(()=>!_||!y?N:N.filter(t=>{if(!t.submitted_at)return!1;const s=new Date(t.submitted_at);return s>=_&&s<=y}),[N,_,y]),R=l.useMemo(()=>!_||!y?v:v.filter(t=>{if(!t.created_at)return!0;const s=new Date(t.created_at);return s>=_&&s<=y}),[v,_,y]),n=l.useMemo(()=>{const t=new Set(b.map(o=>o.user_id)).size,s=R.length,a=x.length,r=x.filter(o=>o.status==="graded").length,d=r>0?x.filter(o=>o.grade!=null).reduce((o,j)=>o+(j.grade||0),0)/r:0,u=x.filter(o=>{const j=R.find(m=>m.id===o.activity_id);return!j?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)<=new Date(j.due_date)}).length,i=x.filter(o=>{const j=R.find(m=>m.id===o.activity_id);return!j?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)>new Date(j.due_date)}).length,h=s>0&&t>0?(a/(s*t)*100).toFixed(1):0;return{totalStudents:t,totalActivities:s,totalSubmissions:a,gradedSubmissions:r,avgGrade:d.toFixed(1),onTime:u,late:i,completionRate:h}},[b,R,x]),I=l.useMemo(()=>{const t={};return b.forEach(s=>{const a=N.filter(i=>i.student_id===s.user_id),r=a.filter(i=>i.grade!=null),d=r.length>0?r.reduce((i,h)=>i+(h.grade||0),0)/r.length:0,u=ee.filter(i=>i.user_id===s.user_id).reduce((i,h)=>i+(h.xp||0),0);t[s.user_id]={name:s.user?.full_name||"Aluno",avgGrade:d,totalSubmissions:a.length,xp:u}}),Object.values(t).sort((s,a)=>a.avgGrade-s.avgGrade).slice(0,10)},[b,N,ee]),ae=l.useMemo(()=>{const t=new Map;return b.forEach(s=>t.set(s.user_id,s)),t},[b]),k=l.useMemo(()=>{const t=new Map;return f.forEach(s=>t.set(s.id,s)),t},[f]),X=l.useMemo(()=>f.map(t=>{const s=b.filter(i=>i.class_id===t.id),a=v.filter(i=>i.class_id===t.id);s.map(i=>i.user_id);const r=N.filter(i=>{const h=v.find(o=>o.id===i.activity_id);return h&&h.class_id===t.id}),d=r.filter(i=>i.grade!=null),u=d.length>0?d.reduce((i,h)=>i+(h.grade||0),0)/d.length:0;return{name:t.name,students:s.length,activities:a.length,submissions:r.length,avgGrade:u}}),[f,b,v,N]),U=l.useMemo(()=>{const t=v.reduce((s,a)=>(s[a.type]=(s[a.type]||0)+1,s),{});return Object.entries(t).map(([s,a])=>({name:s==="assignment"?"Tarefa":s==="quiz"?"Quiz":"Projeto",value:a}))},[v]),re=l.useMemo(()=>{const t=x.reduce((s,a)=>{if(!a.submitted_at)return s;const r=new Date(a.submitted_at).toLocaleDateString("pt-BR");return s[r]=(s[r]||0)+1,s},{});return Object.entries(t).map(([s,a])=>({date:s,count:a})).sort((s,a)=>new Date(s.date.split("/").reverse().join("-"))-new Date(a.date.split("/").reverse().join("-"))).slice(-30)},[x]),de=l.useMemo(()=>{const t=Array(10).fill(0);return x.filter(s=>s.grade!=null).forEach(s=>{const a=s.grade||0,r=Math.min(Math.floor(a/10),9);t[r]++}),t.map((s,a)=>({range:`${a*10}-${(a+1)*10}`,count:s}))},[x]),L=l.useMemo(()=>{const t=x.filter(a=>a.grade!=null).map(a=>a.grade).sort((a,r)=>a-r);if(t.length===0)return{p10:0,p50:0,p90:0,p25:0,p75:0};const s=a=>{const r=Math.ceil(a/100*t.length)-1;return t[Math.max(0,r)]||0};return{p10:s(10),p25:s(25),p50:s(50),p75:s(75),p90:s(90)}},[x]),le=l.useMemo(()=>{const t={};return x.forEach(s=>{if(!s.submitted_at)return;const a=new Date(s.submitted_at),r=a.getFullYear(),d=ke(a),u=`${r}-W${d}`;t[u]||(t[u]={count:0,grades:[]}),t[u].count++,s.grade!=null&&t[u].grades.push(s.grade)}),Object.entries(t).map(([s,a])=>({week:s,count:a.count,avgGrade:a.grades.length>0?(a.grades.reduce((r,d)=>r+d,0)/a.grades.length).toFixed(1):0})).sort((s,a)=>s.week.localeCompare(a.week))},[x]),ke=t=>{const s=new Date(t);s.setHours(0,0,0,0),s.setDate(s.getDate()+4-(s.getDay()||7));const a=new Date(s.getFullYear(),0,1);return Math.ceil(((s-a)/864e5+1)/7)},Ce=()=>{const t=new Be;t.setFontSize(18),t.text("Analytics Avançado - Professor",14,20),t.setFontSize(12),t.text(`Período: Últimos ${K} dias`,14,30),t.text("Métricas Gerais:",14,45);const s=[["Métrica","Valor"],["Total de Alunos",n.totalStudents],["Total de Atividades",n.totalActivities],["Total de Submissões",n.totalSubmissions],["Média Geral",n.avgGrade],["Taxa de Conclusão",`${n.completionRate}%`],["On-time",n.onTime],["Atrasadas",n.late]];t.autoTable({startY:50,head:[s[0]],body:s.slice(1)});const a=t.lastAutoTable.finalY+15;t.text("Top 10 Alunos:",14,a);const r=I.slice(0,10).map(d=>[ae.get(d.studentId)?.full_name||"N/A",d.avgGrade,d.submissions,d.xp]);t.autoTable({startY:a+5,head:[["Nome","Média","Submissões","XP"]],body:r}),t.save("analytics_professor.pdf"),oe({title:"Sucesso",description:"Relatório exportado em PDF!"})},Me=()=>{const t=w.json_to_sheet([{Métrica:"Total de Alunos",Valor:n.totalStudents},{Métrica:"Total de Atividades",Valor:n.totalActivities},{Métrica:"Total de Submissões",Valor:n.totalSubmissions},{Métrica:"Média Geral",Valor:n.avgGrade},{Métrica:"Taxa de Conclusão",Valor:`${n.completionRate}%`},{Métrica:"On-time",Valor:n.onTime},{Métrica:"Atrasadas",Valor:n.late}]),s=w.json_to_sheet(I.slice(0,20).map(d=>({Nome:ae.get(d.studentId)?.full_name||"N/A",Média:d.avgGrade,Submissões:d.submissions,XP:d.xp}))),a=w.json_to_sheet(X.map(d=>({Turma:d.name,Alunos:d.students,Atividades:d.activities,Submissões:d.submissions,Média:d.avgGrade}))),r=w.book_new();w.book_append_sheet(r,t,"Métricas Gerais"),w.book_append_sheet(r,s,"Top Alunos"),w.book_append_sheet(r,a,"Comparação Turmas"),Le(r,"analytics_professor.xlsx"),oe({title:"Sucesso",description:"Relatório exportado em Excel!"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 p-8 rounded-2xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ie,{className:"w-6 h-6"})," Analytics Avançado"]}),e.jsx("p",{className:"text-slate-900 dark:text-white/90",children:"Métricas detalhadas e comparações"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ce,{onClick:Ce,variant:"secondary",className:"whitespace-nowrap inline-flex items-center gap-2 min-w-fit",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"PDF"})]}),e.jsxs(ce,{onClick:Me,variant:"secondary",className:"whitespace-nowrap inline-flex items-center gap-2 min-w-fit",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"Excel"})]})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Período:"}),[7,15,30,90,180,365].map(t=>e.jsx("button",{onClick:()=>Ne(t),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${K===t?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:t===7?"7 dias":t===15?"15 dias":t===30?"30 dias":t===90?"3 meses":t===180?"6 meses":"1 ano"},t))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Taxa de Conclusão"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.completionRate,"%"]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"On-time / Late"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:n.onTime}),e.jsx("div",{className:"text-muted-foreground",children:"/"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:n.late})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Mediana (p50)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.p50})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Percentis"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["p10: ",e.jsx("strong",{children:L.p10})]}),e.jsxs("div",{children:["p25: ",e.jsx("strong",{children:L.p25})]}),e.jsxs("div",{children:["p75: ",e.jsx("strong",{children:L.p75})]}),e.jsxs("div",{children:["p90: ",e.jsx("strong",{children:L.p90})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-2xl font-bold",children:n.totalStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Alunos"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ne,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-2xl font-bold",children:n.totalActivities}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Atividades"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Ee,{className:"w-8 h-8 mx-auto mb-2 text-amber-600"}),e.jsx("div",{className:"text-2xl font-bold",children:n.totalSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Submissões"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Pe,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold",children:n.gradedSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avaliadas"})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-rose-600"}),e.jsx("div",{className:"text-2xl font-bold",children:n.avgGrade}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nota Média"})]})})]}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Top 10 Alunos - Desempenho"}),I.length===0?e.jsx(M,{icon:H,title:"Sem dados",description:"Aguardando submissões avaliadas."}):e.jsx(T,{width:"100%",height:300,children:e.jsxs(J,{data:I,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"avgGrade",fill:"#3b82f6",name:"Nota Média"})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Turmas"}),X.length===0?e.jsx(M,{icon:H,title:"Sem turmas"}):e.jsx(T,{width:"100%",height:300,children:e.jsxs(J,{data:X,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name"}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"avgGrade",fill:"#10b981",name:"Nota Média"}),e.jsx($,{dataKey:"submissions",fill:"#f59e0b",name:"Submissões"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Atividades por Tipo"}),U.length===0?e.jsx(M,{icon:ne,title:"Sem atividades"}):e.jsx(T,{width:"100%",height:250,children:e.jsxs(Fe,{children:[e.jsx(Ke,{data:U,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:U.map((t,s)=>e.jsx(Re,{fill:xe[s%xe.length]},`cell-${s}`))}),e.jsx(D,{}),e.jsx(P,{})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Submissões (últimos 30 dias)"}),re.length===0?e.jsx(M,{icon:Q,title:"Sem dados"}):e.jsx(T,{width:"100%",height:250,children:e.jsxs(ue,{data:re,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx(Z,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",name:"Submissões",strokeWidth:2})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Distribuição de Notas"}),de.every(t=>t.count===0)?e.jsx(M,{icon:ie,title:"Sem notas",description:"Aguardando avaliações."}):e.jsx(T,{width:"100%",height:250,children:e.jsxs(J,{data:de,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"range"}),e.jsx(G,{}),e.jsx(D,{}),e.jsx(P,{}),e.jsx($,{dataKey:"count",fill:"#8b5cf6",name:"Quantidade"})]})})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Tendências Semanais"}),le.length===0?e.jsx(M,{icon:Q,title:"Sem dados"}):e.jsx(T,{width:"100%",height:250,children:e.jsxs(ue,{data:le,children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"week",angle:-45,textAnchor:"end",height:80}),e.jsx(G,{yAxisId:"left"}),e.jsx(G,{yAxisId:"right",orientation:"right"}),e.jsx(D,{}),e.jsx(P,{}),e.jsx(Z,{yAxisId:"left",type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Submissões",strokeWidth:2}),e.jsx(Z,{yAxisId:"right",type:"monotone",dataKey:"avgGrade",stroke:"#10b981",name:"Nota Média",strokeWidth:2})]})})]})})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-border",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Comparações Avançadas"}),e.jsx(c,{variant:"elevated",className:"mb-6",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Comparar Alunos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Aluno A"}),e.jsx("input",{type:"text",placeholder:"Filtrar por nome...",value:Y,onChange:t=>_e(t.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground max-h-40",value:p,onChange:t=>te(t.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno A —"}),A.filter(t=>!Y||(t.user?.full_name||"").toLowerCase().includes(Y.toLowerCase())).map(t=>e.jsx("option",{value:t.user_id,children:t.user?.full_name||"Aluno"},t.user_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Aluno B"}),e.jsx("input",{type:"text",placeholder:"Filtrar por nome...",value:q,onChange:t=>ye(t.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:B,onChange:t=>ve(t.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno B —"}),A.filter(t=>!q||(t.user?.full_name||"").toLowerCase().includes(q.toLowerCase())).map(t=>e.jsx("option",{value:t.user_id,children:t.user?.full_name||"Aluno"},t.user_id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Aluno A",p&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:A.find(t=>t.user_id===p)?.user?.full_name||"N/A"})]}),p?renderStudentMetrics(p):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione um aluno"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Aluno B",B&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:A.find(t=>t.user_id===B)?.user?.full_name||"N/A"})]}),B?renderStudentMetrics(B):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione um aluno"})]})]})]})}),e.jsx(c,{variant:"elevated",className:"mb-6",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Comparar Turmas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Turma A"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:g,onChange:t=>se(t.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma A"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Turma B"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:S,onChange:t=>fe(t.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma B"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Turma A",g&&k.get(g)?.name&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:k.get(g).name})]}),g?renderClassMetrics(g):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione uma turma"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Turma B",S&&k.get(S)?.name&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:k.get(S).name})]}),S?renderClassMetrics(S):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione uma turma"})]})]})]})}),e.jsx(c,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Comparar Aluno com Turma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Aluno"}),e.jsx("input",{type:"text",placeholder:"Filtrar por nome...",value:W,onChange:t=>Ae(t.target.value),className:"w-full px-3 py-2 rounded-t-lg border border-b-0 border-border bg-white dark:bg-slate-900 text-foreground"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-b-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:p,onChange:t=>te(t.target.value),size:"5",children:[e.jsx("option",{value:"",children:"— Selecione Aluno —"}),A.filter(t=>!W||(t.user?.full_name||"").toLowerCase().includes(W.toLowerCase())).map(t=>e.jsx("option",{value:t.user_id,children:t.user?.full_name||"Aluno"},t.user_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Turma"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg border border-border bg-white dark:bg-slate-900 text-foreground",value:g,onChange:t=>se(t.target.value),children:[e.jsx("option",{value:"",children:"— Selecione Turma —"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Aluno",p&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:A.find(t=>t.user_id===p)?.user?.full_name||"N/A"})]}),p?renderStudentMetrics(p):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione um aluno"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"font-semibold mb-3 pb-2 border-b border-border text-slate-900 dark:text-white",children:["Turma",g&&k.get(g)?.name&&e.jsx("div",{className:"text-sm font-normal text-slate-700 dark:text-slate-300 mt-1",children:k.get(g).name})]}),g?renderClassMetrics(g):e.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Selecione uma turma"})]})]})]})})]})]})};export{rt as default};
