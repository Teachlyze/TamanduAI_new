import{f as E,u as v,g as L,r as l,s as m,af as q,U as P,ag as R,T as U,k as $,B as g,d as z,j as e,m as t,$ as b,l as F,au as O,av as G,ae as Q,aw as V,ax as f,a0 as J,C as K,bm as W,bl as X,bP as Y,aj as Z,bQ as ee}from"./main-NgjJy_CG.js";import{B as ae}from"./badge-DS8upoqS.js";import{G as te}from"./graduation-cap-AfoLybfB.js";import{C as se}from"./clipboard-check-CAgKAHy3.js";import{M as re}from"./message-circle-D1KOXgTu.js";import{B as ie}from"./bot-C1f7hJe0.js";import{T as le}from"./target-DP0td9-H.js";import{C as oe}from"./chevron-left-CCTbow4A.js";import{U as p}from"./user-CtDOwJP2.js";import{B as ne}from"./bell-CBDdgVV_.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],ce=E("file-pen",de),me=({collapsed:s,setCollapsed:h})=>{const{user:r,signOut:w}=v(),o=L(),[n,j]=l.useState({classes:0,students:0,activities:0}),[x,N]=l.useState(0),[y,k]=l.useState(new Date),[u,C]=l.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);l.useEffect(()=>{r&&(S(),H())},[r]),l.useEffect(()=>{const a=setInterval(()=>{k(new Date)},6e4);return()=>clearInterval(a)},[]);const T=()=>{const a=!u;C(a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},M=a=>new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}).format(a).replace(","," •"),S=async()=>{try{const{count:a}=await m.from("classes").select("*",{count:"exact",head:!0}).eq("created_by",r.id),{count:d}=await m.from("activities").select("*",{count:"exact",head:!0}).eq("created_by",r.id),{data:c}=await m.from("classes").select("id").eq("created_by",r.id);let i=0;if(c&&c.length>0){const D=c.map(B=>B.id),{count:_}=await m.from("class_members").select("*",{count:"exact",head:!0}).in("class_id",D).eq("role","student");i=_||0}j({classes:a||0,students:i,activities:d||0})}catch(a){console.error("Erro ao carregar stats:",a)}},H=async()=>{try{const{data:a,error:d}=await m.from("notifications").select("id").eq("user_id",r.id).eq("is_read",!1).range(0,499);if(d)throw d;N(a?.length||0)}catch(a){console.error("Erro ao carregar notificações:",a)}},I=[{label:"Dashboard",icon:q,path:"/dashboard",gradient:"from-indigo-500 to-purple-500"},{label:"Turmas",icon:P,path:"/dashboard/classes",gradient:"from-blue-500 to-cyan-500",badge:n.classes},{label:"Atividades",icon:R,path:"/dashboard/activities",gradient:"from-purple-500 to-pink-500",badge:n.activities},{label:"Alunos",icon:te,path:"/dashboard/students",gradient:"from-green-500 to-emerald-500",badge:n.students},{label:"Ranking",icon:U,path:"/dashboard/ranking",gradient:"from-yellow-500 to-amber-500"},{label:"Analytics Avançado",icon:$,path:"/dashboard/analytics-advanced",gradient:"from-indigo-500 via-purple-500 to-pink-500"},{label:"Banco de Questões",icon:g,path:"/dashboard/question-bank",gradient:"from-purple-500 to-indigo-500",badge:"Novo"},{label:"Relatórios",icon:se,path:"/dashboard/reports",gradient:"from-teal-500 to-cyan-500"},{label:"Agenda",icon:z,path:"/dashboard/calendar",gradient:"from-violet-500 to-purple-500"},{label:"Chatbot IA",icon:re,path:"/dashboard/chatbot",gradient:"from-indigo-500 to-blue-500",badge:"24/7"},{label:"Chatbot (Config.)",icon:ie,path:"/dashboard/chatbot/settings",gradient:"from-fuchsia-500 to-purple-500"},{label:"Rascunhos",icon:ce,path:"/dashboard/drafts",gradient:"from-gray-500 to-slate-500"},{label:"Missões",icon:le,path:"/dashboard/missions",gradient:"from-orange-500 to-red-500"}],A=async()=>{await w(),o("/login")};return e.jsx(t.aside,{initial:{x:-300},animate:{x:0,width:s?80:280},transition:{type:"spring",damping:20},className:"fixed left-0 top-0 h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900/30 dark:via-teal-900/30 dark:to-cyan-900/30 border-r border-emerald-200/50 dark:border-emerald-700/50 backdrop-blur-xl z-40 shadow-xl",children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{mode:"wait",children:!s&&e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(g,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent text-white hover:opacity-90",children:"TamanduAI"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Professor"})]})]})}),e.jsx(t.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!s),className:"p-2 rounded-lg hover:bg-muted transition-colors",children:s?e.jsx(F,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]}),!s&&e.jsxs(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-2 px-2",children:[e.jsxs(O,{children:[e.jsx(G,{asChild:!0,children:e.jsxs(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-muted transition-colors text-sm",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center",children:e.jsx(p,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs truncate max-w-[80px]",children:r?.user_metadata?.name?.split(" ")[0]||"Perfil"}),e.jsx(Q,{className:"w-3 h-3"})]})}),e.jsxs(V,{align:"start",className:"w-48",children:[e.jsxs(f,{onClick:()=>o("/profile/edit"),children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Editar Perfil"]}),e.jsxs(f,{onClick:()=>o("/dashboard/settings"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Configurações"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-muted/50 text-xs text-muted-foreground",children:[e.jsx(K,{className:"w-3 h-3"}),e.jsx("span",{children:M(y)})]}),e.jsx(t.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:T,className:"p-1.5 rounded-lg hover:bg-muted transition-colors",title:u?"Modo claro":"Modo escuro",children:u?e.jsx(W,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})}),e.jsxs(t.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o("/dashboard/notifications"),className:"p-1.5 rounded-lg hover:bg-muted transition-colors relative",title:"Notificações",children:[e.jsx(ne,{className:"w-4 h-4"}),x>0&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-[10px] font-bold",children:x>9?"9+":x})]})]})]})]}),!s&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"24px 24px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold text-sm truncate",children:["Prof. ",r?.user_metadata?.name?.split(" ")[0]||"Professor"]}),e.jsx("p",{className:"text-xs text-white/80 truncate",children:r?.email})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs(t.div,{whileHover:{scale:1.05},className:"text-center p-2 rounded-lg bg-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-300",children:n.classes}),e.jsx("div",{className:"text-xs text-white/80",children:"Turmas"})]}),e.jsxs(t.div,{whileHover:{scale:1.05},className:"text-center p-2 rounded-lg bg-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"text-lg font-bold text-blue-300",children:n.students}),e.jsx("div",{className:"text-xs text-white/80",children:"Alunos"})]}),e.jsxs(t.div,{whileHover:{scale:1.05},className:"text-center p-2 rounded-lg bg-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"text-lg font-bold text-green-300",children:n.activities}),e.jsx("div",{className:"text-xs text-white/80",children:"Atividades"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o("/dashboard/activities/new"),className:"flex-1 px-2 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",title:"Nova Atividade",children:"+ Atividade"}),e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o("/dashboard/classes/new"),className:"flex-1 px-2 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-medium transition-colors",title:"Nova Turma",children:"+ Turma"})]})]})]}),e.jsx("nav",{className:"flex-1 space-y-0.5 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-emerald-300 dark:scrollbar-thumb-emerald-700 scrollbar-track-transparent",children:I.map((a,d)=>{const c=a.icon;return e.jsx(Y,{to:a.path,end:a.path==="/dashboard",className:({isActive:i})=>`group flex items-center gap-3 px-3 py-2 rounded-xl transition-all duration-200 ${i?"bg-gradient-to-r "+a.gradient+" text-white shadow-lg scale-105":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,children:({isActive:i})=>e.jsxs(e.Fragment,{children:[e.jsx(t.div,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},className:`p-2 rounded-lg ${i?"bg-white/20":"bg-muted"}`,children:e.jsx(c,{className:"w-5 h-5"})}),e.jsx(b,{mode:"wait",children:!s&&e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:a.label}),a.badge&&e.jsx(ae,{className:`${i?"bg-white/20 text-white":"bg-primary/10 text-primary"} text-xs`,children:a.badge})]})})]})},a.path)})}),e.jsx("div",{className:"pt-3 border-t border-border/50",children:e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-muted-foreground hover:text-red-600 transition-all ${s?"justify-center":""}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(Z,{className:"w-5 h-5"})}),!s&&e.jsx("span",{className:"font-medium",children:"Sair"})]})})]})})},Ne=()=>{const{user:s}=v(),[h,r]=l.useState(!1);return s?.id?e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900/20 dark:via-teal-900/20 dark:to-cyan-900/20",children:[e.jsx(me,{collapsed:h,setCollapsed:r}),e.jsx(t.main,{animate:{marginLeft:h?0:280},transition:{type:"spring",damping:20},className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"min-h-full p-6",children:e.jsx(ee,{})})})]}):null};export{Ne as default};
