import{g as E,r as x,j as e,m as d,i as o,B as A,K as n,aM as j,a2 as u,A as D,w as r}from"./main-7VZoQpWp.js";import{P as h}from"./PremiumCard-BlYsE6j7.js";import{P as M}from"./PremiumButton-BLQFs7s4.js";import{B as T}from"./badge-k0pzqXLv.js";import{q as S}from"./questionBankService-LvI5VzqE.js";import{A as P}from"./arrow-left-CLPezyTZ.js";import{T as B}from"./target-DIUEpcX7.js";import{P as v}from"./plus-DZCtRGwr.js";import{S as F}from"./save-CHgFZ9o3.js";function X(){const m=E(),[p,g]=x.useState(!1),[a,i]=x.useState({title:"",question_text:"",question_type:"multiple_choice",options:["","","",""],correct_answer:"",explanation:"",difficulty:3,subject:"",topic:"",tags:[],reference:"",visibility:"public",points:10}),[c,b]=x.useState(""),N=async t=>{if(t.preventDefault(),!a.title.trim()){r.error("T√≠tulo √© obrigat√≥rio");return}if(!a.question_text.trim()){r.error("Enunciado √© obrigat√≥rio");return}if(!a.subject.trim()){r.error("Mat√©ria √© obrigat√≥ria");return}if(a.question_type==="multiple_choice"){if(a.options.filter(l=>l.trim()).length<2){r.error("Adicione pelo menos 2 alternativas");return}if(!a.correct_answer.trim()){r.error("Selecione a resposta correta");return}}g(!0);try{const s=await S.createQuestion(a);s.success?(r.success("Quest√£o enviada para aprova√ß√£o!"),m("/dashboard/question-bank")):r.error(s.error||"Erro ao criar quest√£o")}catch(s){console.error("Erro ao criar quest√£o:",s),r.error("Erro ao criar quest√£o")}finally{g(!1)}},w=()=>{i({...a,options:[...a.options,""]})},y=t=>{const s=a.options.filter((l,_)=>_!==t);i({...a,options:s})},k=(t,s)=>{const l=[...a.options];l[t]=s,i({...a,options:l})},f=()=>{c.trim()&&!a.tags.includes(c.trim())&&(i({...a,tags:[...a.tags,c.trim()]}),b(""))},C=t=>{i({...a,tags:a.tags.filter(s=>s!==t)})},q=t=>({1:"Muito F√°cil",2:"F√°cil",3:"M√©dio",4:"Dif√≠cil",5:"Muito Dif√≠cil"})[t]||"M√©dio";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-8 shadow-xl",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs(o,{variant:"ghost",onClick:()=>m("/dashboard/question-bank"),className:"text-white hover:bg-white/20 whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Voltar"})]})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"üìù Nova Quest√£o"}),e.jsx("p",{className:"text-blue-100",children:"Contribua com o banco de quest√µes e ganhe at√© 25% de desconto"})]})}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-purple-600"}),"Informa√ß√µes B√°sicas"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"T√≠tulo da Quest√£o *"}),e.jsx(n,{value:a.title,onChange:t=>i({...a,title:t.target.value}),placeholder:"Ex: C√°lculo de √Årea do Tri√¢ngulo",className:"bg-white dark:bg-slate-900 text-foreground",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Enunciado *"}),e.jsx(j,{value:a.question_text,onChange:t=>i({...a,question_text:t.target.value}),placeholder:"Digite o enunciado completo da quest√£o...",rows:4,className:"bg-white dark:bg-slate-900 text-foreground",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mat√©ria *"}),e.jsx(n,{value:a.subject,onChange:t=>i({...a,subject:t.target.value}),placeholder:"Ex: Matem√°tica",className:"bg-white dark:bg-slate-900 text-foreground",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"T√≥pico"}),e.jsx(n,{value:a.topic,onChange:t=>i({...a,topic:t.target.value}),placeholder:"Ex: Geometria Plana",className:"bg-white dark:bg-slate-900 text-foreground"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Quest√£o"}),e.jsxs("select",{value:a.question_type,onChange:t=>i({...a,question_type:t.target.value}),className:"w-full px-4 py-2 rounded-lg border bg-white dark:bg-slate-900 text-foreground border-border",children:[e.jsx("option",{value:"multiple_choice",children:"M√∫ltipla Escolha"}),e.jsx("option",{value:"true_false",children:"Verdadeiro/Falso"}),e.jsx("option",{value:"open",children:"Dissertativa"})]})]})]})})}),a.question_type==="multiple_choice"&&e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-600"}),"Alternativas"]}),e.jsx("div",{className:"space-y-3",children:a.options.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"correct_answer",checked:a.correct_answer===t,onChange:()=>i({...a,correct_answer:t}),className:"w-4 h-4"}),e.jsx(n,{value:t,onChange:l=>k(s,l.target.value),placeholder:`Alternativa ${String.fromCharCode(65+s)}`,className:"flex-1 bg-white dark:bg-slate-900 text-foreground"}),a.options.length>2&&e.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(s),className:"text-red-600 hover:text-red-700",children:e.jsx(u,{className:"w-4 h-4"})})]},s))}),e.jsxs(o,{type:"button",variant:"outline",onClick:w,className:"w-full whitespace-nowrap inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-foreground border-border",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Adicionar Alternativa"})]})]})})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),"Detalhes Adicionais"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Explica√ß√£o da Resposta"}),e.jsx(j,{value:a.explanation,onChange:t=>i({...a,explanation:t.target.value}),placeholder:"Explique por que esta √© a resposta correta...",rows:3,className:"bg-white dark:bg-slate-900 text-foreground"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Dificuldade: ",q(a.difficulty)]}),e.jsx("input",{type:"range",min:"1",max:"5",value:a.difficulty,onChange:t=>i({...a,difficulty:parseInt(t.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsx("span",{children:"Muito F√°cil"}),e.jsx("span",{children:"F√°cil"}),e.jsx("span",{children:"M√©dio"}),e.jsx("span",{children:"Dif√≠cil"}),e.jsx("span",{children:"Muito Dif√≠cil"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Refer√™ncia (opcional)"}),e.jsx(n,{value:a.reference,onChange:t=>i({...a,reference:t.target.value}),placeholder:"Ex: ENEM-2023, Cap√≠tulo 5",className:"bg-white dark:bg-slate-900 text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pontos"}),e.jsx(n,{type:"number",min:"1",max:"100",value:a.points,onChange:t=>i({...a,points:parseInt(t.target.value)}),className:"bg-white dark:bg-slate-900 text-foreground"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(n,{value:c,onChange:t=>b(t.target.value),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),f()),placeholder:"Adicionar tag...",className:"flex-1 bg-white dark:bg-slate-900 text-foreground"}),e.jsxs(o,{type:"button",onClick:f,variant:"outline",className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Adicionar"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((t,s)=>e.jsxs(T,{variant:"secondary",className:"flex items-center gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>C(t),className:"hover:text-red-600",children:e.jsx(u,{className:"w-3 h-3"})})]},s))})]})]})})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(o,{type:"button",variant:"outline",onClick:()=>m("/dashboard/question-bank"),className:"flex-1 whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 text-foreground border-border",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancelar"})]}),e.jsx(M,{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white whitespace-nowrap inline-flex items-center justify-center gap-2 shadow-lg rounded-xl",children:p?e.jsx(e.Fragment,{children:"Salvando..."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"Salvar Quest√£o"})]})})]})]})})]})}export{X as default};
