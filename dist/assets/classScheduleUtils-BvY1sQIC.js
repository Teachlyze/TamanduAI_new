const D={monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6,sunday:0},H=s=>{if(!s)return null;const{weekly_schedule:u,start_date:c,end_date:n}=s;if(!u||!Array.isArray(u)||u.length===0)return null;const e=new Date,o=e.getDay(),g=e.getHours()*60+e.getMinutes();if(n){const t=new Date(n);if(t.setHours(23,59,59,999),e>t)return null}if(c){const t=new Date(c);if(t.setHours(0,0,0,0),e<t){const a=u[0],d=D[a.day],l=t.getDay();let r=(d-l+7)%7;r===0&&t>e&&(r=0);const i=new Date(t);i.setDate(t.getDate()+r);const[N,I]=a.start_time.split(":");return i.setHours(parseInt(N,10),parseInt(I,10),0,0),i}}const m=u.map(t=>({dayNum:D[t.day],startTime:t.start_time,day:t.day})).sort((t,a)=>t.dayNum-a.dayNum);for(const t of m){const[a,d]=t.startTime.split(":"),l=parseInt(a,10)*60+parseInt(d,10);if(t.dayNum===o&&l>g){const r=new Date(e);return r.setHours(parseInt(a,10),parseInt(d,10),0,0),r}else if(t.dayNum>o){const r=t.dayNum-o,i=new Date(e);return i.setDate(e.getDate()+r),i.setHours(parseInt(a,10),parseInt(d,10),0,0),i}}const f=m[0],[p,h]=f.startTime.split(":"),w=(7-o+f.dayNum)%7||7,y=new Date(e);if(y.setDate(e.getDate()+w),y.setHours(parseInt(p,10),parseInt(h,10),0,0),n){const t=new Date(n);if(t.setHours(23,59,59,999),y>t)return null}return y},S=s=>{if(!s)return"Sem aulas agendadas";const c=s-new Date,n=Math.floor(c/(1e3*60*60*24)),e=s.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});if(n===0)return`Hoje às ${e}`;if(n===1)return`Amanhã às ${e}`;if(n<7){const o=s.toLocaleDateString("pt-BR",{weekday:"long"});return`${o.charAt(0).toUpperCase()+o.slice(1)} às ${e}`}else return s.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};export{S as f,H as g};
