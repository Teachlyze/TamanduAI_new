import{u as Pe,r as d,j as e,o as Ee,U as B,k as re,a0 as ie,A as Ke,T as ne,s as _,ac as le}from"./main-Bujpyeg-.js";import{P as h}from"./PremiumCard-BaDWg06v.js";import{P as de}from"./PremiumButton-skKgx_xy.js";import{E as S}from"./EmptyState-CpVlA95H.js";import Le from"./jspdf.es.min-32gA9Cdv.js";import"./jspdf.plugin.autotable-DaH8ixQg.js";import{u as X,w as $e}from"./xlsx-DOaFAZ1S.js";import{D as ce}from"./download-EGp6uXz0.js";import{G as oe}from"./graduation-cap-Ch-mLRIV.js";import{T as Be}from"./target-BbDyQUob.js";import{R as D,T as k,L as G}from"./CategoricalChart-CY_EmT4u.js";import{B as W,a as w}from"./BarChart-8V15VaNt.js";import{C as F,X as R,Y as P}from"./CartesianChart-BIfIJjYb.js";import{P as Fe,a as Re}from"./PieChart-ERxWODQw.js";import{C as Ie}from"./PolarChart-BRCObcKw.js";import{L as ze,a as me}from"./LineChart-BnX4TOZr.js";import"./typeof-CPR7xHyo.js";import"./index-D_P3mdcN.js";const xe=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],ls=()=>{const{user:Y}=Pe(),[ue,I]=d.useState(!0),[E,he]=d.useState(null),[p,ge]=d.useState([]),[N,je]=d.useState([]),[v,pe]=d.useState([]),[g,fe]=d.useState([]),[f,ve]=d.useState([]),[H,be]=d.useState([]),[C,Ne]=d.useState(""),[A,ye]=d.useState(""),[K,_e]=d.useState(""),[L,Se]=d.useState(""),[z,we]=d.useState(30),[T,Ce]=d.useState(null),[M,Ae]=d.useState(null);d.useEffect(()=>{(async()=>{if(!Y?.id)return;I(!0);const t=new Date,a=new Date;a.setDate(a.getDate()-z),Ce(a),Ae(t);try{const{data:n}=await _.from("schools").select("id, name").eq("owner_id",Y.id).maybeSingle();if(!n){I(!1);return}he(n);const{data:c}=await _.from("classes").select("id, name, created_by, is_active").eq("school_id",n.id).eq("is_active",!0);ge(c||[]);const l=(c||[]).map(u=>u.id),i=[...new Set((c||[]).map(u=>u.created_by))];if(i.length>0){const{data:u}=await _.from("profiles").select("id, full_name").in("id",i);je(u||[])}if(l.length===0){I(!1);return}const{data:x}=await _.from("class_members").select("class_id, user_id, user:profiles(id, full_name)").in("class_id",l).eq("role","student");pe(x||[]);const{data:y}=await _.from("activity_class_assignments").select("class_id, activity:activities(id, title, type, max_grade, created_by, created_at)").in("class_id",l),r=(y||[]).map(u=>({...u.activity,class_id:u.class_id})).filter(Boolean);fe(r);const o=r.map(u=>u.id);if(o.length>0){const{data:u}=await _.from("submissions").select("id, activity_id, student_id, grade, status, submitted_at").in("activity_id",o);ve(u||[])}const b=[...new Set((x||[]).map(u=>u.user_id))];if(b.length>0){const{data:u}=await _.from("xp_log").select("user_id, xp, created_at").in("user_id",b);be(u||[])}}finally{I(!1)}})()},[Y?.id,z]);const j=d.useMemo(()=>!T||!M?f:f.filter(s=>{if(!s.submitted_at)return!1;const t=new Date(s.submitted_at);return t>=T&&t<=M}),[f,T,M]),O=d.useMemo(()=>!T||!M?g:g.filter(s=>{if(!s.created_at)return!0;const t=new Date(s.created_at);return t>=T&&t<=M}),[g,T,M]),m=d.useMemo(()=>{const s=N.length,t=p.length,a=new Set(v.map(o=>o.user_id)).size,n=O.length,c=j.length,l=j.filter(o=>o.status==="graded").length,i=l>0?j.filter(o=>o.grade!=null).reduce((o,b)=>o+(b.grade||0),0)/l:0,x=j.filter(o=>{const b=O.find(u=>u.id===o.activity_id);return!b?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)<=new Date(b.due_date)}).length,y=j.filter(o=>{const b=O.find(u=>u.id===o.activity_id);return!b?.due_date||!o.submitted_at?!1:new Date(o.submitted_at)>new Date(b.due_date)}).length,r=n>0&&a>0?(c/(n*a)*100).toFixed(1):0;return{totalTeachers:s,totalClasses:t,totalStudents:a,totalActivities:n,totalSubmissions:c,gradedSubmissions:l,avgGrade:i.toFixed(1),onTime:x,late:y,completionRate:r}},[N,p,v,O,j]),V=d.useMemo(()=>{const s=new Map;return p.forEach(t=>s.set(t.id,t)),s},[p]),q=d.useMemo(()=>{const s=new Map;return N.forEach(t=>s.set(t.id,t)),s},[N]),Te=s=>{if(!s)return null;const t=v.filter(i=>i.class_id===s).map(i=>i.user_id),a=g.filter(i=>i.class_id===s).map(i=>i.id),n=f.filter(i=>a.includes(i.activity_id)),c=n.filter(i=>i.grade!=null),l=c.length>0?c.reduce((i,x)=>i+(x.grade||0),0)/c.length:0;return{students:new Set(t).size,activities:a.length,submissions:n.length,avgGrade:Number(l.toFixed(1))}},Me=s=>{if(!s)return null;const t=p.filter(r=>r.created_by===s),a=t.map(r=>r.id),n=v.filter(r=>a.includes(r.class_id)),c=g.filter(r=>a.includes(r.class_id)),l=c.map(r=>r.id),i=f.filter(r=>l.includes(r.activity_id)),x=i.filter(r=>r.grade!=null),y=x.length>0?x.reduce((r,o)=>r+(o.grade||0),0)/x.length:0;return{classes:t.length,students:new Set(n.map(r=>r.user_id)).size,activities:c.length,submissions:i.length,avgGrade:Number(y.toFixed(1))}},Q=s=>{const t=Te(s);return t?e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Alunos:"})," ",t.students]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Atividades:"})," ",t.activities]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Submissões:"})," ",t.submissions]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nota média:"})," ",t.avgGrade]})]}):null},J=s=>{const t=Me(s);return t?e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Turmas:"})," ",t.classes]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alunos:"})," ",t.students]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Atividades:"})," ",t.activities]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Submissões:"})," ",t.submissions]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nota média:"})," ",t.avgGrade]})]}):null},Z=d.useMemo(()=>N.map(s=>{const t=p.filter(r=>r.created_by===s.id),a=t.map(r=>r.id),n=v.filter(r=>a.includes(r.class_id)),c=g.filter(r=>r.created_by===s.id),l=c.map(r=>r.id),x=f.filter(r=>l.includes(r.activity_id)).filter(r=>r.grade!=null),y=x.length>0?x.reduce((r,o)=>r+(o.grade||0),0)/x.length:0;return{name:s.full_name||"Professor",classes:t.length,students:new Set(n.map(r=>r.user_id)).size,activities:c.length,avgGrade:y}}),[N,p,v,g,f]),ee=d.useMemo(()=>p.slice(0,10).map(s=>{const t=v.filter(l=>l.class_id===s.id);g.filter(l=>l.class_id===s.id);const a=f.filter(l=>{const i=g.find(x=>x.id===l.activity_id);return i&&i.class_id===s.id}),n=a.filter(l=>l.grade!=null),c=n.length>0?n.reduce((l,i)=>l+(i.grade||0),0)/n.length:0;return{name:s.name,students:t.length,submissions:a.length,avgGrade:c}}),[p,v,g,f]),se=d.useMemo(()=>{const s={};return v.forEach(t=>{const n=f.filter(i=>i.student_id===t.user_id).filter(i=>i.grade!=null),c=n.length>0?n.reduce((i,x)=>i+(x.grade||0),0)/n.length:0,l=H.filter(i=>i.user_id===t.user_id).reduce((i,x)=>i+(x.xp||0),0);s[t.user_id]={name:t.user?.full_name||"Aluno",avgGrade:c,xp:l}}),Object.values(s).sort((t,a)=>a.avgGrade-t.avgGrade).slice(0,10)},[v,f,H]),U=d.useMemo(()=>{const s=g.reduce((t,a)=>(t[a.type]=(t[a.type]||0)+1,t),{});return Object.entries(s).map(([t,a])=>({name:t==="assignment"?"Tarefa":t==="quiz"?"Quiz":"Projeto",value:a}))},[g]),te=d.useMemo(()=>{const s=Array(10).fill(0);return j.filter(t=>t.grade!=null).forEach(t=>{const a=t.grade||0,n=Math.min(Math.floor(a/10),9);s[n]++}),s.map((t,a)=>({range:`${a*10}-${(a+1)*10}`,count:t}))},[j]),$=d.useMemo(()=>{const s=j.filter(a=>a.grade!=null).map(a=>a.grade).sort((a,n)=>a-n);if(s.length===0)return{p10:0,p50:0,p90:0,p25:0,p75:0};const t=a=>{const n=Math.ceil(a/100*s.length)-1;return s[Math.max(0,n)]||0};return{p10:t(10),p25:t(25),p50:t(50),p75:t(75),p90:t(90)}},[j]),ae=d.useMemo(()=>{const s={};return j.forEach(t=>{if(!t.submitted_at)return;const a=new Date(t.submitted_at),n=a.getFullYear(),c=De(a),l=`${n}-W${c}`;s[l]||(s[l]={count:0,grades:[]}),s[l].count++,t.grade!=null&&s[l].grades.push(t.grade)}),Object.entries(s).map(([t,a])=>({week:t,count:a.count,avgGrade:a.grades.length>0?(a.grades.reduce((n,c)=>n+c,0)/a.grades.length).toFixed(1):0})).sort((t,a)=>t.week.localeCompare(a.week))},[j]),De=s=>{const t=new Date(s);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const a=new Date(t.getFullYear(),0,1);return Math.ceil(((t-a)/864e5+1)/7)};if(ue)return e.jsx(Ee,{message:"Carregando analytics da escola..."});if(!E)return e.jsx(S,{icon:B,title:"Escola não encontrada",description:"Nenhuma escola vinculada."});const ke=()=>{const s=new Le;s.setFontSize(18),s.text(`Analytics - ${E.name}`,14,20),s.setFontSize(12),s.text(`Período: Últimos ${z} dias`,14,30),s.text("Métricas Gerais:",14,45);const t=[["Métrica","Valor"],["Total de Professores",m.totalTeachers],["Total de Turmas",m.totalClasses],["Total de Alunos",m.totalStudents],["Média Geral",m.avgGrade],["Taxa de Conclusão",`${m.completionRate}%`]];s.autoTable({startY:50,head:[t[0]],body:t.slice(1)}),s.save(`analytics_${E.name.replace(/\s/g,"_")}.pdf`),le({title:"Sucesso",description:"Relatório exportado em PDF!"})},Ge=()=>{const s=X.json_to_sheet([{Métrica:"Total de Professores",Valor:m.totalTeachers},{Métrica:"Total de Turmas",Valor:m.totalClasses},{Métrica:"Total de Alunos",Valor:m.totalStudents},{Métrica:"Média Geral",Valor:m.avgGrade},{Métrica:"Taxa de Conclusão",Valor:`${m.completionRate}%`}]),t=X.book_new();X.book_append_sheet(t,s,"Métricas"),$e(t,`analytics_${E.name.replace(/\s/g,"_")}.xlsx`),le({title:"Sucesso",description:"Relatório exportado em Excel!"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-600 to-gray-700 p-8 rounded-2xl text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(re,{className:"w-6 h-6"})," Analytics da Escola"]}),e.jsxs("p",{className:"text-white/90",children:[E.name," - Métricas e Comparações"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(de,{onClick:ke,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"PDF"]}),e.jsxs(de,{onClick:Ge,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Excel"]})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Período:"}),[7,15,30,90,180,365].map(s=>e.jsx("button",{onClick:()=>we(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${z===s?"bg-gradient-to-r from-slate-600 to-gray-700 text-white":"bg-muted hover:bg-muted/80 text-foreground"}`,children:s===7?"7 dias":s===15?"15 dias":s===30?"30 dias":s===90?"3 meses":s===180?"6 meses":"1 ano"},s))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Taxa de Conclusão"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[m.completionRate,"%"]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"On-time / Late"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:m.onTime}),e.jsx("div",{className:"text-muted-foreground",children:"/"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:m.late})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Mediana (p50)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$.p50})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Percentis"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["p10: ",e.jsx("strong",{children:$.p10})]}),e.jsxs("div",{children:["p25: ",e.jsx("strong",{children:$.p25})]}),e.jsxs("div",{children:["p75: ",e.jsx("strong",{children:$.p75})]}),e.jsxs("div",{children:["p90: ",e.jsx("strong",{children:$.p90})]})]})]})})]}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação Manual: Turma x Turma"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border",value:C,onChange:s=>Ne(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma A"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-border",value:A,onChange:s=>ye(s.target.value),children:[e.jsx("option",{value:"",children:"Selecione Turma B"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Turma A ",C&&V.get(C)?.name?`- ${V.get(C).name}`:""]}),C?Q(C):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Turma B ",A&&V.get(A)?.name?`- ${V.get(A).name}`:""]}),A?Q(A):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione uma turma"})]})]})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação Manual: Professor x Professor"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{list:"teachers-list",placeholder:"Buscar professor A por nome",className:"px-3 py-2 rounded-lg border border-border",onChange:s=>{const t=s.target.value.toLowerCase(),a=N.find(n=>(n.full_name||"").toLowerCase()===t);_e(a?a.id:"")}}),e.jsx("input",{list:"teachers-list",placeholder:"Buscar professor B por nome",className:"px-3 py-2 rounded-lg border border-border",onChange:s=>{const t=s.target.value.toLowerCase(),a=N.find(n=>(n.full_name||"").toLowerCase()===t);Se(a?a.id:"")}}),e.jsx("datalist",{id:"teachers-list",children:N.map(s=>e.jsx("option",{value:(s.full_name||"").toLowerCase()},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Professor A ",K&&q.get(K)?.full_name?`- ${q.get(K).full_name}`:""]}),K?J(K):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um professor"})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border",children:[e.jsxs("div",{className:"font-semibold mb-2",children:["Professor B ",L&&q.get(L)?.full_name?`- ${q.get(L).full_name}`:""]}),L?J(L):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Selecione um professor"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-7 gap-4",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(oe,{className:"w-8 h-8 mx-auto mb-2 text-indigo-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalTeachers}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Professores"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalClasses}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Turmas"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 text-cyan-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Alunos"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ie,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalActivities}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Atividades"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Be,{className:"w-8 h-8 mx-auto mb-2 text-amber-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.totalSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Submissões"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Ke,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.gradedSubmissions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avaliadas"})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ne,{className:"w-8 h-8 mx-auto mb-2 text-rose-600"}),e.jsx("div",{className:"text-2xl font-bold",children:m.avgGrade}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nota Média"})]})})]}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Professores"}),Z.length===0?e.jsx(S,{icon:oe,title:"Sem dados"}):e.jsx(D,{width:"100%",height:300,children:e.jsxs(W,{data:Z,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(k,{}),e.jsx(G,{}),e.jsx(w,{dataKey:"students",fill:"#3b82f6",name:"Alunos"}),e.jsx(w,{dataKey:"activities",fill:"#10b981",name:"Atividades"}),e.jsx(w,{dataKey:"avgGrade",fill:"#f59e0b",name:"Nota Média"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Comparação de Turmas (Top 10)"}),ee.length===0?e.jsx(S,{icon:B,title:"Sem turmas"}):e.jsx(D,{width:"100%",height:300,children:e.jsxs(W,{data:ee,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(k,{}),e.jsx(G,{}),e.jsx(w,{dataKey:"avgGrade",fill:"#8b5cf6",name:"Nota Média"}),e.jsx(w,{dataKey:"submissions",fill:"#ec4899",name:"Submissões"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Top 10 Alunos"}),se.length===0?e.jsx(S,{icon:B,title:"Sem dados"}):e.jsx(D,{width:"100%",height:300,children:e.jsxs(W,{data:se,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(P,{}),e.jsx(k,{}),e.jsx(G,{}),e.jsx(w,{dataKey:"avgGrade",fill:"#3b82f6",name:"Nota Média"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Atividades por Tipo"}),U.length===0?e.jsx(S,{icon:ie,title:"Sem atividades"}):e.jsx(D,{width:"100%",height:300,children:e.jsxs(Fe,{children:[e.jsx(Re,{data:U,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:U.map((s,t)=>e.jsx(Ie,{fill:xe[t%xe.length]},`cell-${t}`))}),e.jsx(k,{}),e.jsx(G,{})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Distribuição de Notas"}),te.every(s=>s.count===0)?e.jsx(S,{icon:re,title:"Sem notas",description:"Aguardando avaliações."}):e.jsx(D,{width:"100%",height:250,children:e.jsxs(W,{data:te,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"range"}),e.jsx(P,{}),e.jsx(k,{}),e.jsx(G,{}),e.jsx(w,{dataKey:"count",fill:"#8b5cf6",name:"Quantidade"})]})})]})}),e.jsx(h,{variant:"elevated",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Tendências Semanais"}),ae.length===0?e.jsx(S,{icon:ne,title:"Sem dados"}):e.jsx(D,{width:"100%",height:250,children:e.jsxs(ze,{data:ae,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"week",angle:-45,textAnchor:"end",height:80}),e.jsx(P,{yAxisId:"left"}),e.jsx(P,{yAxisId:"right",orientation:"right"}),e.jsx(k,{}),e.jsx(G,{}),e.jsx(me,{yAxisId:"left",type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Submissões",strokeWidth:2}),e.jsx(me,{yAxisId:"right",type:"monotone",dataKey:"avgGrade",stroke:"#10b981",name:"Nota Média",strokeWidth:2})]})})]})})]})]})};export{ls as default};
