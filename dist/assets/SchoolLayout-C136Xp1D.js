import{f as A,u as H,g as q,r as l,s as d,ag as R,B as U,T as P,ah as G,j as e,m as a,a0 as f,l as O,av as $,aw as z,af as F,ax as V,ay as b,a1 as J,C as K,bn as Q,bm as W,bS as X,ak as Y,bT as Z}from"./main-BTTCSkdE.js";import{B as ee}from"./badge-BTDSVm_c.js";import{s as te}from"./schoolService-txoXdLN3.js";import{U as ae}from"./user-check-C8HIKN3t.js";import{M as se}from"./mail-DX5iW6Zx.js";import{G as re}from"./graduation-cap-e4ttO3Rz.js";import{B as oe}from"./brain-CJ6YLFTd.js";import{G as le}from"./gift-wL4-7Uk6.js";import{B as ie}from"./building-2-I_cB95X_.js";import{C as ne}from"./chevron-left-ga51-8R3.js";import{U as v}from"./user-CunuWNs_.js";import{B as ce}from"./bell-3lNzrUcV.js";import{S as de}from"./shield-BUEGb80F.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],me=A("briefcase",he),xe=({collapsed:s,setCollapsed:h})=>{const{user:i,signOut:w}=H(),c=q(),[n,j]=l.useState({teachers:0,students:0,classes:0}),[m,N]=l.useState(0),[k,y]=l.useState(new Date),[x,I]=l.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);l.useEffect(()=>{i&&(T(),_())},[i]),l.useEffect(()=>{const t=setInterval(()=>{y(new Date)},6e4);return()=>clearInterval(t)},[]);const C=()=>{const t=!x;I(t),t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},S=t=>new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}).format(t).replace(","," •"),T=async()=>{try{const r=(await te.getUserSchool(i.id))?.id;if(!r){console.warn("School ID não encontrado");return}const{count:u}=await d.from("school_teachers").select("*",{count:"exact",head:!0}).eq("school_id",r).eq("status","active"),{data:o}=await d.from("school_classes").select("class_id").eq("school_id",r),g=o?.length||0;let p=0;if(g>0){const E=o.map(L=>L.class_id),{count:B}=await d.from("class_members").select("*",{count:"exact",head:!0}).in("class_id",E).eq("role","student");p=B||0}j({teachers:u||0,students:p,classes:g||0})}catch(t){console.error("Erro ao carregar stats:",t)}},_=async()=>{try{const{data:t,error:r}=await d.from("notifications").select("id").eq("user_id",i.id).eq("is_read",!1).range(0,499);if(r)throw r;N(t?.length||0)}catch(t){console.error("Erro ao carregar notificações:",t)}},M=[{label:"Dashboard",icon:R,path:"/school",tourId:"nav-school-dashboard",gradient:"from-slate-600 to-gray-700"},{label:"Professores",icon:ae,path:"/school/teachers",tourId:"nav-school-teachers",gradient:"from-blue-600 to-indigo-700",badge:n.teachers},{label:"Convidar Professor",icon:se,path:"/school/invite-teacher",tourId:"nav-school-invite",gradient:"from-indigo-600 to-purple-600"},{label:"Turmas",icon:U,path:"/school/classes",tourId:"nav-school-classes",gradient:"from-purple-600 to-pink-700",badge:n.classes},{label:"Alunos",icon:re,path:"/school/students",tourId:"nav-school-students",gradient:"from-green-600 to-teal-700",badge:n.students},{label:"Ranking",icon:P,path:"/school/ranking",tourId:"nav-school-ranking",gradient:"from-yellow-600 to-amber-700"},{label:"Analytics ML",icon:oe,path:"/school/analytics-ml",tourId:"nav-school-analytics-ml",gradient:"from-rose-600 to-red-700",badge:"IA"},{label:"Relatórios",icon:G,path:"/school/reports",tourId:"nav-school-reports",gradient:"from-cyan-600 to-blue-700"},{label:"Recompensas",icon:le,path:"/school/rewards",tourId:"nav-school-rewards",gradient:"from-orange-600 to-yellow-600"},{label:"Comunicações",icon:me,path:"/school/comms",tourId:"nav-school-comms",gradient:"from-violet-600 to-purple-700"}],D=async()=>{await w(),c("/login")};return e.jsx(a.aside,{initial:{x:-300},animate:{x:0,width:s?80:280},transition:{type:"spring",damping:20},className:"fixed left-0 top-0 h-screen bg-white dark:bg-gradient-to-br dark:from-slate-950 dark:via-gray-950 dark:to-black border-r border-slate-200 dark:border-slate-700/50 backdrop-blur-xl z-40 shadow-2xl",children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{mode:"wait",children:!s&&e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"TamanduAI"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-gray-300",children:"Administração Escolar"})]})]})}),e.jsx(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!s),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-700 dark:text-slate-300",children:s?e.jsx(O,{className:"w-5 h-5"}):e.jsx(ne,{className:"w-5 h-5"})})]}),!s&&e.jsxs(a.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-2 px-2",children:[e.jsxs($,{children:[e.jsx(z,{asChild:!0,children:e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-sm",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-amber-500 to-red-500 flex items-center justify-center",children:e.jsx(v,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs truncate max-w-[80px] text-slate-900 dark:text-white",children:i?.user_metadata?.school_name?.split(" ")[0]||"Escola"}),e.jsx(F,{className:"w-3 h-3"})]})}),e.jsxs(V,{align:"start",className:"w-48",children:[e.jsxs(b,{onClick:()=>c("/profile/edit"),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Editar Perfil"]}),e.jsxs(b,{onClick:()=>c("/school/settings"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Configurações"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-slate-100 dark:bg-slate-800 text-xs text-slate-600 dark:text-gray-300",children:[e.jsx(K,{className:"w-3 h-3"}),e.jsx("span",{children:S(k)})]}),e.jsx(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:C,className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-700 dark:text-slate-300",title:x?"Modo claro":"Modo escuro",children:x?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})}),e.jsxs(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("/dashboard/notifications"),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors relative text-slate-700 dark:text-slate-300",title:"Notificações",children:[e.jsx(ce,{className:"w-4 h-4"}),m>0&&e.jsx(a.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-[10px] font-bold",children:m>9?"9+":m})]})]})]})]}),!s&&e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-2xl bg-gradient-to-br from-amber-100 via-orange-100 to-red-100 dark:from-amber-600/20 dark:via-orange-600/20 dark:to-red-600/20 border border-amber-300 dark:border-amber-500/30 text-slate-900 dark:text-white relative overflow-hidden backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"24px 24px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:i?.user_metadata?.school_name||"Escola"}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-white/80 truncate",children:"Administrador"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:n.teachers}),e.jsx("div",{className:"text-xs text-slate-700 dark:text-white/80",children:"Profs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:n.classes}),e.jsx("div",{className:"text-xs text-slate-700 dark:text-white/80",children:"Turmas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:n.students}),e.jsx("div",{className:"text-xs text-slate-700 dark:text-white/80",children:"Alunos"})]})]})]})]}),e.jsx("nav",{className:"flex-1 space-y-0.5 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:M.map((t,r)=>{const u=t.icon;return e.jsx(X,{to:t.path,"data-tour-id":t.tourId||void 0,className:({isActive:o})=>`group flex items-center gap-3 px-3 py-2 rounded-xl transition-all duration-200 ${o?"bg-gradient-to-r "+t.gradient+" text-white shadow-lg scale-105":"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white"}`,children:({isActive:o})=>e.jsxs(e.Fragment,{children:[e.jsx(a.div,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},className:`p-2 rounded-lg ${o?"bg-white/20":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx(u,{className:"w-5 h-5"})}),e.jsx(f,{mode:"wait",children:!s&&e.jsxs(a.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.label}),t.badge&&e.jsx(ee,{className:`${o?"bg-white/20 text-white":"bg-primary/10 text-primary"} text-xs`,children:t.badge})]})})]})},t.path)})}),e.jsx("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700",children:e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:D,className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-700 dark:text-slate-300 hover:text-red-600 transition-all ${s?"justify-center":""}`,children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-200 dark:bg-slate-700",children:e.jsx(Y,{className:"w-5 h-5"})}),!s&&e.jsx("span",{className:"font-medium text-sm",children:"Sair"})]})})]})})},Se=()=>{const[s,h]=l.useState(!1);return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950",children:[e.jsx(xe,{collapsed:s,setCollapsed:h}),e.jsx(a.main,{animate:{marginLeft:s?80:280},transition:{type:"spring",damping:20},className:"flex-1 overflow-y-auto overflow-x-hidden",children:e.jsx("div",{className:"min-h-full p-6 max-w-full",children:e.jsx(Z,{})})})]})};export{Se as default};
