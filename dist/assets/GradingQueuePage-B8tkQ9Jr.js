import{u as _,g as P,r as n,z as S,j as e,o as $,m as c,c as m,C as x,$ as A,U as B,d as U,T as z,l as D}from"./main-NgjJy_CG.js";import{g as T}from"./gradingService-DdaRYRap.js";import{P as j}from"./PremiumCard-BGO_It48.js";import{P as F}from"./PremiumButton-DDGOGflQ.js";import{E as G}from"./EmptyState-Cb7n_MKP.js";import{C as h}from"./clipboard-check-CAgKAHy3.js";import{C as b}from"./circle-check-big-dDW7KbJv.js";import{F as I}from"./funnel-CchVKkoO.js";import{f as L}from"./formatDistanceToNow-krRYwCSW.js";import{p as Q}from"./pt-BR-D7au_PjL.js";import"./constructNow-DXF4kLiL.js";import"./toDate-M29M8iGB.js";import"./en-US-DmzJuP_Q.js";import"./endOfMonth-DIv7euNo.js";const ae=()=>{const{user:d}=_(),p=P(),[f,g]=n.useState(!0),[u,N]=n.useState([]),[t,v]=n.useState({total:0,urgent:0,soon:0,normal:0}),[i,w]=n.useState({priority:"all",classId:null});n.useEffect(()=>{d&&y()},[d,i]);const y=async()=>{try{g(!0);const s=await T.getGradingQueue(d.id,i);N(s);const a=s.filter(l=>l.priority==="urgent").length,r=s.filter(l=>l.priority==="soon").length,o=s.filter(l=>l.priority==="normal").length;v({total:s.length,urgent:a,soon:r,normal:o})}catch(s){console.error("Erro ao carregar fila:",s),S.error("Erro ao carregar fila de correções")}finally{g(!1)}},k=s=>{const a={urgent:{label:"Urgente",color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20",icon:m},soon:{label:"Em breve",color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20",icon:x},normal:{label:"Normal",color:"text-green-600 dark:text-green-400",bg:"bg-green-50 dark:bg-green-900/20",icon:b}};return a[s]||a.normal},C=s=>s?L(new Date(s),{addSuffix:!0,locale:Q}):"",E=(s,a)=>{p(`/dashboard/activities/${a}/submissions/${s}/grade`)};return f?e.jsx($,{message:"Carregando fila de correções..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"✏️ Painel de Correções"}),e.jsx("p",{className:"text-white/90 text-lg",children:"Gerencie todas as suas correções pendentes"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(h,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:t.total})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/30 rounded-lg",children:e.jsx(m,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Urgentes"}),e.jsx("p",{className:"text-2xl font-bold",children:t.urgent})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/30 rounded-lg",children:e.jsx(x,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Em Breve"}),e.jsx("p",{className:"text-2xl font-bold",children:t.soon})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/30 rounded-lg",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Normal"}),e.jsx("p",{className:"text-2xl font-bold",children:t.normal})]})]})})]})]})]}),e.jsx(j,{variant:"elevated",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filtrar por:"}),["all","urgent","soon","normal"].map(s=>{const a=i.priority===s,r=s==="all"?"Todos":s==="urgent"?"Urgentes":s==="soon"?"Em Breve":"Normal";return e.jsxs("button",{onClick:()=>w({...i,priority:s}),className:`whitespace-nowrap inline-flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${a?"bg-primary text-white shadow-lg":"bg-white dark:bg-slate-900 text-foreground border border-border hover:bg-muted"}`,children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:r}),s!=="all"&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-white/20",children:t[s]})]},s)})]})})}),e.jsx("div",{className:"space-y-4",children:e.jsx(A,{mode:"popLayout",children:u.length===0?e.jsx(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:e.jsx(G,{icon:h,title:"Nenhuma correção pendente",description:i.priority==="all"?"Parabéns! Você está em dia com as correções.":"Não há correções com esta prioridade."})}):u.map((s,a)=>{const r=k(s.priority),o=r.icon;return e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:a*.05},children:e.jsx(j,{variant:"elevated",className:"hover:shadow-xl transition-all",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:`whitespace-nowrap inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${r.bg} ${r.color}`,children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:r.label})]}),s.is_late&&e.jsxs("div",{className:"whitespace-nowrap inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Entrega Atrasada"})]})]}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.activity_title}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-3",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:s.student_name})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:["Entregue ",C(s.submitted_at)]})]}),s.due_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsxs("span",{children:["Prazo: ",new Date(s.due_date).toLocaleDateString("pt-BR")]})]}),s.total_points&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.total_points," pontos"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(F,{variant:"gradient",leftIcon:h,onClick:()=>E(s.submission_id,s.activity_id),className:"whitespace-nowrap inline-flex items-center gap-2",children:[e.jsx("span",{children:"Corrigir Agora"}),e.jsx(D,{className:"w-4 h-4"})]}),e.jsx("button",{onClick:()=>p(`/dashboard/activities/${s.activity_id}`),className:"text-sm text-primary hover:underline",children:"Ver atividade completa"})]})]})})})},s.submission_id)})})})]})};export{ae as default};
