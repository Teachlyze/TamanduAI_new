import{r as u}from"./react-vendor-C2HUFn5N.js";function C(r){r()}function h(){let r=null,i=null;return{clear(){r=null,i=null},notify(){C(()=>{let n=r;for(;n;)n.callback(),n=n.next})},get(){const n=[];let t=r;for(;t;)n.push(t),t=t.next;return n},subscribe(n){let t=!0;const e=i={callback:n,next:null,prev:i};return e.prev?e.prev.next=e:r=e,function(){!t||r===null||(t=!1,e.next?e.next.prev=e.prev:i=e.prev,e.prev?e.prev.next=e.next:r=e.next)}}}}var p={notify(){},get:()=>[]};function m(r,i){let n,t=p,e=0,o=!1;function c(y){b();const g=t.subscribe(y);let v=!1;return()=>{v||(v=!0,g(),d())}}function a(){t.notify()}function s(){l.onStateChange&&l.onStateChange()}function f(){return o}function b(){e++,n||(n=r.subscribe(s),t=h())}function d(){e--,n&&e===0&&(n(),n=void 0,t.clear(),t=p)}function x(){o||(o=!0,b())}function S(){o&&(o=!1,d())}const l={addNestedSub:c,notifyNestedSubs:a,handleChangeWrapper:s,isSubscribed:f,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>t};return l}var w=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N=w(),E=()=>typeof navigator<"u"&&navigator.product==="ReactNative",L=E(),M=()=>N||L?u.useLayoutEffect:u.useEffect,R=M(),U=Symbol.for("react-redux-context"),P=typeof globalThis<"u"?globalThis:{};function I(){if(!u.createContext)return{};const r=P[U]??=new Map;let i=r.get(u.createContext);return i||(i=u.createContext(null),r.set(u.createContext,i)),i}var T=I();function V(r){const{children:i,context:n,serverState:t,store:e}=r,o=u.useMemo(()=>{const s=m(e);return{store:e,subscription:s,getServerState:t?()=>t:void 0}},[e,t]),c=u.useMemo(()=>e.getState(),[e]);R(()=>{const{subscription:s}=o;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),c!==e.getState()&&s.notifyNestedSubs(),()=>{s.tryUnsubscribe(),s.onStateChange=void 0}},[o,c]);const a=n||T;return u.createElement(a.Provider,{value:o},i)}var O=V;export{O as P};
