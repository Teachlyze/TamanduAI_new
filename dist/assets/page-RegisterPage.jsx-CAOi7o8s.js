import{r as c,j as e,a6 as T,Z as oe,av as ce,y,aG as ne,B as de,ai as me,v as f,at as ue,ad as R,aQ as O,ap as M,aE as pe}from"./react-vendor-C2HUFn5N.js";import{l as xe,u as he,j as b,I as N,B as fe,s as be}from"./lazy-CreateActivityPage.jsx-DYBofU2F.js";import{H as ge}from"./page-LoginPage.jsx-A1_oGKLe.js";import{u as je}from"./i18n-vendor-WP9bSEud.js";import{m as d,A as g}from"./motion-vendor-Crtv24Dn.js";import{u as we,L as k}from"./vendor-react-router-B4Bn0PSh.js";const Ae=()=>{const{t:m}=je(),Z=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",[r,H]=c.useState({name:"",email:"",cpf:"",password:"",confirmPassword:"",role:"student",termsAccepted:!1}),[C,P]=c.useState(!1),[I,j]=c.useState(""),[L,A]=c.useState(""),[t,J]=c.useState({}),[l,B]=c.useState({}),[E,U]=c.useState(!1),[S,G]=c.useState(!1),[x,Q]=c.useState(0),[W,_]=c.useState(!0),w=c.useRef(null),{signUp:K,user:V,loading:$}=xe(),{toast:h}=he(),F=we();c.useEffect(()=>{V?F("/dashboard"):$||_(!1)},[V,$,F]);const X=i=>{let s=0;return i.length>=8&&s++,i.length>=12&&s++,/[a-z]/.test(i)&&/[A-Z]/.test(i)&&s++,/\d/.test(i)&&s++,/[^A-Za-z0-9]/.test(i)&&s++,Math.min(s,5)},Y=i=>{const s=i.replace(/\D/g,"");if(!s||s.length!==11||/^(\d)\1{10}$/.test(s))return!1;let a=0;for(let n=0;n<9;n++)a+=parseInt(s.charAt(n))*(10-n);let o=11-a%11;if((o===10||o===11)&&(o=0),o!==parseInt(s.charAt(9)))return!1;a=0;for(let n=0;n<10;n++)a+=parseInt(s.charAt(n))*(11-n);return o=11-a%11,(o===10||o===11)&&(o=0),o===parseInt(s.charAt(10))},u=(i,s)=>{const a={...t};switch(i){case"name":s.trim()?s.length<2?a.name="Nome muito curto":delete a.name:a.name="Nome obrigatório";break;case"email":s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?delete a.email:a.email="E-mail inválido":a.email="E-mail obrigatório";break;case"cpf":{const o=s.replace(/\D/g,"");o?Y(o)?delete a.cpf:a.cpf="CPF inválido":a.cpf="CPF obrigatório";break}case"password":s?s.length<8?a.password="Mínimo 8 caracteres":delete a.password:a.password="Senha obrigatória",Q(X(s));break;case"confirmPassword":s!==r.password?a.confirmPassword="As senhas não coincidem":delete a.confirmPassword;break}return J(a),Object.keys(a).length===0},ee=i=>{const s=i.replace(/\D/g,"").slice(0,11),a=[];s.length>0&&a.push(s.slice(0,3)),s.length>3&&a.push(s.slice(3,6)),s.length>6&&a.push(s.slice(6,9));let o=a.join(".");return s.length>9&&(o+="-"+s.slice(9,11)),o},p=i=>{const{name:s,value:a,type:o,checked:n}=i.target,z=o==="checkbox"?n:a,D=s==="cpf"?ee(z):z;H(ie=>({...ie,[s]:D})),l[s]&&u(s,D)},v=i=>{const{name:s,value:a}=i.target;B(o=>({...o,[s]:!0})),u(s,a)},se=c.useCallback(i=>{j(i),A("")},[]),ae=c.useCallback(i=>{console.error("hCaptcha Error:",i),j(""),A("Verificação de segurança falhou. Tente novamente.")},[]),re=c.useCallback(()=>{j(""),w.current?.execute()},[]),te=async i=>{if(i.preventDefault(),C)return;if(B({name:!0,email:!0,cpf:!0,password:!0,confirmPassword:!0}),!(u("name",r.name)&&u("email",r.email)&&u("cpf",r.cpf)&&u("password",r.password)&&u("confirmPassword",r.confirmPassword))){h({title:"Erro de validação",description:"Corrija os erros no formulário.",variant:"destructive"});return}if(!r.termsAccepted){h({title:"Termos não aceitos",description:"Você deve aceitar os termos de uso.",variant:"destructive"});return}if(!Z&&!I){A("Complete a verificação de segurança"),w.current?.execute();return}P(!0);try{const{data:a,error:o}=await be.from("profiles").select("id").eq("email",r.email).limit(1);if(o&&console.warn("Email check failed:",o),a&&a.length>0){h({title:"E-mail já cadastrado",description:"Tente entrar ou usar outro e-mail.",variant:"destructive"}),P(!1);return}const n=await K({email:r.email,password:r.password,name:r.name,cpf:r.cpf.replace(/\D/g,""),role:r.role},I);n?.success?(h({title:"Cadastro realizado!",description:"Enviamos um e-mail de confirmação. Verifique sua caixa de entrada."}),F("/login")):(w.current?.reset(),j(""),h({title:"Erro no cadastro",description:n?.error?.message||"Tente novamente.",variant:"destructive"}))}catch(a){console.error("Register error:",a),w.current?.reset(),j(""),h({title:"Erro no cadastro",description:a.message||"Tente novamente.",variant:"destructive"})}finally{P(!1)}};if(W)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Verificando..."})]})});const le=["bg-red-500","bg-orange-500","bg-yellow-500","bg-lime-500","bg-green-500"],q=["Muito Fraca","Fraca","Razoável","Boa","Forte"];return e.jsxs("div",{className:"min-h-screen w-full flex flex-col lg:flex-row-reverse bg-gradient-to-br from-slate-50 via-purple-50 to-pink-50",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-700 items-center justify-center p-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 right-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-60 h-60 bg-white/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-32 h-32 bg-white/10 rounded-full blur-2xl"})]}),e.jsxs(d.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"text-center text-white space-y-8 relative z-10",children:[e.jsx("div",{className:"relative",children:e.jsx(d.div,{animate:{y:[0,-10,0],rotate:[0,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"w-80 h-80 mx-auto mb-8 relative",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 rounded-3xl backdrop-blur-sm border border-white/20 flex items-center justify-center",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(oe,{className:"w-8 h-8 text-white"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-white/30 rounded-2xl flex items-center justify-center",children:e.jsx(ce,{className:"w-10 h-10 text-white"})})}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-white/60 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-white/60 rounded-full"})]})]})})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Junte-se à revolução educacional"}),e.jsx("p",{className:"text-purple-100 text-lg leading-relaxed",children:"Crie sua conta e comece a transformar a educação com IA"})]}),e.jsxs("div",{className:"flex justify-center space-x-8 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsx("p",{children:"Grátis"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsx("p",{children:"Completo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsx("p",{children:"Seguro"})]})]})]})]}),e.jsxs("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 relative",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-purple-500 rounded-full blur-xl"}),e.jsx("div",{className:"absolute top-40 right-20 w-32 h-32 bg-pink-500 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-indigo-500 rounded-full blur-xl"})]}),e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8},className:"w-full max-w-md space-y-8 relative z-10",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(k,{to:"/",className:"inline-flex items-center space-x-3 group",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:e.jsx(de,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"TamanduAI"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-2",children:m("auth.createAccount","Crie sua conta")}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:m("auth.startJourney","Comece sua jornada educacional")})]})]}),e.jsxs("form",{onSubmit:te,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"name",className:"text-slate-700 dark:text-slate-200 font-medium",children:m("auth.nameLabel","Nome completo")}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx(N,{id:"name",name:"name",placeholder:"Seu nome",autoComplete:"name",value:r.name,onChange:p,onBlur:v,className:`pl-10 h-12 border-2 rounded-xl bg-white transition-all duration-200 ${t.name&&l.name?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":r.name&&!t.name&&l.name?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":l.name?"border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,required:!0}),r.name&&!t.name&&l.name&&e.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-3",children:e.jsx(y,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx(g,{children:t.name&&l.name&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.name})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",className:"text-slate-700 dark:text-slate-200 font-medium",children:m("auth.emailLabel","Email")}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx(N,{id:"email",name:"email",type:"email",autoComplete:"email",placeholder:"seu@email.com",value:r.email,onChange:p,onBlur:v,className:`pl-10 h-12 border-2 rounded-xl bg-white transition-all duration-200 ${t.email&&l.email?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":r.email&&!t.email&&l.email?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":l.email?"border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,required:!0}),r.email&&!t.email&&l.email&&e.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-3",children:e.jsx(y,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx(g,{children:t.email&&l.email&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.email})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"cpf",className:"text-slate-700 dark:text-slate-200 font-medium",children:"CPF"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx(N,{id:"cpf",name:"cpf",placeholder:"000.000.000-00",autoComplete:"off",value:r.cpf,onChange:p,onBlur:v,className:`pl-10 h-12 border-2 rounded-xl bg-white transition-all duration-200 ${t.cpf&&l.cpf?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":r.cpf&&!t.cpf&&l.cpf?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":l.cpf?"border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,required:!0}),r.cpf&&!t.cpf&&l.cpf&&e.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-3",children:e.jsx(y,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx(g,{children:t.cpf&&l.cpf&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.cpf})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"role",className:"text-slate-700 dark:text-slate-200 font-medium",children:m("auth.accountType","Tipo de conta")}),e.jsx("div",{className:"relative",children:e.jsxs("select",{id:"role",name:"role",value:r.role,onChange:p,className:`h-12 w-full border-2 rounded-xl px-4 bg-white transition-all duration-200 ${r.role?"border-purple-400 focus:border-purple-500 focus:ring-purple-500/20 bg-purple-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,children:[e.jsx("option",{value:"student",children:"Aluno"}),e.jsx("option",{value:"teacher",children:"Professor"})]})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Você pode alterar o tipo de conta depois nas configurações do perfil."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",className:"text-slate-700 dark:text-slate-200 font-medium",children:m("auth.passwordLabel","Senha")}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(N,{id:"password",name:"password",type:E?"text":"password",autoComplete:"new-password",placeholder:"••••••••",value:r.password,onChange:p,onBlur:v,className:`pl-10 pr-12 h-12 border-2 rounded-xl bg-white transition-all duration-200 ${t.password&&l.password?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":r.password&&!t.password&&l.password?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":l.password?"border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,required:!0}),e.jsx("button",{type:"button",onClick:()=>U(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:E?e.jsx(O,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})})]}),r.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((i,s)=>e.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-all ${s<x?le[x-1]:"bg-gray-200"}`},s))}),e.jsxs("p",{className:`text-xs ${x>=4?"text-green-600":x>=3?"text-lime-600":x>=2?"text-yellow-600":"text-red-600"}`,children:["Força: ",q[x-1]||q[0]]})]}),e.jsx(g,{children:t.password&&l.password&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.password})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"confirmPassword",className:"text-slate-700 dark:text-slate-200 font-medium",children:m("auth.confirmPasswordLabel","Confirmar senha")}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(N,{id:"confirmPassword",name:"confirmPassword",type:S?"text":"password",autoComplete:"new-password",placeholder:"••••••••",value:r.confirmPassword,onChange:p,onBlur:v,className:`pl-10 pr-12 h-12 border-2 rounded-xl bg-white transition-all duration-200 ${t.confirmPassword&&l.confirmPassword?"border-red-400 focus:border-red-500 focus:ring-red-500/20 bg-red-50":r.confirmPassword&&!t.confirmPassword&&l.confirmPassword?"border-emerald-400 focus:border-emerald-500 focus:ring-emerald-500/20 bg-emerald-50":l.confirmPassword?"border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 bg-slate-50":"border-slate-200 hover:border-slate-300 focus:border-purple-500 focus:ring-purple-500/20"}`,required:!0}),e.jsx("button",{type:"button",onClick:()=>G(!S),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:S?e.jsx(O,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})})]}),e.jsx(g,{children:t.confirmPassword&&l.confirmPassword&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:t.confirmPassword})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ge,{ref:w,onVerify:se,onError:ae,onExpire:re,size:"invisible"}),e.jsx(g,{children:L&&e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-red-500 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:L})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"termsAccepted",name:"termsAccepted",checked:r.termsAccepted,onChange:p,className:"rounded border-slate-300 text-purple-600 focus:ring-purple-500",required:!0}),e.jsxs("label",{htmlFor:"termsAccepted",className:"text-sm text-slate-600",children:["Aceito os ",e.jsx(k,{to:"/terms",className:"text-purple-600 hover:text-purple-700 font-medium",children:"Termos de Uso"})," e ",e.jsx(k,{to:"/privacy",className:"text-purple-600 hover:text-purple-700 font-medium",children:"Política de Privacidade"})]})]}),e.jsx(fe,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-medium rounded-xl shadow-lg hover:shadow-xl",disabled:C||Object.keys(t).length>0,children:C?e.jsx(d.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:["Criar conta ",e.jsx(pe,{className:"ml-2 w-4 h-4"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:[m("auth.alreadyHaveAccount","Já tem uma conta?")," ",e.jsx(k,{to:"/login",className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium",children:m("auth.signIn","Entrar")})]})})]})]})]})};export{Ae as default};
