import{f as F,r as o,j as e,bG as G,p as B,ai as T,bH as Q,af as U,m as V,l as _,g as R,B as P,U as O,e as q,T as H,O as J,ar as D}from"./main-7VZoQpWp.js";import{S as C}from"./PremiumCard-BlYsE6j7.js";import{I as L,P as z}from"./PremiumButton-BLQFs7s4.js";import{E as S}from"./EmptyState-DVyZdeJX.js";import{F as K}from"./funnel-iBobsoK4.js";import{D as W}from"./download-nsHr86Uf.js";import{E as X}from"./ellipsis-vertical-Vfdo4yhB.js";import{C as Y}from"./chevron-left-D2kfKc53.js";import{u as Z}from"./ActivityContext-Cnr2eDjY.js";import{P as ee}from"./plus-DZCtRGwr.js";import{P as te}from"./pen-CndEIUhx.js";import{T as se}from"./trash-2-fSpPRE2h.js";import"./useRedisCache-B9jj4yfD.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],re=F("chevrons-up-down",ae),ie=({data:x=[],columns:h=[],loading:w=!1,sortable:l=!0,filterable:g=!0,pagination:v=!0,pageSize:E=10,onRowClick:b,emptyMessage:M="Nenhum dado encontrado",className:I=""})=>{const[d,n]=o.useState({key:null,direction:"asc"}),[p,N]=o.useState(""),[r,f]=o.useState(1),[u,A]=o.useState(E),y=a=>{if(!l)return;let t="asc";d.key===a&&d.direction==="asc"&&(t="desc"),n({key:a,direction:t})},c=o.useMemo(()=>{let a=[...x];return p&&g&&(a=a.filter(t=>h.some(s=>t[s.key]?.toString().toLowerCase().includes(p.toLowerCase())))),d.key&&l&&a.sort((t,s)=>{const i=t[d.key],k=s[d.key];if(i===k)return 0;const $=i>k?1:-1;return d.direction==="asc"?$:-$}),a},[x,d,p,h,l,g]),j=o.useMemo(()=>{if(!v)return c;const a=(r-1)*u,t=a+u;return c.slice(a,t)},[c,r,u,v]),m=Math.ceil(c.length/u);return w?e.jsx("div",{className:"bg-card rounded-xl border border-border p-6",children:e.jsx(G,{message:"Carregando dados..."})}):x.length===0?e.jsx("div",{className:"bg-card rounded-xl border border-border",children:e.jsx(S,{title:M,description:"N√£o h√° dados para exibir no momento"})}):e.jsxs("div",{className:`space-y-4 ${I}`,children:[g&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(B,{placeholder:"Buscar...",value:p,onChange:a=>N(a.target.value),leftIcon:T,clearable:!0})}),e.jsx(L,{icon:K,variant:"outline",tooltip:"Filtros"}),e.jsx(L,{icon:W,variant:"outline",tooltip:"Exportar"})]}),e.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/30 border-b border-border",children:e.jsxs("tr",{children:[h.map(a=>e.jsx("th",{onClick:()=>a.sortable!==!1&&y(a.key),className:`px-6 py-4 text-left text-sm font-semibold text-foreground ${a.sortable!==!1&&l?"cursor-pointer hover:bg-muted/50":""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.label,a.sortable!==!1&&l&&e.jsx("span",{className:"text-muted-foreground",children:d.key===a.key?d.direction==="asc"?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(U,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4 opacity-50"})})]})},a.key)),e.jsx("th",{className:"px-6 py-4 w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:h.length+1,className:"px-6 py-12",children:e.jsx(S,{variant:"search",title:"Nenhum resultado encontrado",description:`Nenhum resultado para "${p}"`,actionLabel:"Limpar busca",onAction:()=>N("")})})}):j.map((a,t)=>e.jsxs(V.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},onClick:()=>b?.(a),className:`hover:bg-muted/30 transition-colors ${b?"cursor-pointer":""}`,children:[h.map(s=>e.jsx("td",{className:"px-6 py-4 text-sm text-foreground",children:s.render?s.render(a[s.key],a):a[s.key]},s.key)),e.jsx("td",{className:"px-6 py-4",children:e.jsx(L,{icon:X,variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation()}})})]},a.id||t))})]})}),v&&j.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-border flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",(r-1)*u+1," a"," ",Math.min(r*u,c.length)," de"," ",c.length," resultados"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",size:"sm",leftIcon:Y,onClick:()=>f(a=>Math.max(1,a-1)),disabled:r===1,children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,m)},(a,t)=>{let s;return m<=5||r<=3?s=t+1:r>=m-2?s=m-4+t:s=r-2+t,e.jsx("button",{onClick:()=>f(s),className:`w-8 h-8 rounded-lg text-sm font-medium transition-colors ${r===s?"bg-primary text-primary-foreground":"hover:bg-muted text-foreground"}`,children:s},s)})}),e.jsx(z,{variant:"outline",size:"sm",rightIcon:_,onClick:()=>f(a=>Math.min(m,a+1)),disabled:r===m,children:"Pr√≥ximo"})]})]})]})]})};function fe(){const x=R(),{activities:h,loading:w}=Z(),[l,g]=o.useState(""),[v,E]=o.useState("all"),[b,M]=o.useState("all"),[I,d]=o.useState(!1),n=h||[],p=w,N=n.filter(t=>t.status==="Ativa"||t.status==="published").length,r=n.reduce((t,s)=>t+(s.students||0),0),f=n.reduce((t,s)=>t+(s.completed||0),0),u=n.length>0?(n.reduce((t,s)=>t+(s.avgGrade||0),0)/n.length).toFixed(1):0,A=n.filter(t=>{const s=t.title.toLowerCase().includes(l.toLowerCase())||t.description?.toLowerCase().includes(l.toLowerCase()),i=v==="all"||t.status===v,k=b==="all"||t.type===b;return s&&i&&k}),y=()=>{console.log("üìã Navegando para criar atividade..."),x("/dashboard/activities/new")},c=t=>{x(`/dashboard/activities/${t.id}`)},j=t=>{x(`/dashboard/activities/${t.id}/edit`)},m=async t=>{if(confirm(`Tem certeza que deseja excluir "${t.title}"?`))try{D.success("Atividade exclu√≠da com sucesso!","Sucesso"),loadActivities()}catch{D.error("Erro ao excluir atividade","Erro")}};if(p)return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 p-8 rounded-2xl text-white",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Atividades"}),e.jsx("p",{className:"text-white/90",children:"Carregando suas atividades..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-card p-6 rounded-xl animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded w-3/4"})]},t))}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"bg-card p-6 rounded-xl animate-pulse",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-2/3 mb-3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/5"})]},t))})]});if(n.length===0)return e.jsx(S,{icon:P,title:"Nenhuma atividade criada",description:"Comece criando sua primeira atividade para os alunos",actionLabel:"Criar Atividade",onAction:y});const a=[{key:"title",label:"T√≠tulo",sortable:!0,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:t}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.class})]})},{key:"type",label:"Tipo",sortable:!0,render:t=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t==="Prova"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":t==="Projeto"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":t==="Quiz"?"bg-blue-100 dark:bg-muted/50 text-blue-700 dark:text-blue-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:t})},{key:"status",label:"Status",sortable:!0,render:t=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t==="Ativa"?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:t})},{key:"dueDate",label:"Prazo",sortable:!0,render:t=>new Date(t).toLocaleDateString("pt-BR")},{key:"progress",label:"Progresso",render:(t,s)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{children:[s.completed,"/",s.students]}),e.jsxs("span",{children:[Math.round(s.completed/s.students*100),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx("div",{className:"bg-success h-1.5 rounded-full transition-all",style:{width:`${s.completed/s.students*100}%`}})})]})},{key:"avgGrade",label:"Nota M√©dia",sortable:!0,render:t=>t?t.toFixed(1):"-"},{key:"actions",label:"A√ß√µes",render:(t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),c(s)},className:"p-1 hover:bg-muted rounded transition-colors",title:"Visualizar",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),j(s)},className:"p-1 hover:bg-muted rounded transition-colors",title:"Editar",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),m(s)},className:"p-1 hover:bg-destructive/10 text-destructive rounded transition-colors",title:"Excluir",children:e.jsx(se,{className:"w-4 h-4"})})]})}];return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-purple-700 to-indigo-700 p-8 rounded-2xl text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(P,{className:"w-8 h-8"}),"Atividades"]}),e.jsx("p",{className:"text-white/90",children:"Gerencie todas as atividades e avalia√ß√µes"})]})]}),e.jsxs("div",{className:"stagger-children grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(C,{title:"Atividades Ativas",value:N.toString(),change:"+3 esta semana",trend:"up",icon:P}),e.jsx(C,{title:"Total de Alunos",value:r.toString(),change:"+12%",trend:"up",icon:O}),e.jsx(C,{title:"Tarefas Conclu√≠das",value:f.toString(),change:"+8%",trend:"up",icon:q}),e.jsx(C,{title:"Nota M√©dia",value:u,change:"+0.3",trend:"up",icon:H})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(B,{placeholder:"Buscar atividades...",leftIcon:T,value:l,onChange:t=>g(t.target.value),clearable:!0})}),e.jsx(z,{variant:"gradient",leftIcon:ee,onClick:y,children:"Nova Atividade"})]}),A.length===0?e.jsx(S,{icon:T,title:"Nenhuma atividade encontrada",description:"Tente ajustar os filtros de busca",actionLabel:"Limpar Busca",onAction:()=>g("")}):e.jsx(ie,{data:A,columns:a,sortable:!0,filterable:!0,pagination:!0,pageSize:10,onRowClick:c})]})}export{fe as default};
