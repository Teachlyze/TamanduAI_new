import{al as I,g as T,u as G,r as d,s as y,z as L,j as e,o as M,ah as g,m as i,C as V,n as $,A as q,a0 as H,an as R,ao as O,ap as X,O as J}from"./main-BBAlbGLj.js";import{P as r}from"./PremiumCard-BClPpHrg.js";import{P as p}from"./PremiumButton-CWdhOUBt.js";import{B as v}from"./badge-Dxkfeepr.js";import{A as K}from"./arrow-left-D8R0xudv.js";import{C as Q}from"./circle-check-big-9PMWtYp0.js";import{F as U}from"./funnel-DHfHwSYC.js";import{f as W}from"./format-BmB7BMvl.js";import{p as Y}from"./pt-BR-CVz3wboC.js";import"./en-US-C1KUdeex.js";import"./toDate-B_SDEMqy.js";const me=()=>{const{activityId:o}=I(),x=T(),{user:Z}=G(),[N,f]=d.useState(!0),[c,w]=d.useState(null),[m,A]=d.useState([]),[u,C]=d.useState("all"),[n,k]=d.useState({total:0,graded:0,pending:0,late:0,avgGrade:0});d.useEffect(()=>{_()},[o]);const _=async()=>{try{f(!0);const{data:t,error:l}=await y.from("activities").select("*, classes(name)").eq("id",o).single();if(l)throw l;w(t);const{data:a,error:b}=await y.from("submissions").select(`
          *,
          profiles:student_id(id, full_name, avatar_url)
        `).eq("activity_id",o).order("submitted_at",{ascending:!1});if(b)throw b;A(a||[]);const P=a?.length||0,h=a?.filter(s=>s.status==="graded").length||0,F=a?.filter(s=>s.status==="pending").length||0,B=a?.filter(s=>s.late_submission).length||0,D=h>0?a.filter(s=>s.grade!=null).reduce((s,z)=>s+z.grade,0)/h:0;k({total:P,graded:h,pending:F,late:B,avgGrade:D})}catch(t){console.error("Erro ao carregar dados:",t),L.error("Erro ao carregar submissões")}finally{f(!1)}},S=()=>{switch(u){case"graded":return m.filter(t=>t.status==="graded");case"pending":return m.filter(t=>t.status==="pending");case"late":return m.filter(t=>t.late_submission);default:return m}},E=t=>{const l={graded:{color:"bg-green-100 text-green-700",label:"Corrigida"},pending:{color:"bg-yellow-100 text-yellow-700",label:"Pendente"},submitted:{color:"bg-blue-100 text-blue-700",label:"Enviada"}},a=l[t]||l.submitted;return e.jsx(v,{className:a.color,children:a.label})};if(N)return e.jsx(M,{message:"Carregando submissões..."});if(!c)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs(r,{className:"p-8 text-center",children:[e.jsx(g,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Atividade não encontrada"}),e.jsx(p,{onClick:()=>x("/dashboard/activities"),children:"Voltar para Atividades"})]})});const j=S();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-600 to-purple-700 text-white p-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx(p,{variant:"outline",size:"sm",leftIcon:K,onClick:()=>x(`/dashboard/activities/${o}`),className:"mb-4 bg-white/10 border-white/20 hover:bg-white/20 text-white",children:"Voltar"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:c.title}),e.jsxs("p",{className:"text-white/90",children:[c.classes?.name," • ",n.total," submissão(ões)"]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-3xl font-bold",children:n.total}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-3xl font-bold",children:n.graded}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Corrigidas"})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(V,{className:"w-8 h-8 mx-auto mb-2 text-yellow-600"}),e.jsx("div",{className:"text-3xl font-bold",children:n.pending}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pendentes"})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx($,{className:"w-8 h-8 mx-auto mb-2 text-red-600"}),e.jsx("div",{className:"text-3xl font-bold",children:n.late}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Atrasadas"})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(q,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-3xl font-bold",children:n.avgGrade.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Média"})]})})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-6",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(U,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"Todas"},{key:"pending",label:"Pendentes"},{key:"graded",label:"Corrigidas"},{key:"late",label:"Atrasadas"}].map(t=>e.jsx("button",{onClick:()=>C(t.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u===t.key?"bg-indigo-600 text-white":"bg-muted hover:bg-muted/80"}`,children:t.label},t.key))})]})})}),e.jsx(H,{children:j.length===0?e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(r,{className:"p-12 text-center",children:[e.jsx(g,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Nenhuma submissão encontrada"}),e.jsx("p",{className:"text-muted-foreground",children:u==="all"?"Ainda não há submissões para esta atividade":"Tente ajustar os filtros"})]})}):e.jsx("div",{className:"space-y-4",children:j.map((t,l)=>e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.05},children:e.jsx(r,{className:"p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs(R,{className:"w-12 h-12",children:[e.jsx(O,{src:t.profiles?.avatar_url}),e.jsx(X,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white",children:t.profiles?.full_name?.charAt(0)||"A"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold",children:t.profiles?.full_name||"Aluno"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Enviado em ",W(new Date(t.submitted_at),"dd/MM/yyyy 'às' HH:mm",{locale:Y})]}),t.late_submission&&e.jsx(v,{className:"bg-red-100 text-red-700",children:"Atrasado"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[E(t.status),t.grade!=null&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:t.grade.toFixed(1)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["/ ",c.total_points]})]}),e.jsx(p,{size:"sm",variant:"outline",leftIcon:J,onClick:()=>x(`/dashboard/submissions/${t.id}`),children:"Ver Detalhes"})]})]})})},t.id))})})]})]})};export{me as default};
