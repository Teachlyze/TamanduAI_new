import{u as M,g as q,r as o,s as c,z as V,j as e,o as L,m as t,B as U,U as m,ah as f,C as x,c as y,d as N,V as H,k as O,b6 as F}from"./main-Cv3DLBs1.js";import{P as n}from"./PremiumCard-C8PJt07T.js";import{P as w}from"./PremiumButton-DEtqLbhG.js";import{E as C}from"./EmptyState-BvWI2uN2.js";import{U as G}from"./UpcomingClassesCard-BVwh-xpa.js";import{P as A}from"./plus-CHwJ6wYR.js";import{T as J}from"./target-BazIADWF.js";import{A as k}from"./arrow-right-ErUN0Gvu.js";import{C as S}from"./circle-check-big-Ca-JuLlv.js";import{B as I}from"./bell-DQXYVwvp.js";import"./badge-CS76XO47.js";import"./external-link-B6t_H3_H.js";const oe=()=>{const{user:d}=M(),s=q(),[_,p]=o.useState(!0),[r,P]=o.useState({totalClasses:0,totalStudents:0,totalActivities:0,pendingCorrections:0,avgClassSize:0}),[h,T]=o.useState([]),[K,$]=o.useState([]),[l,E]=o.useState([]);o.useEffect(()=>{d&&R()},[d]);const R=async()=>{try{p(!0);const{data:a,error:i}=await c.from("classes").select("id, name, subject, color, created_at").eq("created_by",d.id).order("created_at",{ascending:!1});if(i)throw i;let u=0;if(a&&a.length>0){const z=a.map(D=>D.id),{count:B}=await c.from("class_members").select("*",{count:"exact",head:!0}).in("class_id",z).eq("role","student");u=B||0}const{data:g,error:b}=await c.from("activities").select("id, title, due_date, status, class_id").eq("created_by",d.id).order("created_at",{ascending:!1}).limit(5);if(b)throw b;const{data:v,error:j}=await c.from("submissions").select(`
          id,
          submitted_at,
          student_id,
          activity_id,
          status,
          activities(id, title),
          student:profiles!submissions_student_id_fkey(full_name, email)
        `).is("grade",null).eq("status","submitted").order("submitted_at",{ascending:!0}).limit(10);if(j)throw j;P({totalClasses:a?.length||0,totalStudents:u,totalActivities:g?.length||0,pendingCorrections:v?.length||0,avgClassSize:a?.length>0?Math.round(u/a.length):0}),T(a?.slice(0,4)||[]),$(g||[]),E(v?.slice(0,5)||[])}catch(a){console.error("Erro ao carregar dashboard:",a),V.error("Erro ao carregar dados")}finally{p(!1)}};return _?e.jsx(L,{message:"Carregando seu painel..."}):e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}})}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 mb-4",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Painel do Professor"})]}),e.jsxs("h1",{className:"text-4xl font-bold mb-2",children:["Olá, Prof. ",d?.user_metadata?.name?.split(" ")[0]||"Professor","! 👨‍🏫"]}),e.jsx("p",{className:"text-white/90 text-lg",children:"Gerencie suas turmas, atividades e acompanhe o progresso dos alunos"})]}),e.jsx(t.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.3},children:e.jsx(w,{variant:"outline",leftIcon:A,className:"bg-white/20 backdrop-blur-sm border-white/30 text-white hover:bg-white/30 whitespace-nowrap inline-flex items-center gap-2 font-semibold shadow-lg",onClick:()=>s("/dashboard/teacher/activities/new"),children:"Nova Atividade"})})]}),e.jsx(t.div,{animate:{y:[0,-10,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0},className:"absolute top-20 right-32 w-20 h-20 bg-white/10 backdrop-blur-sm rounded-2xl"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[{title:"Turmas",value:r.totalClasses,icon:m,gradient:"from-blue-500 to-cyan-500",action:()=>s("/dashboard/teacher/classes")},{title:"Alunos",value:r.totalStudents,icon:m,gradient:"from-green-500 to-emerald-500"},{title:"Atividades",value:r.totalActivities,icon:f,gradient:"from-purple-500 to-pink-500",action:()=>s("/dashboard/teacher/activities")},{title:"Para Corrigir",value:r.pendingCorrections,icon:x,gradient:"from-orange-500 to-red-500",urgent:r.pendingCorrections>0},{title:"Média/Turma",value:r.avgClassSize,icon:J,gradient:"from-indigo-500 to-purple-500"}].map((a,i)=>e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},onClick:a.action,className:a.action?"cursor-pointer":"",children:e.jsxs(n,{variant:"elevated",className:`relative overflow-hidden group hover:scale-105 transition-transform ${a.urgent?"border-2 border-orange-300 dark:border-orange-700":""}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.gradient} text-white`,children:e.jsx(a.icon,{className:"w-6 h-6"})}),a.urgent&&e.jsx(t.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:e.jsx(y,{className:"w-5 h-5 text-orange-600"})})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:a.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.title})]})]})},a.title))}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(G,{userRole:"teacher"})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:e.jsxs(n,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Minhas Turmas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Acesso rápido às suas turmas"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 text-white flex items-center justify-center",children:e.jsx(m,{className:"w-5 h-5"})})]}),h.length===0?e.jsx(C,{icon:m,title:"Nenhuma turma criada",description:"Crie sua primeira turma para começar"}):e.jsx("div",{className:"space-y-3",children:h.map((a,i)=>e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.1},onClick:()=>s(`/dashboard/teacher/classes/${a.id}`),className:"group flex items-center justify-between p-4 border-2 border-border rounded-xl hover:border-primary/50 hover:bg-gradient-to-r hover:from-muted/50 hover:to-transparent transition-all cursor-pointer hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${a.color||"from-blue-500 to-cyan-500"} flex items-center justify-center text-white font-bold text-lg`,children:a.name?.charAt(0)||"T"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold group-hover:text-primary transition-colors",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.subject})]})]}),e.jsx(k,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]},a.id))}),h.length>0&&e.jsx(w,{variant:"outline",className:"w-full mt-4 whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white dark:bg-slate-900 text-foreground border-border",onClick:()=>s("/dashboard/teacher/classes"),children:"Ver Todas as Turmas"})]})}),e.jsx(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},children:e.jsxs(n,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Para Corrigir"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Submissões aguardando correção"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 text-white",children:e.jsx(x,{className:"w-5 h-5"})})]}),l.length===0?e.jsx(C,{icon:S,title:"Tudo corrigido!",description:"Nenhuma submissão pendente no momento"}):e.jsx("div",{className:"space-y-3",children:l.map((a,i)=>e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},onClick:()=>s(`/dashboard/teacher/activities/${a.activity_id}`),className:"group flex items-center justify-between p-4 border-2 border-orange-200 dark:border-orange-900 rounded-xl hover:border-orange-400 hover:bg-gradient-to-r hover:from-orange-50 hover:to-transparent dark:hover:from-orange-900/20 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1 group-hover:text-primary transition-colors",children:a.activities?.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["👤 ",a.student?.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["📚 ",a.activities?.classes?.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["📅 ",new Date(a.submitted_at).toLocaleDateString("pt-BR")]})]})]}),e.jsx(k,{className:"w-5 h-5 text-orange-600 group-hover:translate-x-1 transition-all"})]},a.id))})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(n,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Correções do Dia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atividades para corrigir hoje"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 text-white",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[l.slice(0,3).map((a,i)=>e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>s(`/dashboard/submissions/${a.id}`),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:a.activities?.title||"Atividade"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.student?.name||"Aluno"})]}),e.jsx("div",{className:"text-xs text-orange-600 font-medium",children:new Date(a.submitted_at).toLocaleDateString("pt-BR")})]},a.id)),l.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(S,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma correção pendente!"})]})]})]})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.65},children:e.jsxs(n,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Eventos do Dia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Agenda de hoje"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 text-white",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"space-y-3",children:[{id:1,title:"Aula de Matemática 9A",time:"08:00",type:"aula"},{id:2,title:"Reunião de Pais",time:"14:00",type:"reuniao"},{id:3,title:"Entrega de Notas",time:"16:30",type:"prazo"}].map((a,i)=>e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a.type==="aula"?"bg-blue-500":a.type==="reuniao"?"bg-green-500":"bg-orange-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.time})]})]},a.id))})]})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(n,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Alunos em Alerta"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Precisam de atenção"})]}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-pink-500 text-white",children:e.jsx(y,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"space-y-3",children:[{id:1,name:"Ana Silva",issue:"Baixa frequência",severity:"high"},{id:2,name:"João Santos",issue:"Notas abaixo da média",severity:"medium"},{id:3,name:"Maria Costa",issue:"Atividades em atraso",severity:"medium"}].map((a,i)=>e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>s(`/dashboard/students/${a.id}`),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.issue})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${a.severity==="high"?"bg-red-500":"bg-orange-500"}`})]},a.id))})]})})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsxs(n,{variant:"elevated",className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Ações Rápidas"}),e.jsx("p",{className:"text-muted-foreground",children:"Acesso rápido às principais funcionalidades"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:A,label:"Nova Turma",path:"/dashboard/classes/create",gradient:"from-blue-500 to-cyan-500",description:"Criar nova turma",indicator:null},{icon:f,label:"Nova Atividade",path:"/dashboard/activities/new",gradient:"from-purple-500 to-pink-500",description:"Criar atividade",indicator:null},{icon:H,label:"Reuniões Hoje",path:"/dashboard/calendar",gradient:"from-green-500 to-emerald-500",description:"Agendar reunião",indicator:2},{icon:x,label:"Para Corrigir",path:"/dashboard/corrections",gradient:"from-orange-500 to-red-500",description:"Atividades pendentes",indicator:r.pendingCorrections,urgent:r.pendingCorrections>0},{icon:I,label:"Alunos em Alerta",path:"/dashboard/students",gradient:"from-red-500 to-pink-500",description:"Precisam atenção",indicator:3},{icon:O,label:"Analytics",path:"/dashboard/analytics",gradient:"from-indigo-500 to-purple-500",description:"Ver relatórios",indicator:null},{icon:N,label:"Agenda",path:"/dashboard/calendar",gradient:"from-teal-500 to-cyan-500",description:"Ver calendário",indicator:null},{icon:F,label:"Atividade Turma",path:"/dashboard/live-activity",gradient:"from-yellow-500 to-orange-500",description:"Monitorar em tempo real",indicator:null}].map((a,i)=>e.jsx(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+i*.05},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>s(a.path),className:"cursor-pointer group",children:e.jsxs("div",{className:`relative p-6 rounded-2xl border-2 border-border hover:border-primary/50 transition-all duration-300 bg-gradient-to-br from-background to-muted/20 hover:shadow-lg ${a.urgent?"border-orange-300 dark:border-orange-700 animate-pulse":""}`,children:[a.indicator!==null&&a.indicator>0&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg z-10",children:a.indicator>99?"99+":a.indicator}),e.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br ${a.gradient} flex items-center justify-center text-white shadow-lg group-hover:shadow-xl transition-all duration-300 p-3`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 group-hover:text-primary transition-colors",children:a.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient} opacity-0 group-hover:opacity-5 rounded-2xl transition-opacity duration-300`})]})},a.label))})]})})]})};export{oe as default};
