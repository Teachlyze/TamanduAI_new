const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-Dbqr5CjX.js","assets/main-Bujpyeg-.js","assets/main-By6hUV15.css"])))=>i.map(i=>d[i]);
import{f as q,_ as z,r as l,aR as H,k as b,T as E,U as T,j as e,m,aA as C,aB as R,aC as A,aD as S,aE as D,i as O,w as J,b2 as G,a0 as Q,B as W,J as L,Q as F,D as K,F as Y,H as Z,I as X,K as ee,N as ae}from"./main-Bujpyeg-.js";import{t as i}from"./use-toast-9Xc4qRbM.js";import{u as te}from"./useUserRole-GO31OD0z.js";import{F as re}from"./funnel-BoelNdGr.js";import{D as se}from"./download-EGp6uXz0.js";import{A as oe}from"./arrow-up-right-DugP5kmW.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],de=q("file-spreadsheet",ie),ne=async()=>{try{const r=await z(()=>import("./exceljs.min-Dbqr5CjX.js").then(c=>c.e),__vite__mapDeps([0,1,2]));return r.default||r}catch(r){throw console.error("Failed to load ExcelJS:",r),r}},ue=()=>{const{isTeacher:r}=te(),[c,M]=l.useState("month"),[h,$]=l.useState("all"),[U,P]=l.useState("overview"),[d,g]=l.useState(!1);l.useEffect(()=>{const a=t=>{d&&!t.target.closest(".export-menu-container")&&g(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[d]);const _=()=>{g(!d)},f=a=>{g(!1),v(`export:${a}`)},y=()=>[{data:"2024-01-15",atividade:"Atividade 1",concluido:"Sim",nota:"9.5"},{data:"2024-01-16",atividade:"Atividade 2",concluido:"Sim",nota:"8.0"},{data:"2024-01-17",atividade:"Atividade 3",concluido:"N√£o",nota:"-"}],B=async()=>{try{const a=await ne(),t=y(),x=new a.Workbook,s=x.addWorksheet("Relat√≥rio");s.columns=[{header:"Data",key:"data",width:15},{header:"Atividade",key:"atividade",width:30},{header:"Conclu√≠do",key:"concluido",width:15},{header:"Nota",key:"nota",width:10}],s.addRows(t),s.getRow(1).font={bold:!0},s.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1E88E5"}},s.getRow(1).alignment={vertical:"middle",horizontal:"center"},s.columns.forEach(p=>{p.width=p.header.length<12?12:p.header.length});const o=await x.xlsx.writeBuffer(),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),N=window.URL.createObjectURL(n),u=document.createElement("a");u.href=N,u.download=`relatorio-${new Date().toISOString().split("T")[0]}.xlsx`,u.click(),window.URL.revokeObjectURL(N),i({title:"Relat√≥rio exportado!",description:"O relat√≥rio em Excel foi baixado com sucesso."})}catch(a){console.error("Erro ao exportar para Excel:",a),i({variant:"destructive",title:"Erro ao exportar para Excel",description:a.message||"Ocorreu um erro ao exportar para Excel."})}},I=()=>{try{const t=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Relat√≥rio de Atividades</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 20px; }
              table { width: 100%; border-collapse: collapse; margin-top: 20px; }
              th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
              th { background-color: #2980b9; color: white; }
              tr:nth-child(even) { background-color: #f2f2f2; }
              h1 { color: #2980b9; }
            </style>
          </head>
          <body>
            <h1>Relat√≥rio de Atividades</h1>
            <table>
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Atividade</th>
                  <th>Conclu√≠do</th>
                  <th>Nota</th>
                </tr>
              </thead>
              <tbody>
                ${y().map(n=>`
                  <tr>
                    <td>${n.data}</td>
                    <td>${n.atividade}</td>
                    <td>${n.concluido}</td>
                    <td>${n.nota}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </body>
        </html>
      `,x=new Blob([t],{type:"text/html"}),s=window.URL.createObjectURL(x),o=document.createElement("a");o.href=s,o.download=`relatorio-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s),i({title:"Relat√≥rio exportado!",description:"O relat√≥rio foi baixado como HTML."})}catch(a){console.error("Erro ao exportar para PDF:",a),i({variant:"destructive",title:"Erro ao exportar relat√≥rio",description:a.message||"Ocorreu um erro ao exportar o relat√≥rio."})}},v=async a=>{try{switch(a){case"export:excel":B();break;case"export:pdf":I();break;case"filter":i({title:"Filtros aplicados",description:`Per√≠odo: ${j.find(t=>t.id===c)?.name}, Turma: ${h==="all"?"Todas":h}`});break;default:i({title:"A√ß√£o n√£o implementada",description:`A a√ß√£o ${a} ainda n√£o foi implementada.`})}}catch(t){i({variant:"destructive",title:"Erro",description:t.message||"Ocorreu um erro ao processar sua solicita√ß√£o."})}},w=[{name:"Taxa de Entrega",value:"87%",change:"+5%",changeType:"increase",icon:E,gradient:"from-green-500 to-emerald-500"},{name:"M√©dia Geral",value:"8.2",change:"+0.3",changeType:"increase",icon:b,gradient:"from-blue-500 to-cyan-500"},{name:"Alunos Ativos",value:"94%",change:"+2%",changeType:"increase",icon:T,gradient:"from-purple-500 to-pink-500"},{name:"Atividades",value:"24",change:"+8",changeType:"increase",icon:W,gradient:"from-orange-500 to-red-500"}],V=["Todas as Turmas","Matem√°tica 9A","F√≠sica 2B","Qu√≠mica 3C"],j=[{id:"week",name:"Semana"},{id:"month",name:"M√™s"},{id:"quarter",name:"Trimestre"},{id:"year",name:"Ano"}],k=l.useMemo(()=>[{id:"overview",name:"Vis√£o Geral",icon:H},{id:"performance",name:"Desempenho",icon:b},...r?[{id:"engagement",name:"Engajamento",icon:E},{id:"attendance",name:"Frequ√™ncia",icon:T}]:[]],[r]);return e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold mb-3",children:"üìä Relat√≥rios & Analytics"}),e.jsx("p",{className:"text-blue-100 text-lg max-w-2xl",children:"Acompanhe m√©tricas detalhadas e insights sobre o desempenho das suas turmas e atividades educacionais."})]})})}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-white/10 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-white/5 to-transparent rounded-full blur-2xl"}),e.jsx("div",{className:"hidden lg:block absolute top-8 right-8",children:e.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(b,{className:"w-12 h-12 text-white"})})})]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Filtros:"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs(C,{value:h,onValueChange:$,children:[e.jsx(R,{className:"w-full sm:w-64 rounded-xl",children:e.jsx(A,{placeholder:"Selecionar turma"})}),e.jsx(S,{children:V.map(a=>e.jsx(D,{value:a.toLowerCase().replace(/\s+/g,"-"),children:a},a))})]}),e.jsxs(C,{value:c,onValueChange:M,children:[e.jsx(R,{className:"w-full sm:w-48 rounded-xl",children:e.jsx(A,{placeholder:"Selecionar per√≠odo"})}),e.jsx(S,{children:j.map(a=>e.jsx(D,{value:a.id,children:a.name},a.id))})]}),e.jsxs(O,{variant:"outline",onClick:()=>v("filter"),className:"rounded-xl hover:bg-blue-50 dark:hover:bg-muted/30",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Aplicar Filtros"]}),r&&e.jsxs("div",{className:"relative export-menu-container ml-auto",children:[e.jsxs(O,{variant:"outline",className:"rounded-xl",onClick:_,"aria-expanded":d,"aria-haspopup":"true",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Exportar",e.jsx(G,{className:`w-4 h-4 ml-2 transition-transform ${d?"transform rotate-180":""}`})]}),d&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-xl shadow-xl bg-white dark:bg-gray-800 ring-1 ring-black/5 dark:ring-gray-700 z-50 backdrop-blur-xl",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>f("excel"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-gray-200 hover:bg-green-50 dark:hover:bg-green-900/20 hover:text-green-700 dark:hover:text-green-300 flex items-center gap-3 transition-all duration-200 rounded-lg mx-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"w-4 h-4 text-green-600 dark:text-green-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Exportar para Excel"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Planilha .xlsx"})]})]}),e.jsxs("button",{onClick:()=>f("pdf"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-gray-200 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 flex items-center gap-3 transition-all duration-200 rounded-lg mx-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-red-600 dark:text-red-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Exportar para HTML"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Relat√≥rio formatado"})]})]})]})})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((a,t)=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:t*.1+.2},className:"group",children:e.jsx(L,{className:"relative p-6 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:e.jsxs(F,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 bg-gradient-to-r ${a.gradient} rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(a.icon,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${a.changeType==="increase"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"}`,children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:a.change})]})]}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:a.value}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:a.name})]})})},a.name))}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs(K,{value:U,onValueChange:P,className:"space-y-6",children:[e.jsx(Y,{className:"grid w-full grid-cols-2 lg:grid-cols-4 bg-gray-100 dark:bg-gray-800 rounded-2xl p-2",children:k.map(a=>e.jsxs(Z,{value:a.id,className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:shadow-sm transition-all",children:[e.jsx(a.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a.name})]},a.id))}),k.map(a=>e.jsx(X,{value:a.id,children:e.jsxs(L,{className:"rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",children:[e.jsx(ee,{className:"pb-4",children:e.jsxs(ae,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${w[0].gradient} rounded-xl flex items-center justify-center`,children:e.jsx(a.icon,{className:"w-5 h-5 text-white"})}),a.name]})}),e.jsx(F,{children:e.jsx("div",{className:"h-80 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(a.icon,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:["Gr√°fico de ",a.name]}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Dados ser√£o exibidos aqui em breve"})]})})})]})},a.id))]})})]})};export{ue as default};
