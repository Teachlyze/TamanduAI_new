import{D as u,r,q as h,g as f,j as e,m,x as p,F as g,H as j,I as b,y,aT as N,aq as v,i as C,b as w,s as E}from"./main-BBAlbGLj.js";import{n as R}from"./roleNavigation-mm4rSh2G.js";import{M as q}from"./mail-C0ywUecL.js";import{C as k}from"./circle-check-big-9PMWtYp0.js";import{A as S}from"./arrow-left-D8R0xudv.js";const A=u,I={spinner:A};function P(){const[n,t]=r.useState(!1),[d,l]=r.useState(!1),[o,i]=r.useState(""),{user:s}=h(),c=f();r.useEffect(()=>{if(s?.email_confirmed_at){const a=s.user_metadata?.role||"student";R(c,a)}},[s,c]);const x=async()=>{if(!s?.email){i("Email não encontrado. Por favor, faça login novamente.");return}t(!0),i(""),l(!1);try{const{error:a}=await E.auth.resend({type:"signup",email:s.email});if(a)throw a;l(!0)}catch(a){i(a.message||"Falha ao reenviar email. Tente novamente.")}finally{t(!1)}};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:e.jsxs(p,{children:[e.jsxs(g,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100",children:e.jsx(q,{className:"h-8 w-8 text-blue-600"})}),e.jsx(j,{className:"text-2xl",children:"Verifique seu email"}),e.jsxs(b,{children:["Enviamos um link de confirmação para ",e.jsx("strong",{children:s?.email})]})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-2 font-semibold text-gray-900",children:"Próximos passos:"}),e.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-sm text-gray-600",children:[e.jsx("li",{children:"Abra seu email"}),e.jsx("li",{children:"Clique no link de confirmação que enviamos"}),e.jsx("li",{children:"Volte aqui e faça login"})]})]}),o&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:o}),d&&e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex items-center gap-2 rounded-md border border-green-200 bg-green-50 p-3 text-sm text-green-700",children:[e.jsx(k,{className:"h-4 w-4"}),"Email reenviado com sucesso!"]}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Não recebeu o email?"," ",e.jsx("button",{onClick:x,disabled:n,className:"font-medium text-blue-600 hover:underline disabled:opacity-50",children:n?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(I.spinner,{className:"h-3 w-3 animate-spin"}),"Enviando..."]}):e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),"Reenviar"]})})]})]}),e.jsx(v,{className:"flex-col space-y-2",children:e.jsx(C,{asChild:!0,variant:"outline",className:"w-full",children:e.jsxs(w,{to:"/login",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Voltar para login"]})})})]})})})}export{P as default};
