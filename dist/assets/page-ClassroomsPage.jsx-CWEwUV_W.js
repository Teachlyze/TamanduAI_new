import{r as c,j as e,A as le,M as oe,B as ne,K as ce,aw as de,V as me,X as xe,P as ue,u as q,ax as he}from"./react-vendor-C2HUFn5N.js";import{F as je,C as ge,d as pe,u as ve,a as be,o as fe,s as p,n as Ne}from"./form-vendor-DOeDnMZv.js";import{c as v,j as _,a as G,B as C,C as S,b as F,d as I,k as D,e as A,I as N,S as V,f as $,g as L,h as E,i as n,T as ye,t as R,L as k,s as we}from"./lazy-CreateActivityPage.jsx-DYBofU2F.js";import{S as Ce,a3 as Q}from"./ui-vendor-Dv2DrOQv.js";import{B as Se}from"./page-ActivityManagementPage.jsx-C56hp2jB.js";import{a as Fe}from"./utils-small-jbG8BFt3.js";import{m as f}from"./motion-vendor-Crtv24Dn.js";import{u as K}from"./vendor-react-router-B4Bn0PSh.js";import{a as z,C as B,B as U,c as y,L as Ie,T as De}from"./antd-vendor-K_53YjeB.js";import{b as Ae}from"./page-ActivitiesListPage.jsx-Cv5lq7oV.js";const ke=je,X=c.createContext({}),g=({...r})=>e.jsx(X.Provider,{value:{name:r.name},children:e.jsx(ge,{...r})}),T=()=>{const r=c.useContext(X),t=c.useContext(W),{getFieldState:a,formState:l}=pe(),i=a(r.name,l);if(!r)throw new Error("useFormField should be used within <FormField>");const{id:d}=t;return{id:d,name:r.name,formItemId:`${d}-form-item`,formDescriptionId:`${d}-form-item-description`,formMessageId:`${d}-form-item-message`,...i}},W=c.createContext({}),x=c.forwardRef(({className:r,...t},a)=>{const l=c.useId();return e.jsx(W.Provider,{value:{id:l},children:e.jsx("div",{ref:a,className:v("space-y-2",r),...t})})});x.displayName="FormItem";const u=c.forwardRef(({className:r,...t},a)=>{const{error:l,formItemId:i}=T();return e.jsx(_,{ref:a,className:v(l&&"text-destructive",r),htmlFor:i,...t})});u.displayName="FormLabel";const h=c.forwardRef(({...r},t)=>{const{error:a,formItemId:l,formDescriptionId:i,formMessageId:d}=T();return e.jsx(Ce,{ref:t,id:l,"aria-describedby":a?`${i} ${d}`:`${i}`,"aria-invalid":!!a,...r})});h.displayName="FormControl";const O=c.forwardRef(({className:r,...t},a)=>{const{formDescriptionId:l}=T();return e.jsx("p",{ref:a,id:l,className:v("text-sm text-muted-foreground",r),...t})});O.displayName="FormDescription";const j=c.forwardRef(({className:r,children:t,...a},l)=>{const{error:i,formMessageId:d}=T(),b=i?String(i?.message):t;return b?e.jsx("p",{ref:l,id:d,className:v("text-sm font-medium text-destructive",r),...a,children:b}):null});j.displayName="FormMessage";const Y=c.forwardRef(({className:r,orientation:t="horizontal",decorative:a=!0,...l},i)=>e.jsx(Q,{ref:i,decorative:a,orientation:t,className:v("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...l}));Y.displayName=Q.displayName;const Te=Fe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Z=c.forwardRef(({className:r,variant:t,...a},l)=>e.jsx("div",{ref:l,role:"alert",className:v(Te({variant:t}),r),...a}));Z.displayName="Alert";const Me=c.forwardRef(({className:r,...t},a)=>e.jsx("h5",{ref:a,className:v("mb-1 font-medium leading-none tracking-tight",r),...t}));Me.displayName="AlertTitle";const ee=c.forwardRef(({className:r,...t},a)=>e.jsx("div",{ref:a,className:v("text-sm [&_p]:leading-relaxed",r),...t}));ee.displayName="AlertDescription";const Ve=fe({name:p().min(3,"Nome da turma deve ter pelo menos 3 caracteres"),subject:p().min(2,"Matéria é obrigatória"),description:p().optional(),schedule:p().min(1,"Horário é obrigatório"),room:p().optional(),capacity:Ne().min(1,"Capacidade deve ser pelo menos 1").max(100,"Capacidade máxima é 100"),color:p().min(1,"Selecione uma cor"),grade:p().min(1,"Série é obrigatória"),semester:p().min(1,"Semestre é obrigatório"),startDate:p().min(1,"Data de início é obrigatória"),endDate:p().min(1,"Data de término é obrigatória")}),$e=()=>{const r=K(),{user:t}=G(),[a,l]=c.useState(!1),[i,d]=c.useState([]),[b,w]=c.useState(null),se=[{name:"Azul",value:"blue",class:"bg-blue-500"},{name:"Verde",value:"green",class:"bg-green-500"},{name:"Roxo",value:"purple",class:"bg-purple-500"},{name:"Rosa",value:"pink",class:"bg-pink-500"},{name:"Laranja",value:"orange",class:"bg-orange-500"},{name:"Vermelho",value:"red",class:"bg-red-500"},{name:"Amarelo",value:"yellow",class:"bg-yellow-500"},{name:"Índigo",value:"indigo",class:"bg-indigo-500"}],ae=[{id:1,name:"Ana Silva",email:"ana@email.com"},{id:2,name:"João Santos",email:"joao@email.com"},{id:3,name:"Maria Oliveira",email:"maria@email.com"},{id:4,name:"Pedro Costa",email:"pedro@email.com"},{id:5,name:"Carla Souza",email:"carla@email.com"}],m=ve({resolver:be(Ve),defaultValues:{name:"",subject:"",description:"",schedule:"",room:"",capacity:30,color:"blue",grade:"",semester:"",startDate:"",endDate:""}}),re=async s=>{if(!t){R({variant:"destructive",title:"Erro de autenticação",description:"Você precisa estar logado para criar uma turma."});return}l(!0),w(null);try{k.info("Iniciando criação de turma",{teacherId:t.id,className:s.name,subject:s.subject});const{data:o,error:M}=await we.from("classes").insert([{name:s.name,subject:s.subject,description:s.description,schedule:s.schedule,room:s.room,capacity:s.capacity,color:s.color,grade:s.grade,semester:s.semester,start_date:s.startDate,end_date:s.endDate,teacher_id:t.id,status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(M)throw k.error("Erro ao criar turma no banco",{error:M.message,teacherId:t.id}),M;k.info("Turma criada com sucesso",{classId:o.id,className:o.name}),R({title:"✅ Turma criada com sucesso!",description:`A turma "${s.name}" foi criada e está pronta para receber alunos.`}),r("/dashboard/classes")}catch(o){k.error("Erro ao criar turma",{error:o.message,teacherId:t.id}),w(o.message),R({variant:"destructive",title:"❌ Erro ao criar turma",description:o.message||"Não foi possível criar a turma. Verifique sua conexão e tente novamente."})}finally{l(!1)}},ie=s=>{i.find(o=>o.id===s.id)||d([...i,s])},te=s=>{d(i.filter(o=>o.id!==s))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:e.jsxs("div",{className:"w-full space-y-8 p-6",children:[e.jsxs(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl p-8 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>r("/dashboard/classes"),className:"text-white hover:bg-white/20 h-10 w-10",disabled:a,children:e.jsx(le,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Nova Turma"}),e.jsx("p",{className:"text-purple-100 text-lg",children:"Crie uma nova turma e comece a ensinar"})]})]})}),e.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 h-32 bg-white/5 rounded-full blur-2xl"})]}),b&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs(Z,{variant:"destructive",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx(ee,{children:b})]})}),e.jsx(ke,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(re),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(S,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(ne,{className:"w-4 h-4 text-white"})}),"Informações Básicas"]}),e.jsx(D,{children:"Defina as informações principais da turma"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx(g,{control:m.control,name:"name",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Nome da Turma"}),e.jsx(h,{children:e.jsx(N,{placeholder:"Ex: Matemática 9A",...s,disabled:a})}),e.jsx(j,{})]})}),e.jsx(g,{control:m.control,name:"subject",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Matéria"}),e.jsxs(V,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(h,{children:e.jsx($,{children:e.jsx(L,{placeholder:"Selecione a matéria"})})}),e.jsxs(E,{children:[e.jsx(n,{value:"matematica",children:"Matemática"}),e.jsx(n,{value:"portugues",children:"Português"}),e.jsx(n,{value:"ciencias",children:"Ciências"}),e.jsx(n,{value:"historia",children:"História"}),e.jsx(n,{value:"geografia",children:"Geografia"}),e.jsx(n,{value:"fisica",children:"Física"}),e.jsx(n,{value:"quimica",children:"Química"}),e.jsx(n,{value:"biologia",children:"Biologia"}),e.jsx(n,{value:"ingles",children:"Inglês"}),e.jsx(n,{value:"educacao_fisica",children:"Educação Física"}),e.jsx(n,{value:"artes",children:"Artes"})]})]}),e.jsx(j,{})]})}),e.jsx(g,{control:m.control,name:"description",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Descrição (Opcional)"}),e.jsx(h,{children:e.jsx(ye,{placeholder:"Descreva os objetivos e conteúdo da turma...",className:"min-h-[100px]",...s,disabled:a})}),e.jsx(j,{})]})})]})]})}),e.jsx(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(S,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),"Horários e Datas"]}),e.jsx(D,{children:"Configure quando a turma acontecerá"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx(g,{control:m.control,name:"schedule",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Horário"}),e.jsx(h,{children:e.jsx(N,{placeholder:"Ex: Segunda e Quarta, 14:00 - 15:30",...s,disabled:a})}),e.jsx(O,{children:"Descreva os dias da semana e horários das aulas"}),e.jsx(j,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{control:m.control,name:"startDate",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Data de Início"}),e.jsx(h,{children:e.jsx(N,{type:"date",...s,disabled:a})}),e.jsx(j,{})]})}),e.jsx(g,{control:m.control,name:"endDate",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Data de Término"}),e.jsx(h,{children:e.jsx(N,{type:"date",...s,disabled:a})}),e.jsx(j,{})]})})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(S,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"w-4 h-4 text-white"})}),"Configurações da Turma"]}),e.jsx(D,{children:"Defina série, capacidade e outras configurações"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{control:m.control,name:"grade",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Série"}),e.jsxs(V,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(h,{children:e.jsx($,{children:e.jsx(L,{placeholder:"Série"})})}),e.jsxs(E,{children:[e.jsx(n,{value:"6ano",children:"6º Ano"}),e.jsx(n,{value:"7ano",children:"7º Ano"}),e.jsx(n,{value:"8ano",children:"8º Ano"}),e.jsx(n,{value:"9ano",children:"9º Ano"}),e.jsx(n,{value:"1medio",children:"1º Médio"}),e.jsx(n,{value:"2medio",children:"2º Médio"}),e.jsx(n,{value:"3medio",children:"3º Médio"})]})]}),e.jsx(j,{})]})}),e.jsx(g,{control:m.control,name:"semester",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Semestre"}),e.jsxs(V,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(h,{children:e.jsx($,{children:e.jsx(L,{placeholder:"Semestre"})})}),e.jsxs(E,{children:[e.jsx(n,{value:"1",children:"1º Semestre"}),e.jsx(n,{value:"2",children:"2º Semestre"})]})]}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{control:m.control,name:"capacity",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Capacidade"}),e.jsx(h,{children:e.jsx(N,{type:"number",min:"1",max:"100",...s,onChange:o=>s.onChange(parseInt(o.target.value)),disabled:a})}),e.jsx(O,{children:"Número máximo de alunos"}),e.jsx(j,{})]})}),e.jsx(g,{control:m.control,name:"room",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Sala (Opcional)"}),e.jsx(h,{children:e.jsx(N,{placeholder:"Ex: Sala 101",...s,disabled:a})}),e.jsx(j,{})]})})]}),e.jsx(g,{control:m.control,name:"color",render:({field:s})=>e.jsxs(x,{children:[e.jsx(u,{children:"Cor da Turma"}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:se.map(o=>e.jsx("button",{type:"button",onClick:()=>s.onChange(o.value),disabled:a,className:`
                                      relative h-12 rounded-lg border-2 transition-all duration-200
                                      ${o.class}
                                      ${s.value===o.value?"border-white shadow-lg scale-105":"border-transparent hover:scale-105"}
                                      ${a?"opacity-50 cursor-not-allowed":""}
                                    `,title:o.name,children:s.value===o.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})},o.value))})}),e.jsx(j,{})]})})]})]})}),e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(S,{className:"bg-white/80 backdrop-blur-sm border-white/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(me,{className:"w-4 h-4 text-white"})}),"Alunos (Opcional)"]}),e.jsx(D,{children:"Adicione alunos à turma agora ou faça isso depois"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{children:["Alunos Selecionados (",i.length,")"]}),i.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>e.jsxs(Se,{variant:"secondary",className:"flex items-center gap-1",children:[s.name,e.jsx("button",{type:"button",onClick:()=>te(s.id),disabled:a,className:"ml-1 hover:bg-destructive/20 rounded-full p-0.5 disabled:opacity-50",children:e.jsx(xe,{className:"w-3 h-3"})})]},s.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum aluno selecionado"})]}),e.jsx(Y,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Alunos Disponíveis"}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:ae.filter(s=>!i.find(o=>o.id===s.id)).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email})]}),e.jsxs(C,{type:"button",size:"sm",variant:"outline",onClick:()=>ie(s),disabled:a,children:[e.jsx(ue,{className:"w-3 h-3 mr-1"}),"Adicionar"]})]},s.id))})]})]})]})})]})]}),e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-end gap-4 pt-6 bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50 shadow-lg",children:[e.jsx(C,{type:"button",variant:"outline",onClick:()=>r("/dashboard/classes"),disabled:a,className:"bg-white/70 backdrop-blur-sm hover:bg-white/80",children:"Cancelar"}),e.jsx(C,{type:"submit",disabled:a,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white min-w-[140px] shadow-lg hover:shadow-xl transition-all duration-300",children:a?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Criar Turma"]})})]})]})})]})})},Le=r=>{switch(r){case 0:return e.jsx(y,{color:"blue",children:"One-to-one"});case 2:return e.jsx(y,{color:"purple",children:"Lecture Hall"});case 4:return e.jsx(y,{color:"green",children:"Small Classroom"});case 10:return e.jsx(y,{color:"orange",children:"Cloud Classroom"});default:return e.jsx(y,{children:"Unknown"})}},Ee=({classrooms:r})=>{const t=K(),a=i=>{t(`/whiteboard/${i}`)},l=i=>{t(`/classrooms/${i.roomUuid}`,{state:{classroom:i}})};return e.jsx(z,{grid:{gutter:16,xs:1,sm:2,md:3,lg:3,xl:4,xxl:4},dataSource:r,renderItem:i=>e.jsx(z.Item,{children:e.jsxs(B,{title:i.roomName,actions:[e.jsx(U,{type:"primary",onClick:()=>a(i.roomUuid),children:"Join"}),e.jsx(U,{onClick:()=>l(i),children:"Details"})],children:[e.jsx(B.Meta,{description:Le(i.roomType)}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["ID: ",i.roomUuid]})]})})})},{Content:H}=Ie,{Title:P,Paragraph:J}=De,Re=()=>{const{user:r}=G(),[t,a]=c.useState([]),{data:l,loading:i}=Ae(r?.id,"student"),d=b=>{a(w=>[...w,b])};return i?e.jsx(H,{className:"p-4 md:p-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(q,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando turmas..."})]})})}):e.jsxs(H,{className:"p-4 md:p-8",children:[e.jsx(P,{level:2,children:"Gerenciamento de Turmas"}),e.jsx(J,{children:"Crie e gerencie suas turmas virtuais. Junte-se a uma turma para acessar as atividades e recursos disponíveis."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs(B,{children:[e.jsx(P,{level:4,children:"Create a New Classroom"}),e.jsx($e,{onClassroomCreated:d})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(P,{level:4,children:"Available Classrooms"}),l&&l.length>0?e.jsx(Ee,{classrooms:l}):e.jsx(J,{type:"secondary",children:"No classrooms have been created yet. Use the form to create your first one."})]})]})]})},Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{Z as A,Qe as C,ee as a};
